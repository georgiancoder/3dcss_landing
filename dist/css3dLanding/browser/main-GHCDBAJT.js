var cR=Object.defineProperty,uR=Object.defineProperties;var lR=Object.getOwnPropertyDescriptors;var Pc=Object.getOwnPropertySymbols;var FE=Object.prototype.hasOwnProperty,VE=Object.prototype.propertyIsEnumerable;var LE=(t,e,n)=>e in t?cR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||={})FE.call(e,n)&&LE(t,n,e[n]);if(Pc)for(var n of Pc(e))VE.call(e,n)&&LE(t,n,e[n]);return t},ae=(t,e)=>uR(t,lR(e));var Oc=(t,e)=>{var n={};for(var r in t)FE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Pc)for(var r of Pc(t))e.indexOf(r)<0&&VE.call(t,r)&&(n[r]=t[r]);return n};var nt=null,kc=!1,_h=1,dR=null,Nt=Symbol("SIGNAL");function te(t){let e=nt;return nt=t,e}function Lc(){return nt}var Fc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vc(t){if(kc)throw new Error("");if(nt===null)return;nt.consumerOnSignalRead(t);let e=nt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=nt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:nt.producers,n!==void 0&&n.producer===t)){nt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===nt&&(!r||hR(i,nt)))return;let o=qi(nt),s={producer:t,consumer:nt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};nt.producersTail=s,e!==void 0?e.nextProducer=s:nt.producers=s,o&&$E(t,s)}function UE(){_h++}function jE(t){if(!(qi(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===_h)){if(!t.producerMustRecompute(t)&&!jc(t)){vh(t);return}t.producerRecomputeValue(t),vh(t)}}function Eh(t){if(t.consumers===void 0)return;let e=kc;kc=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||fR(r)}}finally{kc=e}}function Ih(){return nt?.consumerAllowSignalWrites!==!1}function fR(t){t.dirty=!0,Eh(t),t.consumerMarkedDirty?.(t)}function vh(t){t.dirty=!1,t.lastCleanEpoch=_h}function Uc(t){return t&&BE(t),te(t)}function BE(t){t.producersTail=void 0,t.recomputing=!0}function wh(t,e){te(e),t&&HE(t)}function HE(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(qi(t))do n=Th(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function jc(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(jE(n),r!==n.version))return!0}return!1}function Ts(t){if(qi(t)){let e=t.producers;for(;e!==void 0;)e=Th(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function $E(t,e){let n=t.consumersTail,r=qi(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)$E(i.producer,i)}function Th(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!qi(e)){let o=e.producers;for(;o!==void 0;)o=Th(o)}return n}function qi(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function zE(t){dR?.(t)}function hR(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function qE(t,e){return Object.is(t,e)}function pR(){throw new Error}var GE=pR;function WE(t){GE(t)}function Dh(t){GE=t}var gR=null;function bh(t,e){let n=Object.create(Bc);n.value=t,e!==void 0&&(n.equal=e);let r=()=>KE(n);return r[Nt]=n,zE(n),[r,s=>Ds(n,s),s=>QE(n,s)]}function KE(t){return Vc(t),t.value}function Ds(t,e){Ih()||WE(t),t.equal(t.value,e)||(t.value=e,mR(t))}function QE(t,e){Ih()||WE(t),Ds(t,e(t.value))}var Bc=ae(x({},Fc),{equal:qE,value:void 0,kind:"signal"});function mR(t){t.version++,UE(),Eh(t),gR?.(t)}function Ch(t){let e=te(null);try{return t()}finally{te(e)}}function Y(t){return typeof t=="function"}function Gi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hc=Gi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function bs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(o){e=o instanceof Hc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{YE(o)}catch(s){e=e??[],s instanceof Hc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)YE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&bs(n,e)}remove(e){let{_finalizers:n}=this;n&&bs(n,e),e instanceof t&&e._removeParent(this)}};Je.EMPTY=(()=>{let t=new Je;return t.closed=!0,t})();var Sh=Je.EMPTY;function $c(t){return t instanceof Je||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function YE(t){Y(t)?t():t.unsubscribe()}var zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wi={setTimeout(t,e,...n){let{delegate:r}=Wi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Wi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function zc(t){Wi.setTimeout(()=>{let{onUnhandledError:e}=zt;if(e)e(t);else throw t})}function Cs(){}var JE=Ah("C",void 0,void 0);function ZE(t){return Ah("E",void 0,t)}function XE(t){return Ah("N",t,void 0)}function Ah(t,e,n){return{kind:t,value:e,error:n}}var Gr=null;function Ki(t){if(zt.useDeprecatedSynchronousErrorHandling){let e=!Gr;if(e&&(Gr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Gr;if(Gr=null,n)throw r}}else t()}function eI(t){zt.useDeprecatedSynchronousErrorHandling&&Gr&&(Gr.errorThrown=!0,Gr.error=t)}var Wr=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$c(e)&&e.add(this)):this.destination=_R}static create(e,n,r){return new Qi(e,n,r)}next(e){this.isStopped?Nh(XE(e),this):this._next(e)}error(e){this.isStopped?Nh(ZE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nh(JE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},yR=Function.prototype.bind;function Rh(t,e){return yR.call(t,e)}var Mh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qc(r)}else qc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qc(n)}}},Qi=class extends Wr{constructor(e,n,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&zt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rh(e.next,o),error:e.error&&Rh(e.error,o),complete:e.complete&&Rh(e.complete,o)}):i=e}this.destination=new Mh(i)}};function qc(t){zt.useDeprecatedSynchronousErrorHandling?eI(t):zc(t)}function vR(t){throw t}function Nh(t,e){let{onStoppedNotification:n}=zt;n&&Wi.setTimeout(()=>n(t,e))}var _R={closed:!0,next:Cs,error:vR,complete:Cs};var Yi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qt(t){return t}function xh(...t){return Ph(t)}function Ph(t){return t.length===0?qt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=IR(n)?n:new Qi(n,r,i);return Ki(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=tI(r),new r((i,o)=>{let s=new Qi({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Yi](){return this}pipe(...n){return Ph(n)(this)}toPromise(n){return n=tI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function tI(t){var e;return(e=t??zt.Promise)!==null&&e!==void 0?e:Promise}function ER(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function IR(t){return t&&t instanceof Wr||ER(t)&&$c(t)}function wR(t){return Y(t?.lift)}function he(t){return e=>{if(wR(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(t,e,n,r,i){return new Oh(t,e,n,r,i)}var Oh=class extends Wr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var nI=Gi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rt=(()=>{class t extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new nI}next(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Sh:(this.currentObservers=null,o.push(n),new Je(()=>{this.currentObservers=null,bs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new le;return n.source=this,n}}return t.create=(e,n)=>new Gc(e,n),t})(),Gc=class extends rt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Sh}};var ke=class extends rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ze=new le(t=>t.complete());function rI(t){return t&&Y(t.schedule)}function iI(t){return t[t.length-1]}function oI(t){return Y(iI(t))?t.pop():void 0}function ur(t){return rI(iI(t))?t.pop():void 0}function aI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function sI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kr(t){return this instanceof Kr?(this.v=t,this):new Kr(t)}function cI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function c(y,S){r[y]&&(i[y]=function(N){return new Promise(function(M,L){o.push([y,N,M,L])>1||u(y,N)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof Kr?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function uI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sI=="function"?sI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Wc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Kc(t){return Y(t?.then)}function Qc(t){return Y(t[Yi])}function Yc(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function Jc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function TR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Zc=TR();function Xc(t){return Y(t?.[Zc])}function eu(t){return cI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Kr(n.read());if(i)return yield Kr(void 0);yield yield Kr(r)}}finally{n.releaseLock()}})}function tu(t){return Y(t?.getReader)}function Be(t){if(t instanceof le)return t;if(t!=null){if(Qc(t))return DR(t);if(Wc(t))return bR(t);if(Kc(t))return CR(t);if(Yc(t))return lI(t);if(Xc(t))return SR(t);if(tu(t))return AR(t)}throw Jc(t)}function DR(t){return new le(e=>{let n=t[Yi]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function bR(t){return new le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function CR(t){return new le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,zc)})}function SR(t){return new le(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function lI(t){return new le(e=>{RR(t,e).catch(n=>e.error(n))})}function AR(t){return lI(eu(t))}function RR(t,e){var n,r,i,o;return aI(this,void 0,void 0,function*(){try{for(n=uI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function mt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function nu(t,e=0){return he((n,r)=>{n.subscribe(ye(r,i=>mt(r,t,()=>r.next(i),e),()=>mt(r,t,()=>r.complete(),e),i=>mt(r,t,()=>r.error(i),e)))})}function ru(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function dI(t,e){return Be(t).pipe(ru(e),nu(e))}function fI(t,e){return Be(t).pipe(ru(e),nu(e))}function hI(t,e){return new le(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function pI(t,e){return new le(n=>{let r;return mt(n,e,()=>{r=t[Zc](),mt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function iu(t,e){if(!t)throw new Error("Iterable cannot be null");return new le(n=>{mt(n,e,()=>{let r=t[Symbol.asyncIterator]();mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function gI(t,e){return iu(eu(t),e)}function mI(t,e){if(t!=null){if(Qc(t))return dI(t,e);if(Wc(t))return hI(t,e);if(Kc(t))return fI(t,e);if(Yc(t))return iu(t,e);if(Xc(t))return pI(t,e);if(tu(t))return gI(t,e)}throw Jc(t)}function He(t,e){return e?mI(t,e):Be(t)}function ce(...t){let e=ur(t);return He(t,e)}function kh(t,e){let n=Y(t)?t:()=>t,r=i=>i.error(n());return new le(e?i=>e.schedule(r,0,i):r)}function ou(t){return!!t&&(t instanceof le||Y(t.lift)&&Y(t.subscribe))}var Qr=Gi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function be(t,e){return he((n,r)=>{let i=0;n.subscribe(ye(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:NR}=Array;function MR(t,e){return NR(e)?t(...e):t(e)}function yI(t){return be(e=>MR(t,e))}var{isArray:xR}=Array,{getPrototypeOf:PR,prototype:OR,keys:kR}=Object;function vI(t){if(t.length===1){let e=t[0];if(xR(e))return{args:e,keys:null};if(LR(e)){let n=kR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function LR(t){return t&&typeof t=="object"&&PR(t)===OR}function _I(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Lh(...t){let e=ur(t),n=oI(t),{args:r,keys:i}=vI(t);if(r.length===0)return He([],e);let o=new le(FR(r,e,i?s=>_I(i,s):qt));return n?o.pipe(yI(n)):o}function FR(t,e,n=qt){return r=>{EI(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)EI(e,()=>{let l=He(t[u],e),h=!1;l.subscribe(ye(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function EI(t,e,n){t?mt(n,t,e):e()}function II(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?S(N):u.push(N),S=N=>{o&&e.next(N),l++;let M=!1;Be(n(N,h++)).subscribe(ye(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let L=u.shift();s?mt(e,s,()=>S(L)):S(L)}m()}catch(L){e.error(L)}}))};return t.subscribe(ye(e,y,()=>{p=!0,m()})),()=>{c?.()}}function ft(t,e,n=1/0){return Y(e)?ft((r,i)=>be((o,s)=>e(r,o,i,s))(Be(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>II(r,i,t,n)))}function wI(t=1/0){return ft(qt,t)}function TI(){return wI(1)}function Ji(...t){return TI()(He(t,ur(t)))}function Ss(t){return new le(e=>{Be(t()).subscribe(e)})}function Rn(t,e){return he((n,r)=>{let i=0;n.subscribe(ye(r,o=>t.call(e,o,i++)&&r.next(o)))})}function As(t){return he((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ye(n,void 0,void 0,s=>{o=Be(t(s,As(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function su(t,e){return Y(e)?ft(t,e,1):ft(t,1)}function DI(t){return he((e,n)=>{let r=!1;e.subscribe(ye(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Nn(t){return t<=0?()=>Ze:he((e,n)=>{let r=0;e.subscribe(ye(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function bI(t=VR){return he((e,n)=>{let r=!1;e.subscribe(ye(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function VR(){return new Qr}function Fh(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Mn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rn((i,o)=>t(i,o,r)):qt,Nn(1),n?DI(e):bI(()=>new Qr))}function au(t){return t<=0?()=>Ze:he((e,n)=>{let r=[];e.subscribe(ye(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Vh(...t){let e=ur(t);return he((n,r)=>{(e?Ji(t,n,e):Ji(t,n)).subscribe(r)})}function xn(t,e){return he((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(ye(r,u=>{i?.unsubscribe();let l=0,h=o++;Be(t(u,h)).subscribe(i=ye(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function Rs(t){return he((e,n)=>{Be(t).subscribe(ye(n,()=>n.complete(),Cs)),!n.closed&&e.subscribe(n)})}function dn(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(ye(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):qt}var Uh;function cu(){return Uh}function fn(t){let e=Uh;return Uh=t,e}var CI=Symbol("NotFound");function Zi(t){return t===CI||t?.name==="\u0275NotFound"}var pu="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",B=class extends Error{code;constructor(e,n){super(to(e,n)),this.code=e}};function HR(t){return`NG0${Math.abs(t)}`}function to(t,e){return`${HR(t)}${e?": "+e:""}`}function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("")}function lr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(lr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function ep(t,e){return t?e?`${t} ${e}`:t:e||""}var $R=pe({__forward_ref__:pe});function gu(t){return t.__forward_ref__=gu,t.toString=function(){return lr(this())},t}function yt(t){return tp(t)?t():t}function tp(t){return typeof t=="function"&&t.hasOwnProperty($R)&&t.__forward_ref__===gu}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function no(t){return{providers:t.providers||[],imports:t.imports||[]}}function ks(t){return zR(t,mu)}function np(t){return ks(t)!==null}function zR(t,e){return t.hasOwnProperty(e)&&t[e]||null}function qR(t){let e=t?.[mu]??null;return e||null}function Bh(t){return t&&t.hasOwnProperty(lu)?t[lu]:null}var mu=pe({\u0275prov:pe}),lu=pe({\u0275inj:pe}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function rp(t){return t&&!!t.\u0275providers}var ip=pe({\u0275cmp:pe}),op=pe({\u0275dir:pe}),sp=pe({\u0275pipe:pe}),ap=pe({\u0275mod:pe}),Ms=pe({\u0275fac:pe}),Xr=pe({__NG_ELEMENT_ID__:pe}),SI=pe({__NG_ENV_ID__:pe});function cp(t){return yu(t,"@NgModule"),t[ap]||null}function hr(t){return yu(t,"@Component"),t[ip]||null}function up(t){return yu(t,"@Directive"),t[op]||null}function MI(t){return yu(t,"@Pipe"),t[sp]||null}function yu(t,e){if(t==null)throw new B(-919,!1)}function vu(t){return typeof t=="string"?t:t==null?"":String(t)}function xI(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():vu(t)}var PI=pe({ngErrorCode:pe}),GR=pe({ngErrorMessage:pe}),WR=pe({ngTokenPath:pe});function lp(t,e){return OI("",-200,e)}function _u(t,e){throw new B(-201,!1)}function OI(t,e,n){let r=new B(e,t);return r[PI]=e,r[GR]=t,n&&(r[WR]=n),r}function KR(t){return t[PI]}var Hh;function kI(){return Hh}function ht(t){let e=Hh;return Hh=t,e}function dp(t,e,n){let r=ks(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;_u(t,"")}var QR={},Yr=QR,YR="__NG_DI_FLAG__",$h=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Jr(n)||0;try{return this.injector.get(e,r&8?null:Yr,r)}catch(i){if(Zi(i))return i;throw i}}};function JR(t,e=0){let n=cu();if(n===void 0)throw new B(-203,!1);if(n===null)return dp(t,void 0,e);{let r=ZR(e),i=n.retrieve(t,r);if(Zi(i)){if(r.optional)return null;throw i}return i}}function ee(t,e=0){return(kI()||JR)(yt(t),e)}function P(t,e){return ee(t,Jr(e))}function Jr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ZR(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function zh(t){let e=[];for(let n=0;n<t.length;n++){let r=yt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=XR(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(ee(i,o))}else e.push(ee(r))}return e}function XR(t){return t[YR]}function dr(t,e){let n=t.hasOwnProperty(Ms);return n?t[Ms]:null}function Eu(t,e){t.forEach(n=>Array.isArray(n)?Eu(n,e):e(n))}function fp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ls(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var ei={},Gt=[],ti=new q(""),hp=new q("",-1),pp=new q(""),xs=class{get(e,n=Yr){if(n===Yr){let i=OI("",-201);throw i.name="\u0275NotFound",i}return n}};function ro(t){return{\u0275providers:t}}function LI(t){return ro([{provide:ti,multi:!0,useValue:t}])}function FI(...t){return{\u0275providers:gp(!0,t),\u0275fromNgModule:!0}}function gp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Eu(e,s=>{let c=s;du(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&VI(i,o),n}function VI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];mp(i,o=>{e(o,r)})}}function du(t,e,n,r){if(t=yt(t),!t)return!1;let i=null,o=Bh(t),s=!o&&hr(t);if(!o&&!s){let u=t.ngModule;if(o=Bh(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)du(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;Eu(o.imports,h=>{du(h,e,n,r)&&(l||=[],l.push(h))}),l!==void 0&&VI(l,e)}if(!c){let l=dr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Gt},i),e({provide:pp,useValue:i,multi:!0},i),e({provide:ti,useValue:()=>ee(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;mp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function mp(t,e){for(let n of t)rp(n)&&(n=n.\u0275providers),Array.isArray(n)?mp(n,e):e(n)}var eN=pe({provide:String,useValue:pe});function UI(t){return t!==null&&typeof t=="object"&&eN in t}function tN(t){return!!(t&&t.useExisting)}function nN(t){return!!(t&&t.useFactory)}function fu(t){return typeof t=="function"}var Fs=new q(""),uu={},AI={},jh;function Vs(){return jh===void 0&&(jh=new xs),jh}var Le=class{},Zr=class extends Le{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Gh(e,s=>this.processProvider(s)),this.records.set(hp,Xi(void 0,this)),i.has("environment")&&this.records.set(Le,Xi(void 0,this));let o=this.records.get(Fs);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(pp,Gt,{self:!0}))}retrieve(e,n){let r=Jr(n)||0;try{return this.get(e,Yr,r)}catch(i){if(Zi(i))return i;throw i}}destroy(){Ns(this),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return Ns(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ns(this);let n=fn(this),r=ht(void 0),i;try{return e()}finally{fn(n),ht(r)}}get(e,n=Yr,r){if(Ns(this),e.hasOwnProperty(SI))return e[SI](this);let i=Jr(r),o,s=fn(this),c=ht(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=aN(e)&&ks(e);h&&this.injectableDefInScope(h)?l=Xi(qh(e),uu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Vs():this.parent;return n=i&8&&n===Yr?null:n,u.get(e,n)}catch(u){let l=KR(u);throw l===-200||l===-201?new B(l,null):u}finally{ht(c),fn(s)}}resolveInjectorInitializers(){let e=te(null),n=fn(this),r=ht(void 0),i;try{let o=this.get(ti,Gt,{self:!0});for(let s of o)s()}finally{fn(n),ht(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(lr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yt(e);let n=fu(e)?e:yt(e&&e.provide),r=iN(e);if(!fu(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Xi(void 0,uu,!0),i.factory=()=>zh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=te(null);try{if(n.value===AI)throw lp(lr(e));return n.value===uu&&(n.value=AI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&sN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=yt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function qh(t){let e=ks(t),n=e!==null?e.factory:dr(t);if(n!==null)return n;if(t instanceof q)throw new B(204,!1);if(t instanceof Function)return rN(t);throw new B(204,!1)}function rN(t){if(t.length>0)throw new B(204,!1);let n=qR(t);return n!==null?()=>n.factory(t):()=>new t}function iN(t){if(UI(t))return Xi(void 0,t.useValue);{let e=jI(t);return Xi(e,uu)}}function jI(t,e,n){let r;if(fu(t)){let i=yt(t);return dr(i)||qh(i)}else if(UI(t))r=()=>yt(t.useValue);else if(nN(t))r=()=>t.useFactory(...zh(t.deps||[]));else if(tN(t))r=(i,o)=>ee(yt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=yt(t&&(t.useClass||t.provide));if(oN(t))r=()=>new i(...zh(t.deps));else return dr(i)||qh(i)}return r}function Ns(t){if(t.destroyed)throw new B(205,!1)}function Xi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oN(t){return!!t.deps}function sN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function aN(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Gh(t,e){for(let n of t)Array.isArray(n)?Gh(n,e):n&&rp(n)?Gh(n.\u0275providers,e):e(n)}function it(t,e){let n;t instanceof Zr?(Ns(t),n=t):n=new $h(t);let r,i=fn(n),o=ht(void 0);try{return e()}finally{fn(i),ht(o)}}function BI(){return kI()!==void 0||cu()!=null}var Wt=0,W=1,J=2,Xe=3,Mt=4,xt=5,Us=6,io=7,ot=8,pr=9,pn=10,$e=11,oo=12,yp=13,ni=14,Pt=15,ri=16,ii=17,oi=18,gr=19,vp=20,Pn=21,Iu=22,js=23,Dt=24,wu=25,Bs=26,ze=27,HI=1;var mr=7,Hs=8,$s=9,vt=10;function kn(t){return Array.isArray(t)&&typeof t[HI]=="object"}function Kt(t){return Array.isArray(t)&&t[HI]===!0}function _p(t){return(t.flags&4)!==0}function yr(t){return t.componentOffset>-1}function so(t){return(t.flags&1)===1}function si(t){return!!t.template}function ao(t){return(t[J]&512)!==0}function ai(t){return(t[J]&256)===256}var Ep="svg",$I="math";function Ot(t){for(;Array.isArray(t);)t=t[Wt];return t}function zI(t,e){return Ot(e[t])}function gn(t,e){return Ot(e[t.index])}function Tu(t,e){return t.data[e]}function Ip(t,e){return t[e]}function wp(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Qt(t,e){let n=e[t];return kn(n)?n:n[Wt]}function Du(t){return(t[J]&128)===128}function qI(t){return Kt(t[Xe])}function ci(t,e){return e==null?null:t[e]}function Tp(t){t[ii]=0}function Dp(t){t[J]&1024||(t[J]|=1024,Du(t)&&qs(t))}function GI(t,e){for(;t>0;)e=e[ni],t--;return e}function zs(t){return!!(t[J]&9216||t[Dt]?.dirty)}function bu(t){t[pn].changeDetectionScheduler?.notify(8),t[J]&64&&(t[J]|=1024),zs(t)&&qs(t)}function qs(t){t[pn].changeDetectionScheduler?.notify(0);let e=fr(t);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Du(e)));)e=fr(e)}function bp(t,e){if(ai(t))throw new B(911,!1);t[Pn]===null&&(t[Pn]=[]),t[Pn].push(e)}function WI(t,e){if(t[Pn]===null)return;let n=t[Pn].indexOf(e);n!==-1&&t[Pn].splice(n,1)}function fr(t){let e=t[Xe];return Kt(e)?e[Xe]:e}function KI(t){return t[io]??=[]}function QI(t){return t.cleanup??=[]}var re={lFrame:cw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Wh=!1;function YI(){return re.lFrame.elementDepthCount}function JI(){re.lFrame.elementDepthCount++}function Cp(){re.lFrame.elementDepthCount--}function Cu(){return re.bindingsEnabled}function ZI(){return re.skipHydrationRootTNode!==null}function Sp(t){return re.skipHydrationRootTNode===t}function Ap(){re.skipHydrationRootTNode=null}function Ie(){return re.lFrame.lView}function Ln(){return re.lFrame.tView}function Gs(t){return re.lFrame.contextLView=t,t[ot]}function Ws(t){return re.lFrame.contextLView=null,t}function kt(){let t=Rp();for(;t!==null&&t.type===64;)t=t.parent;return t}function Rp(){return re.lFrame.currentTNode}function XI(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function co(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function Np(){return re.lFrame.isParent}function ew(){re.lFrame.isParent=!1}function tw(){return re.lFrame.contextLView}function Mp(){return Wh}function xp(t){let e=Wh;return Wh=t,e}function nw(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function rw(t){return re.lFrame.bindingIndex=t}function Pp(){return re.lFrame.bindingIndex++}function iw(){return re.lFrame.inI18n}function ow(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,Su(e)}function sw(){return re.lFrame.currentDirectiveIndex}function Su(t){re.lFrame.currentDirectiveIndex=t}function Op(t){re.lFrame.currentQueryIndex=t}function cN(t){let e=t[W];return e.type===2?e.declTNode:e.type===1?t[xt]:null}function kp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=cN(o),i===null||(o=o[ni],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=aw();return r.currentTNode=e,r.lView=t,!0}function Au(t){let e=aw(),n=t[W];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function aw(){let t=re.lFrame,e=t===null?null:t.child;return e===null?cw(t):e}function cw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function uw(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Lp=uw;function Ru(){let t=uw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function lw(t){return(re.lFrame.contextLView=GI(t,re.lFrame.contextLView))[ot]}function Nu(){return re.lFrame.selectedIndex}function vr(t){re.lFrame.selectedIndex=t}function dw(){let t=re.lFrame;return Tu(t.tView,t.selectedIndex)}function Mu(){re.lFrame.currentNamespace=Ep}function fw(){return re.lFrame.currentNamespace}var hw=!0;function xu(){return hw}function Ks(t){hw=t}function Kh(t,e=null,n=null,r){let i=Fp(t,e,n,r);return i.resolveInjectorInitializers(),i}function Fp(t,e=null,n=null,r,i=new Set){let o=[n||Gt,FI(t)];return r=r||(typeof t=="object"?void 0:lr(t)),new Zr(o,e||Vs(),r||null,i)}var hn=class t{static THROW_IF_NOT_FOUND=Yr;static NULL=new xs;static create(e,n){if(Array.isArray(e))return Kh({name:""},n,e,"");{let r=e.name??"";return Kh({name:r},e.parent,e.providers,r)}}static \u0275prov=z({token:t,providedIn:"any",factory:()=>ee(hp)});static __NG_ELEMENT_ID__=-1},Fe=new q(""),_r=(()=>{class t{static __NG_ELEMENT_ID__=uN;static __NG_ENV_ID__=n=>n}return t})(),Qh=class extends _r{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ai(this._lView)}onDestroy(e){let n=this._lView;return bp(n,e),()=>WI(n,e)}};function uN(){return new Qh(Ie())}var pw=!1,gw=new q(""),Er=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ke(!1);debugTaskTracker=P(gw,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new le(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})(),Yh=class extends rt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,BI()&&(this.destroyRef=P(_r,{optional:!0})??void 0,this.pendingTasks=P(Er,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},pt=Yh;function hu(...t){}function Vp(t){let e,n;function r(){t=hu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function mw(t){return queueMicrotask(()=>t()),()=>{t=hu}}var Up="isAngularZone",Ps=Up+"_ID",lN=0,Tt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pt(!1);onMicrotaskEmpty=new pt(!1);onStable=new pt(!1);onError=new pt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=pw}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,hN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Up)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,dN,hu,hu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dN={};function jp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Vp(()=>{t.callbackScheduled=!1,Jh(t),t.isCheckStableRunning=!0,jp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Jh(t)}function hN(t){let e=()=>{fN(t)},n=lN++;t._inner=t._inner.fork({name:"angular",properties:{[Up]:!0,[Ps]:n,[Ps+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(pN(u))return r.invokeTask(o,s,c,u);try{return RI(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),NI(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return RI(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!gN(u)&&e(),NI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Jh(t),jp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Jh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function RI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function NI(t){t._nesting--,jp(t)}var Os=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pt;onMicrotaskEmpty=new pt;onStable=new pt;onError=new pt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function pN(t){return yw(t,"__ignore_ng_zone__")}function gN(t){return yw(t,"__scheduler_tick__")}function yw(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var On=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Lt=new q("",{factory:()=>{let t=P(Tt),e=P(Le),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(On),n.handleError(r))})}}}),vw={provide:ti,useValue:()=>{let t=P(On,{optional:!0})},multi:!0},mN=new q("",{factory:()=>{let t=P(Fe).defaultView;if(!t)return;let e=P(Lt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),P(_r).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Bp(){return ro([LI(()=>{P(mN)})])}function Ir(t,e){let[n,r,i]=bh(t,e?.equal),o=n,s=o[Nt];return o.set=r,o.update=i,o.asReadonly=_w.bind(o),o}function _w(){let t=this[Nt];if(t.readonlyFn===void 0){let e=()=>this();e[Nt]=t,t.readonlyFn=e}return t.readonlyFn}var eo=class{},Qs=new q("",{factory:()=>!0});var Hp=new q("");var $p=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:()=>new Zh})}return t})(),Zh=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Xh=class{[Nt];constructor(e){this[Nt]=e}destroy(){this[Nt].destroy()}};function Ft(t){return Ch(t)}function ta(t){return{toString:t}.toString()}function bN(t){return typeof t=="function"}function qw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Lu=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Ku=(()=>{let t=()=>Gw;return t.ngInherit=!0,t})();function Gw(t){return t.type.prototype.ngOnChanges&&(t.setInput=SN),CN}function CN(){let t=Kw(this),e=t?.current;if(e){let n=t.previous;if(n===ei)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function SN(t,e,n,r,i){let o=this.declaredInputs[r],s=Kw(t)||AN(t,{previous:ei,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new Lu(l&&l.currentValue,n,u===ei),qw(t,e,i,n)}var Ww="__ngSimpleChanges__";function Kw(t){return t[Ww]||null}function AN(t,e){return t[Ww]=e}var Ew=[];var ve=function(t,e=null,n){for(let r=0;r<Ew.length;r++){let i=Ew[r];i(t,e,n)}},de=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(de||{});function RN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Gw(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Qw(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Pu(t,e,n){Yw(t,e,3,n)}function Ou(t,e,n,r){(t[J]&3)===n&&Yw(t,e,n,r)}function zp(t,e){let n=t[J];(n&3)===e&&(n&=16383,n+=1,t[J]=n)}function Yw(t,e,n,r){let i=r!==void 0?t[ii]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[ii]+=65536),(c<o||o==-1)&&(NN(t,n,e,u),t[ii]=(t[ii]&4294901760)+u+2),u++}function Iw(t,e){ve(de.LifecycleHookStart,t,e);let n=te(null);try{e.call(t)}finally{te(n),ve(de.LifecycleHookEnd,t,e)}}function NN(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[J]>>14<t[ii]>>16&&(t[J]&3)===e&&(t[J]+=16384,Iw(c,o)):Iw(c,o)}var lo=-1,Zs=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function MN(t){return(t.flags&8)!==0}function xN(t){return(t.flags&16)!==0}function PN(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];kN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function ON(t){return t===3||t===4||t===6}function kN(t){return t.charCodeAt(0)===64}function Qu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ww(t,n,i,null,e[++r]):ww(t,n,i,null,null))}}return t}function ww(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function Jw(t){return t!==lo}function Fu(t){return t&32767}function LN(t){return t>>16}function Vu(t,e){let n=LN(t),r=e;for(;n>0;)r=r[ni],n--;return r}var Qp=!0;function Uu(t){let e=Qp;return Qp=t,e}var FN=256,Zw=FN-1,Xw=5,VN=0,mn={};function UN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xr)&&(r=n[Xr]),r==null&&(r=n[Xr]=VN++);let i=r&Zw,o=1<<i;e.data[t+(i>>Xw)]|=o}function eT(t,e){let n=tT(t,e);if(n!==-1)return n;let r=e[W];r.firstCreatePass&&(t.injectorIndex=e.length,qp(r.data,t),qp(e,null),qp(r.blueprint,null));let i=ag(t,e),o=t.injectorIndex;if(Jw(i)){let s=Fu(i),c=Vu(i,e),u=c[W].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function qp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function tT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ag(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=sT(i),r===null)return lo;if(n++,i=i[ni],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return lo}function jN(t,e,n){UN(t,e,n)}function nT(t,e,n){if(n&8||t!==void 0)return t;_u(e,"NodeInjector")}function rT(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[pr],o=ht(void 0);try{return i?i.get(e,r,n&8):dp(e,r,n&8)}finally{ht(o)}}return nT(r,e,n)}function iT(t,e,n,r=0,i){if(t!==null){if(e[J]&2048&&!(r&2)){let s=qN(t,e,n,r,mn);if(s!==mn)return s}let o=oT(t,e,n,r,mn);if(o!==mn)return o}return rT(e,n,r,i)}function oT(t,e,n,r,i){let o=$N(n);if(typeof o=="function"){if(!kp(e,t,r))return r&1?nT(i,n,r):rT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))_u(n);else return s}finally{Lp()}}else if(typeof o=="number"){let s=null,c=tT(t,e),u=lo,l=r&1?e[Pt][xt]:null;for((c===-1||r&4)&&(u=c===-1?ag(t,e):e[c+8],u===lo||!Dw(r,!1)?c=-1:(s=e[W],c=Fu(u),e=Vu(u,e)));c!==-1;){let h=e[W];if(Tw(o,c,h.data)){let p=BN(c,e,n,s,r,l);if(p!==mn)return p}u=e[c+8],u!==lo&&Dw(r,e[W].data[c+8]===l)&&Tw(o,c,e)?(s=h,c=Fu(u),e=Vu(u,e)):c=-1}}return i}function BN(t,e,n,r,i,o){let s=e[W],c=s.data[t+8],u=r==null?yr(c)&&Qp:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=HN(c,s,n,u,l);return h!==null?Yp(e,s,h,c,i):mn}function HN(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&si(y)&&y.type===n)return u}return null}function Yp(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Zs){let c=o;if(c.resolving){let y=xI(s[n]);throw lp(y)}let u=Uu(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],h,p=c.injectImpl?ht(c.injectImpl):null,m=kp(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&RN(n,s[n],e)}finally{p!==null&&ht(p),Uu(u),c.resolving=!1,Lp()}}return o}function $N(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Xr)?t[Xr]:void 0;return typeof e=="number"?e>=0?e&Zw:zN:e}function Tw(t,e,n){let r=1<<t;return!!(n[e+(t>>Xw)]&r)}function Dw(t,e){return!(t&2)&&!(t&1&&e)}var ui=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return iT(this._tNode,this._lView,e,Jr(r),n)}};function zN(){return new ui(kt(),Ie())}function Yu(t){return ta(()=>{let e=t.prototype.constructor,n=e[Ms]||Jp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ms]||Jp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Jp(t){return tp(t)?()=>{let e=Jp(yt(t));return e&&e()}:dr(t)}function qN(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!ao(s);){let c=oT(o,s,n,r|2,mn);if(c!==mn)return c;let u=o.parent;if(!u){let l=s[vp];if(l){let h=l.get(n,mn,r);if(h!==mn)return h}u=sT(s),s=s[ni]}o=u}return i}function sT(t){let e=t[W],n=e.type;return n===2?e.declTNode:n===1?t[xt]:null}function GN(){return Ju(kt(),Ie())}function Ju(t,e){return new cg(gn(t,e))}var cg=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=GN}return t})();function aT(t){return(t.flags&128)===128}var ug=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(ug||{}),cT=new Map,WN=0;function KN(){return WN++}function QN(t){cT.set(t[gr],t)}function Zp(t){cT.delete(t[gr])}var bw="__ngContext__";function fo(t,e){kn(e)?(t[bw]=e[gr],QN(e)):t[bw]=e}function uT(t){return dT(t[oo])}function lT(t){return dT(t[Mt])}function dT(t){for(;t!==null&&!Kt(t);)t=t[Mt];return t}var YN;function lg(t){YN=t}var Zu=new q("",{factory:()=>JN}),JN="ng";var Xu=new q(""),na=new q("",{providedIn:"platform",factory:()=>"unknown"});var el=new q("",{factory:()=>P(Fe).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fT=!1,hT=new q("",{factory:()=>fT});var ZN=(t,e,n,r)=>{};function XN(t,e,n,r){ZN(t,e,n,r)}function dg(t){return(t.flags&32)===32}var eM=()=>null;function pT(t,e,n=!1){return eM(t,e,n)}function gT(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Op(o),c.contentQueries(2,e[s],s)}}}finally{te(r)}}}function Xp(t,e,n){Op(0);let r=te(null);try{e(t,n)}finally{te(r)}}function fg(t,e,n){if(_p(e)){let r=te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{te(r)}}}var Jt=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Jt||{});var ju=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pu})`}};function mT(t){return t instanceof ju?t.changingThisBreaksApplicationSecurity:t}function yT(t,e){let n=vT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${pu})`)}return n===e}function vT(t){return t instanceof ju&&t.getTypeName()||null}var tM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function _T(t){return t=String(t),t.match(tM)?t:"unsafe:"+t}var nM=/^>|^->|<!--|-->|--!>|<!-$/g,rM=/(<|>)/g,iM="\u200B$1\u200B";function oM(t){return t.replace(nM,e=>e.replace(rM,iM))}function sM(t,e){return t.createText(e)}function aM(t,e,n){t.setValue(e,n)}function cM(t,e){return t.createComment(oM(e))}function ET(t,e,n){return t.createElement(e,n)}function Bu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function IT(t,e,n){t.appendChild(e,n)}function Cw(t,e,n,r,i){r!==null?Bu(t,e,n,r,i):IT(t,e,n)}function uM(t,e,n,r){t.removeChild(null,e,n,r)}function lM(t,e,n){t.setAttribute(e,"style",n)}function dM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function wT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&PN(t,e,r),i!==null&&dM(t,e,i),o!==null&&lM(t,e,o)}var hg=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(hg||{});function pg(t){let e=fM();return e?e.sanitize(hg.URL,t)||"":yT(t,"URL")?mT(t):_T(vu(t))}function fM(){let t=Ie();return t&&t[pn].sanitizer}function TT(t){return t instanceof Function?t():t}function hM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var DT="ng-template";function pM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&hM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(gg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function gg(t){return t.type===4&&t.value!==DT}function gM(t,e,n){let r=t.type===4&&!n?DT:t.value;return e===r}function mM(t,e,n){let r=4,i=t.attrs,o=i!==null?_M(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Yt(r)&&!Yt(u))return!1;if(s&&Yt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!gM(t,u,n)||u===""&&e.length===1){if(Yt(r))return!1;s=!0}}else if(r&8){if(i===null||!pM(t,i,u,n)){if(Yt(r))return!1;s=!0}}else{let l=e[++c],h=yM(u,i,gg(t),n);if(h===-1){if(Yt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Yt(r))return!1;s=!0}}}}return Yt(r)||s}function Yt(t){return(t&1)===0}function yM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return EM(e,t)}function vM(t,e,n=!1){for(let r=0;r<e.length;r++)if(mM(t,e[r],n))return!0;return!1}function _M(t){for(let e=0;e<t.length;e++){let n=t[e];if(ON(n))return e}return t.length}function EM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Sw(t,e){return t?":not("+e.trim()+")":e}function IM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Yt(s)&&(e+=Sw(o,i),i=""),r=s,o=o||!Yt(r);n++}return i!==""&&(e+=Sw(o,i)),e}function wM(t){return t.map(IM).join(",")}function TM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Yt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var fi={};function mg(t,e,n,r,i,o,s,c,u,l,h){let p=ze+r,m=p+i,y=DM(p,m),S=typeof l=="function"?l():l;return y[W]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function DM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:fi);return n}function bM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=mg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function yg(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[Wt]=i,p[J]=r|4|128|8|64|1024,(l!==null||t&&t[J]&2048)&&(p[J]|=2048),Tp(p),p[Xe]=p[ni]=t,p[ot]=n,p[pn]=s||t&&t[pn],p[$e]=c||t&&t[$e],p[pr]=u||t&&t[pr]||null,p[xt]=o,p[gr]=KN(),p[Us]=h,p[vp]=l,p[Pt]=e.type==2?t[Pt]:p,p}function CM(t,e,n){let r=gn(e,t),i=bM(n),o=t[pn].rendererFactory,s=vg(t,yg(t,i,null,bT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function bT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function CT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function vg(t,e){return t[oo]?t[yp][Mt]=e:t[oo]=e,t[yp]=e,e}function ra(t=1){ST(Ln(),Ie(),Nu()+t,!1)}function ST(t,e,n,r){if(!r)if((e[J]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Pu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ou(e,o,0,n)}vr(n)}var tl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(tl||{});function eg(t,e,n,r){let i=te(null);try{let[o,s,c]=t.inputs[n],u=null;(s&tl.SignalBased)!==0&&(u=e[o][Nt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):qw(e,u,o,r)}finally{te(i)}}var Tr=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Tr||{}),SM;function _g(t,e){return SM(t,e)}var ho=new Set,Eg=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Eg||{}),ia=new q(""),Aw=new Set;function Ig(t){Aw.has(t)||(Aw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var AT=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})();var AM=new q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:P(Le)})});function RT(t,e,n){let r=t.get(AM);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function RM(t,e){for(let[n,r]of e)RT(t,r.animateFns)}function Rw(t,e,n,r){let i=t?.[Bs]?.enter;e!==null&&i&&i.has(n.index)&&RM(r,i)}function uo(t,e,n,r,i,o,s,c){if(i!=null){let u,l=!1;Kt(i)?u=i:kn(i)&&(l=!0,i=i[Wt]);let h=Ot(i);t===0&&r!==null?(Rw(c,r,o,n),s==null?IT(e,r,h):Bu(e,r,h,s||null,!0)):t===1&&r!==null?(Rw(c,r,o,n),Bu(e,r,h,s||null,!0)):t===2?Nw(c,o,n,p=>{uM(e,h,l,p)}):t===3&&Nw(c,o,n,()=>{e.destroyNode(h)}),u!=null&&HM(e,t,n,u,o,r,s)}}function NM(t,e){NT(t,e),e[Wt]=null,e[xt]=null}function MM(t,e,n,r,i,o){r[Wt]=i,r[xt]=e,nl(t,r,n,1,i,o)}function NT(t,e){e[pn].changeDetectionScheduler?.notify(9),nl(t,e,e[$e],2,null,null)}function xM(t){let e=t[oo];if(!e)return Gp(t[W],t);for(;e;){let n=null;if(kn(e))n=e[oo];else{let r=e[vt];r&&(n=r)}if(!n){for(;e&&!e[Mt]&&e!==t;)kn(e)&&Gp(e[W],e),e=e[Xe];e===null&&(e=t),kn(e)&&Gp(e[W],e),n=e&&e[Mt]}e=n}}function wg(t,e){let n=t[$s],r=n.indexOf(e);n.splice(r,1)}function MT(t,e){if(ai(e))return;let n=e[$e];n.destroyNode&&nl(t,e,n,3,null,null),xM(e)}function Gp(t,e){if(ai(e))return;let n=te(null);try{e[J]&=-129,e[J]|=256,e[Dt]&&Ts(e[Dt]),kM(t,e),OM(t,e),e[W].type===1&&e[$e].destroy();let r=e[ri];if(r!==null&&Kt(e[Xe])){r!==e[Xe]&&wg(r,e);let i=e[oi];i!==null&&i.detachView(t)}Zp(e)}finally{te(n)}}function Nw(t,e,n,r){let i=t?.[Bs];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&ho.add(t[gr]),RT(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),PM(t,r)}else t&&ho.delete(t[gr]),r(!1)},i)}function PM(t,e){let n=t[Bs]?.running;if(n){n.then(()=>{t[Bs].running=void 0,ho.delete(t[gr]),e(!0)});return}e(!1)}function OM(t,e){let n=t.cleanup,r=e[io];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[io]=null);let i=e[Pn];if(i!==null){e[Pn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[js];if(o!==null){e[js]=null;for(let s of o)s.destroy()}}function kM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Zs)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];ve(de.LifecycleHookStart,c,u);try{u.call(c)}finally{ve(de.LifecycleHookEnd,c,u)}}else{ve(de.LifecycleHookStart,i,o);try{o.call(i)}finally{ve(de.LifecycleHookEnd,i,o)}}}}}function LM(t,e,n){return FM(t,e.parent,n)}function FM(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Wt];if(yr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Jt.None||i===Jt.Emulated)return null}return gn(r,n)}function VM(t,e,n){return jM(t,e,n)}function UM(t,e,n){return t.type&40?gn(t,n):null}var jM=UM,Mw;function Tg(t,e,n,r){let i=LM(t,r,e),o=e[$e],s=r.parent||e[xt],c=VM(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Cw(o,i,n[u],c,!1);else Cw(o,i,n,c,!1);Mw!==void 0&&Mw(o,r,e,n,i)}function Ys(t,e){if(e!==null){let n=e.type;if(n&3)return gn(e,t);if(n&4)return tg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ys(t,r);{let i=t[e.index];return Kt(i)?tg(-1,i):Ot(i)}}else{if(n&128)return Ys(t,e.next);if(n&32)return _g(e,t)()||Ot(t[e.index]);{let r=xT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fr(t[Pt]);return Ys(i,r)}else return Ys(t,e.next)}}}return null}function xT(t,e){if(e!==null){let r=t[Pt][xt],i=e.projection;return r.projection[i]}return null}function tg(t,e){let n=vt+t+1;if(n<e.length){let r=e[n],i=r[W].firstChild;if(i!==null)return Ys(r,i)}return e[mr]}function Dg(t,e,n,r,i,o,s){for(;n!=null;){let c=r[pr];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&fo(Ot(u),r),n.flags|=2),!dg(n))if(l&8)Dg(t,e,n.child,r,i,o,!1),uo(e,t,c,i,u,n,o,r);else if(l&32){let h=_g(n,r),p;for(;p=h();)uo(e,t,c,i,p,n,o,r);uo(e,t,c,i,u,n,o,r)}else l&16?BM(t,e,r,n,i,o):uo(e,t,c,i,u,n,o,r);n=s?n.projectionNext:n.next}}function nl(t,e,n,r,i,o){Dg(n,r,t.firstChild,e,i,o,!1)}function BM(t,e,n,r,i,o){let s=n[Pt],u=s[xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];uo(e,t,n[pr],i,h,r,o,n)}else{let l=u,h=s[Xe];aT(r)&&(l.flags|=128),Dg(t,e,l,h,i,o,!0)}}function HM(t,e,n,r,i,o,s){let c=r[mr],u=Ot(r);c!==u&&uo(e,t,n,o,c,i,s);for(let l=vt;l<r.length;l++){let h=r[l];nl(h[W],h,t,e,o,c)}}function PT(t,e,n,r,i){let o=Nu(),s=r&2;try{vr(-1),s&&e.length>ze&&ST(t,e,ze,!1);let c=s?de.TemplateUpdateStart:de.TemplateCreateStart;ve(c,i,n),n(r,i)}finally{vr(o);let c=s?de.TemplateUpdateEnd:de.TemplateCreateEnd;ve(c,i,n)}}function rl(t,e,n){YM(t,e,n),(n.flags&64)===64&&JM(t,e,n)}function il(t,e,n=gn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function $M(t,e,n,r){let o=r.get(hT,fT)||n===Jt.ShadowDom||n===Jt.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return zM(s),s}function zM(t){qM(t)}var qM=()=>null;function GM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function WM(t,e,n,r,i,o){let s=e[W];if(Ag(t,s,e,n,r)){yr(t)&&QM(e,t.index);return}t.type&3&&(n=GM(n)),KM(t,e,n,r,i,o)}function KM(t,e,n,r,i,o){if(t.type&3){let s=gn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function QM(t,e){let n=Qt(e,t);n[J]&16||(n[J]|=64)}function YM(t,e,n){let r=n.directiveStart,i=n.directiveEnd;yr(n)&&CM(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||eT(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=Yp(e,t,s,n);if(fo(u,e),o!==null&&XM(e,s-r,u,c,n,o),si(c)){let l=Qt(n.index,e);l[ot]=Yp(e,t,s,n)}}}function JM(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=sw();try{vr(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Su(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&ZM(u,l)}}finally{vr(-1),Su(s)}}function ZM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function bg(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];vM(e,o.selectors,!1)&&(r??=[],si(o)?r.unshift(o):r.push(o))}return r}function XM(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];eg(r,n,u,l)}}function Cg(t,e,n,r,i){let o=ze+n,s=e[W],c=i(s,e,t,r,n);e[o]=c,co(t,!0);let u=t.type===2;return u?(wT(e[$e],c,t),(YI()===0||so(t))&&fo(c,e),JI()):fo(c,e),xu()&&(!u||!dg(t))&&Tg(s,e,c,t),t}function Sg(t){let e=t;return Np()?ew():(e=e.parent,co(e,!1)),e}function ex(t,e){let n=t[pr];if(!n)return;let r;try{r=n.get(Lt,null)}catch{r=null}r?.(e)}function Ag(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];eg(p,n[l],h,i),c=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];eg(h,l,r,i),c=!0}return c}function tx(t,e){let n=Qt(e,t),r=n[W];nx(r,n);let i=n[Wt];i!==null&&n[Us]===null&&(n[Us]=pT(i,n[pr])),ve(de.ComponentStart);try{Rg(r,n,n[ot])}finally{ve(de.ComponentEnd,n[ot])}}function nx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Rg(t,e,n){Au(e);try{let r=t.viewQuery;r!==null&&Xp(1,r,n);let i=t.template;i!==null&&PT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[oi]?.finishViewCreation(t),t.staticContentQueries&&gT(t,e),t.staticViewQueries&&Xp(2,t.viewQuery,n);let o=t.components;o!==null&&rx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[J]&=-5,Ru()}}function rx(t,e){for(let n=0;n<e.length;n++)tx(t,e[n])}function ix(t,e,n,r){let i=te(null);try{let o=e.tView,c=t[J]&4096?4096:16,u=yg(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ri]=l;let h=t[oi];return h!==null&&(u[oi]=h.createEmbeddedView(o)),Rg(o,u,n),u}finally{te(i)}}function xw(t,e){return!e||e.firstChild===null||aT(t)}function Xs(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Ot(o)),Kt(o)&&OT(o,r);let s=n.type;if(s&8)Xs(t,e,n.child,r);else if(s&32){let c=_g(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=xT(e,n);if(Array.isArray(c))r.push(...c);else{let u=fr(e[Pt]);Xs(u[W],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function OT(t,e){for(let n=vt;n<t.length;n++){let r=t[n],i=r[W].firstChild;i!==null&&Xs(r[W],r,i,e)}t[mr]!==t[Wt]&&e.push(t[mr])}function kT(t){if(t[wu]!==null){for(let e of t[wu])e.impl.addSequence(e);t[wu].length=0}}var LT=[];function ox(t){return t[Dt]??sx(t)}function sx(t){let e=LT.pop()??Object.create(cx);return e.lView=t,e}function ax(t){t.lView[Dt]!==t&&(t.lView=null,LT.push(t))}var cx=ae(x({},Fc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{qs(t.lView)},consumerOnSignalRead(){this.lView[Dt]=this}});function ux(t){let e=t[Dt]??Object.create(lx);return e.lView=t,e}var lx=ae(x({},Fc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=fr(t.lView);for(;e&&!FT(e[W]);)e=fr(e);e&&Dp(e)},consumerOnSignalRead(){this.lView[Dt]=this}});function FT(t){return t.type!==2}function VT(t){if(t[js]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[js])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[J]&8192)}}var dx=100;function UT(t,e=0){let r=t[pn].rendererFactory,i=!1;i||r.begin?.();try{fx(t,e)}finally{i||r.end?.()}}function fx(t,e){let n=Mp();try{xp(!0),ng(t,e);let r=0;for(;zs(t);){if(r===dx)throw new B(103,!1);r++,ng(t,1)}}finally{xp(n)}}function hx(t,e,n,r){if(ai(e))return;let i=e[J],o=!1,s=!1;Au(e);let c=!0,u=null,l=null;o||(FT(t)?(l=ox(e),u=Uc(l)):Lc()===null?(c=!1,l=ux(e),u=Uc(l)):e[Dt]&&(Ts(e[Dt]),e[Dt]=null));try{Tp(e),rw(t.bindingStartIndex),n!==null&&PT(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Pu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Ou(e,y,0,null),zp(e,0)}if(s||px(e),VT(e),jT(e,0),t.contentQueries!==null&&gT(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Pu(e,y)}else{let y=t.contentHooks;y!==null&&Ou(e,y,1),zp(e,1)}mx(t,e);let p=t.components;p!==null&&HT(e,p,0);let m=t.viewQuery;if(m!==null&&Xp(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Pu(e,y)}else{let y=t.viewHooks;y!==null&&Ou(e,y,2),zp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Iu]){for(let y of e[Iu])y();e[Iu]=null}o||(kT(e),e[J]&=-73)}catch(h){throw o||qs(e),h}finally{l!==null&&(wh(l,u),c&&ax(l)),Ru()}}function jT(t,e){for(let n=uT(t);n!==null;n=lT(n))for(let r=vt;r<n.length;r++){let i=n[r];BT(i,e)}}function px(t){for(let e=uT(t);e!==null;e=lT(e)){if(!(e[J]&2))continue;let n=e[$s];for(let r=0;r<n.length;r++){let i=n[r];Dp(i)}}}function gx(t,e,n){ve(de.ComponentStart);let r=Qt(e,t);try{BT(r,n)}finally{ve(de.ComponentEnd,r[ot])}}function BT(t,e){Du(t)&&ng(t,e)}function ng(t,e){let r=t[W],i=t[J],o=t[Dt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&jc(o)),s||=!1,o&&(o.dirty=!1),t[J]&=-9217,s)hx(r,t,r.template,t[ot]);else if(i&8192){let c=te(null);try{VT(t),jT(t,1);let u=r.components;u!==null&&HT(t,u,1),kT(t)}finally{te(c)}}}function HT(t,e,n){for(let r=0;r<e.length;r++)gx(t,e[r],n)}function mx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)vr(~i);else{let o=i,s=n[++r],c=n[++r];ow(s,o);let u=e[o];ve(de.HostBindingsUpdateStart,u);try{c(2,u)}finally{ve(de.HostBindingsUpdateEnd,u)}}}}finally{vr(-1)}}function Ng(t,e){let n=Mp()?64:1088;for(t[pn].changeDetectionScheduler?.notify(e);t;){t[J]|=n;let r=fr(t);if(ao(t)&&!r)return t;t=r}return null}function $T(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function yx(t,e,n,r=!0){let i=e[W];if(vx(i,e,t,n),r){let s=tg(n,t),c=e[$e],u=c.parentNode(t[mr]);u!==null&&MM(i,t[xt],c,e,u,s)}let o=e[Us];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function rg(t,e){if(t.length<=vt)return;let n=vt+e,r=t[n];if(r){let i=r[ri];i!==null&&i!==t&&wg(i,r),e>0&&(t[n-1][Mt]=r[Mt]);let o=Ls(t,vt+e);NM(r[W],r);let s=o[oi];s!==null&&s.detachView(o[W]),r[Xe]=null,r[Mt]=null,r[J]&=-129}return r}function vx(t,e,n,r){let i=vt+r,o=n.length;r>0&&(n[i-1][Mt]=e),r<o-vt?(e[Mt]=n[i],fp(n,vt+r,e)):(n.push(e),e[Mt]=null),e[Xe]=n;let s=e[ri];s!==null&&n!==s&&zT(s,e);let c=e[oi];c!==null&&c.insertView(t),bu(e),e[J]|=128}function zT(t,e){let n=t[$s],r=e[Xe];if(kn(r))t[J]|=2;else{let i=r[Xe][Pt];e[Pt]!==i&&(t[J]|=2)}n===null?t[$s]=[e]:n.push(e)}var wr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[W];return Xs(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ot]}set context(e){this._lView[ot]=e}get destroyed(){return ai(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(Kt(e)){let n=e[Hs],r=n?n.indexOf(this):-1;r>-1&&(rg(e,r),Ls(n,r))}this._attachedToViewContainer=!1}MT(this._lView[W],this._lView)}onDestroy(e){bp(this._lView,e)}markForCheck(){Ng(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){bu(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,UT(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ao(this._lView),n=this._lView[ri];n!==null&&!e&&wg(n,this._lView),NT(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let n=ao(this._lView),r=this._lView[ri];r!==null&&!n&&zT(r,this._lView),bu(this._lView)}};var ol=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=_x;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=ix(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new wr(o)}}return t})();function _x(){return qT(kt(),Ie())}function qT(t,e){return t.type&4?new ol(e,t,Ju(t,e)):null}function sl(t,e,n,r,i){let o=t.data[e];if(o===null)o=Ex(t,e,n,r,i),iw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=XI();o.injectorIndex=s===null?-1:s.injectorIndex}return co(o,!0),o}function Ex(t,e,n,r,i){let o=Rp(),s=Np(),c=s?o:o&&o.parent,u=t.data[e]=wx(t,c,n,e,r,i);return Ix(t,u,o,s),u}function Ix(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function wx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return ZI()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Tx=()=>null;function Pw(t,e){return Tx(t,e)}var GT=class{},al=class{},ig=class{resolveComponentFactory(e){throw new B(917,!1)}},oa=class{static NULL=new ig},li=class{};var WT=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:()=>null})}return t})();var ku={},og=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,ku,r);return i!==ku||n===ku?i:this.parentInjector.get(e,n,r)}};function Hu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=ep(i,c);else if(o==2){let u=c,l=e[++s];r=ep(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function yn(t,e=0){let n=Ie();if(n===null)return ee(t,e);let r=kt();return iT(r,n,yt(t),e)}function KT(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}Cx(t,e,n,c,o,u,l)}o!==null&&r!==null&&Dx(n,r,o)}function Dx(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new B(-301,!1);r.push(e[i],o)}}function bx(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Cx(t,e,n,r,i,o,s){let c=r.length,u=null;for(let m=0;m<c;m++){let y=r[m];u===null&&si(y)&&(u=y,bx(t,n,m)),jN(eT(n,e),t,y.type)}xx(n,t.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=CT(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=Qu(n.mergedAttrs,y.hostAttrs),Ax(t,n,e,p,y),Mx(p,y,i),s!==null&&s.has(y)){let[N,M]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,M+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}Sx(t,n,o)}function Sx(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))Ow(0,e,i,r),Ow(1,e,i,r),Lw(e,r,!1);else{let o=n.get(i);kw(0,e,o,r),kw(1,e,o,r),Lw(e,r,!0)}}}function Ow(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),QT(e,o)}}function kw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),QT(e,s)}}function QT(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Lw(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||gg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Ax(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=dr(i.type,!0)),s=new Zs(o,si(i),yn,null);t.blueprint[r]=s,n[r]=s,Rx(t,e,r,CT(t,n,i.hostVars,fi),i)}function Rx(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;Nx(s)!=c&&s.push(c),s.push(n,r,o)}}function Nx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Mx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;si(e)&&(n[""]=t)}}function xx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Mg(t,e,n,r,i,o,s,c){let u=e[W],l=u.consts,h=ci(l,s),p=sl(u,t,n,r,h);return o&&KT(u,e,p,ci(l,c),i),p.mergedAttrs=Qu(p.mergedAttrs,p.attrs),p.attrs!==null&&Hu(p,p.attrs,!1),p.mergedAttrs!==null&&Hu(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function xg(t,e){Qw(t,e),_p(e)&&t.queries.elementEnd(e)}function Px(t,e,n,r,i,o){let s=e.consts,c=ci(s,i),u=sl(e,t,n,r,c);if(u.mergedAttrs=Qu(u.mergedAttrs,u.attrs),o!=null){let l=ci(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Hu(u,u.attrs,!1),u.mergedAttrs!==null&&Hu(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Ox(t,e,n){return t[e]=n}function Pg(t,e,n){if(n===fi)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Wp(t,e,n){return function r(i){let o=yr(t)?Qt(t.index,e):e;Ng(o,5);let s=e[ot],c=Fw(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=Fw(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function Fw(t,e,n,r){let i=te(null);try{return ve(de.OutputStart,e,n),n(r)!==!1}catch(o){return ex(t,o),!1}finally{ve(de.OutputEnd,e,n),te(i)}}function kx(t,e,n,r,i,o,s,c){let u=so(t),l=!1,h=null;if(!r&&u&&(h=Fx(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=gn(t,n),m=r?r(p):p;XN(n,m,o,c);let y=i.listen(m,o,c);if(!Lx(o)){let S=r?N=>r(Ot(N[t.index])):t.index;YT(S,e,n,o,c,y,!1)}}return l}function Lx(t){return t.startsWith("animation")||t.startsWith("transition")}function Fx(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[io],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function YT(t,e,n,r,i,o,s){let c=e.firstCreatePass?QI(e):null,u=KI(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function Vw(t,e,n,r,i,o){let s=e[n],c=e[W],l=c.data[n].outputs[r],p=s[l].subscribe(o);YT(t.index,c,e,i,o,p,!0)}var sg=Symbol("BINDING");var $u=class extends oa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=hr(e);return new po(n,this.ngModule)}};function Vx(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&tl.SignalBased)!==0};return i&&(o.transform=i),o})}function Ux(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function jx(t,e,n){let r=e instanceof Le?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new og(n,r):n}function Bx(t){let e=t.get(li,null);if(e===null)throw new B(407,!1);let n=t.get(WT,null),r=t.get(eo,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Hx(t,e){let n=JT(t);return ET(e,n,n==="svg"?Ep:n==="math"?$I:null)}function JT(t){return(t.selectors[0][0]||"div").toLowerCase()}var po=class extends al{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Vx(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Ux(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=wM(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ve(de.DynamicComponentStart);let c=te(null);try{let u=this.componentDef,l=$x(r,u,s,o),h=jx(u,i||this.ngModule,e),p=Bx(h),m=p.rendererFactory.createRenderer(null,u),y=r?$M(m,r,u.encapsulation,h):Hx(u,m),S=s?.some(Uw)||o?.some(L=>typeof L!="function"&&L.bindings.some(Uw)),N=yg(null,l,null,512|bT(u),null,null,p,m,h,null,pT(y,h,!0));N[ze]=y,Au(N);let M=null;try{let L=Mg(ze,N,2,"#host",()=>l.directiveRegistry,!0,0);wT(m,y,L),fo(y,N),rl(l,N,L),fg(l,L,N),xg(l,L),n!==void 0&&qx(L,this.ngContentSelectors,n),M=Qt(L.index,N),N[ot]=M[ot],Rg(l,N,null)}catch(L){throw M!==null&&Zp(M),Zp(N),L}finally{ve(de.DynamicComponentEnd),Ru()}return new zu(this.componentType,N,!!S)}finally{te(c)}}};function $x(t,e,n,r){let i=t?["ng-version","21.1.1"]:TM(e.selectors[0]),o=null,s=null,c=0;if(n)for(let h of n)c+=h[sg].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[sg].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=up(p);u.push(m)}return mg(0,null,zx(o,s),1,c,u,null,null,null,[i],null)}function zx(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function Uw(t){let e=t[sg].kind;return e==="input"||e==="twoWay"}var zu=class extends GT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Tu(n[W],ze),this.location=Ju(this._tNode,n),this.instance=Qt(this._tNode.index,n)[ot],this.hostView=this.changeDetectorRef=new wr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Ag(r,i[W],i,e,n);this.previousInputValues.set(e,n);let s=Qt(r.index,i);Ng(s,1)}get injector(){return new ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function qx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var go=(()=>{class t{static __NG_ELEMENT_ID__=Gx}return t})();function Gx(){let t=kt();return Kx(t,Ie())}var Wx=go,ZT=class extends Wx{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ju(this._hostTNode,this._hostLView)}get injector(){return new ui(this._hostTNode,this._hostLView)}get parentInjector(){let e=ag(this._hostTNode,this._hostLView);if(Jw(e)){let n=Vu(e,this._hostLView),r=Fu(e),i=n[W].data[r+8];return new ui(i,n)}else return new ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=jw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-vt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Pw(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,xw(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!bN(e),l;if(u)l=n;else{let M=n||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,c=M.bindings}let h=u?e:new po(hr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let L=(u?p:this.parentInjector).get(Le,null);L&&(o=L)}let m=hr(h.componentType??{}),y=Pw(this._lContainer,m?.id??null),S=y?.firstChild??null,N=h.create(p,i,S,o,s,c);return this.insertImpl(N.hostView,l,xw(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(qI(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Xe],l=new ZT(u,u[xt],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return yx(s,i,o,r),e.attachToViewContainerRef(),fp(Kp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=jw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=rg(this._lContainer,n);r&&(Ls(Kp(this._lContainer),n),MT(r[W],r))}detach(e){let n=this._adjustIndex(e,-1),r=rg(this._lContainer,n);return r&&Ls(Kp(this._lContainer),n)!=null?new wr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function jw(t){return t[Hs]}function Kp(t){return t[Hs]||(t[Hs]=[])}function Kx(t,e){let n,r=e[t.index];return Kt(r)?n=r:(n=$T(r,e,null,t),e[t.index]=n,vg(e,n)),Yx(n,e,t,r),new ZT(n,t,e)}function Qx(t,e){let n=t[$e],r=n.createComment(""),i=gn(e,t),o=n.parentNode(i);return Bu(n,o,r,n.nextSibling(i),!1),r}var Yx=Xx,Jx=()=>!1;function Zx(t,e,n){return Jx(t,e,n)}function Xx(t,e,n,r){if(t[mr])return;let i;n.type&8?i=Ot(r):i=Qx(e,n),t[mr]=i}var di=class{},cl=class{};var qu=class extends di{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new $u(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=cp(e);this._bootstrapComponents=TT(o.bootstrap),this._r3Injector=Fp(e,n,[{provide:di,useValue:this},{provide:oa,useValue:this.componentFactoryResolver},...r],lr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Gu=class extends cl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new qu(this.moduleType,e,[])}};var ea=class extends di{injector;componentFactoryResolver=new $u(this);instance=null;constructor(e){super();let n=new Zr([...e.providers,{provide:di,useValue:this},{provide:oa,useValue:this.componentFactoryResolver}],e.parent||Vs(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function sa(t,e,n=null){return new ea({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var eP=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=gp(!1,n.type),i=r.length>0?sa([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=z({token:t,providedIn:"environment",factory:()=>new t(ee(Le))})}return t})();function Se(t){return ta(()=>{let e=XT(t),n=ae(x({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ug.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(eP).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jt.Emulated,styles:t.styles||Gt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Ig("NgStandalone"),eD(n);let r=t.dependencies;return n.directiveDefs=Bw(r,tP),n.pipeDefs=Bw(r,MI),n.id=iP(n),n})}function tP(t){return hr(t)||up(t)}function aa(t){return ta(()=>({type:t.type,bootstrap:t.bootstrap||Gt,declarations:t.declarations||Gt,imports:t.imports||Gt,exports:t.exports||Gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nP(t,e){if(t==null)return ei;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=tl.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function rP(t){if(t==null)return ei;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function ca(t){return ta(()=>{let e=XT(t);return eD(e),e})}function Og(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function XT(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ei,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:nP(t.inputs,e),outputs:rP(t.outputs),debugInfo:null}}function eD(t){t.features?.forEach(e=>e(t))}function Bw(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function iP(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function oP(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=Qu(t.mergedAttrs,t.attrs);let h=t.tView=mg(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),co(t,!1);let u=aP(n,e,t,r);xu()&&Tg(n,e,u,t),fo(u,e);let l=$T(u,e,u,t);e[r+ze]=l,vg(e,l),Zx(l,t,e)}function sP(t,e,n,r,i,o,s,c,u,l,h){let p=n+ze,m;return e.firstCreatePass?(m=sl(e,p,4,s||null,c||null),Cu()&&KT(e,t,m,ci(e.consts,l),bg),Qw(e,m)):m=e.data[p],oP(m,t,e,n,r,i,o,u),so(m)&&rl(e,t,m),l!=null&&il(t,m,h),m}function ua(t,e,n,r,i,o,s,c){let u=Ie(),l=Ln(),h=ci(l.consts,o);return sP(u,l,t,e,n,r,i,h,void 0,s,c),ua}var aP=cP;function cP(t,e,n,r){return Ks(!0),e[$e].createComment("")}var kg=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Lg=new q("");function hi(t){return!!t&&typeof t.then=="function"}function ul(t){return!!t&&typeof t.subscribe=="function"}var tD=new q("");var Fg=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=P(tD,{optional:!0})??[];injector=P(hn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=it(this.injector,i);if(hi(o))n.push(o);else if(ul(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ll=new q("");function nD(){Dh(()=>{let t="";throw new B(600,t)})}function rD(t){return t.isBoundToModule}var uP=10;var mo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(Lt);afterRenderManager=P(AT);zonelessEnabled=P(Qs);rootEffectScheduler=P($p);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new rt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(Er);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(be(n=>!n))}constructor(){P(ia,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=P(Le);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=hn.NULL){return this._injector.get(Tt).run(()=>{ve(de.BootstrapComponentStart);let s=n instanceof al;if(!this._injector.get(Fg).done){let S="";throw new B(405,S)}let u;s?u=n:u=this._injector.get(oa).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=rD(u)?void 0:this._injector.get(di),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Lg,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Js(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),ve(de.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ve(de.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Eg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ve(de.ChangeDetectionEnd),new B(101,!1);let n=te(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,te(n),this.afterTick.next(),ve(de.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(li,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<uP;){ve(de.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ve(de.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!zs(i))continue;let o=r&&!this.zonelessEnabled?0:1;UT(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>zs(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Js(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(ll,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Js(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new B(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Js(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var h3=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function pi(t,e,n){let r=Ie(),i=Pp();if(Pg(r,i,e)){let o=Ln(),s=dw();WM(s,r,t,e,r[$e],n)}return pi}function Hw(t,e,n,r,i){Ag(e,t,n,i?"class":"style",r)}function Ne(t,e,n,r){let i=Ie(),o=i[W],s=t+ze,c=o.firstCreatePass?Mg(s,i,2,e,bg,Cu(),n,r):o.data[s];if(Cg(c,i,t,e,iD),so(c)){let u=i[W];rl(u,i,c),fg(u,c,i)}return r!=null&&il(i,c),Ne}function st(){let t=Ln(),e=kt(),n=Sg(e);return t.firstCreatePass&&xg(t,n),Sp(n)&&Ap(),Cp(),n.classesWithoutHost!=null&&MN(n)&&Hw(t,n,Ie(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&xN(n)&&Hw(t,n,Ie(),n.stylesWithoutHost,!1),st}function Vt(t,e,n,r){return Ne(t,e,n,r),st(),Vt}function V(t,e,n,r){let i=Ie(),o=i[W],s=t+ze,c=o.firstCreatePass?Px(s,o,2,e,n,r):o.data[s];return Cg(c,i,t,e,iD),r!=null&&il(i,c),V}function j(){let t=kt(),e=Sg(t);return Sp(e)&&Ap(),Cp(),j}function at(t,e,n,r){return V(t,e,n,r),j(),at}var iD=(t,e,n,r,i)=>(Ks(!0),ET(e[$e],r,fw()));function dl(t,e,n){let r=Ie(),i=r[W],o=t+ze,s=i.firstCreatePass?Mg(o,r,8,"ng-container",bg,Cu(),e,n):i.data[o];if(Cg(s,r,t,"ng-container",lP),so(s)){let c=r[W];rl(c,r,s),fg(c,s,r)}return n!=null&&il(r,s),dl}function fl(){let t=Ln(),e=kt(),n=Sg(e);return t.firstCreatePass&&xg(t,n),fl}var lP=(t,e,n,r,i)=>(Ks(!0),cM(e[$e],""));function hl(){return Ie()}var la="en-US";var dP=la;function oD(t){typeof t=="string"&&(dP=t.toLowerCase().replace(/_/g,"-"))}function da(t,e,n){let r=Ie(),i=Ln(),o=kt();return fP(i,r,r[$e],o,t,e,n),da}function fP(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Wp(r,e,o),kx(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Wp(r,e,o),Vw(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Wp(r,e,o),Vw(r,e,p,i,i,u)}}function pl(t=1){return lw(t)}function Vg(t){let e=tw();return Ip(e,ze+t)}function U(t,e=""){let n=Ie(),r=Ln(),i=t+ze,o=r.firstCreatePass?sl(r,i,1,e,null):r.data[i],s=hP(r,n,o,e,t);n[i]=s,xu()&&Tg(r,n,s,o),co(o,!1)}var hP=(t,e,n,r,i)=>(Ks(!0),sM(e[$e],r));function pP(t,e,n,r=""){return Pg(t,Pp(),n)?e+vu(n)+r:fi}function gl(t){return Ug("",t),gl}function Ug(t,e,n){let r=Ie(),i=pP(r,t,e,n);return i!==fi&&gP(r,Nu(),i),Ug}function gP(t,e,n){let r=zI(e,t);aM(t[$e],r,n)}function mP(t,e){let n=t[e];return n===fi?void 0:n}function yP(t,e,n,r,i,o){let s=e+n;return Pg(t,s,i)?Ox(t,s+1,o?r.call(o,i):r(i)):mP(t,s+1)}function jg(t,e){let n=Ln(),r,i=t+ze;n.firstCreatePass?(r=vP(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=dr(r.type,!0)),s,c=ht(yn);try{let u=Uu(!1),l=o();return Uu(u),wp(n,Ie(),i,l),l}finally{ht(c)}}function vP(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Bg(t,e,n){let r=t+ze,i=Ie(),o=Ip(i,r);return _P(i,r)?yP(i,nw(),e,o.transform,n,o):o.transform(n)}function _P(t,e){return t[W].data[e].pure}function Hg(t,e){return qT(t,e)}var Wu=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},$g=(()=>{class t{compileModuleSync(n){return new Gu(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=cp(n),o=TT(i.declarations).reduce((s,c)=>{let u=hr(c);return u&&s.push(new po(u)),s},[]);return new Wu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var sD=(()=>{class t{applicationErrorHandler=P(Lt);appRef=P(mo);taskService=P(Er);ngZone=P(Tt);zonelessEnabled=P(Qs);tracing=P(ia,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ps):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Hp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?mw:Vp;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ps+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aD(){return[{provide:eo,useExisting:sD},{provide:Tt,useClass:Os},{provide:Qs,useValue:!0}]}function EP(){return typeof $localize<"u"&&$localize.locale||la}var ml=new q("",{factory:()=>P(ml,{optional:!0,skipSelf:!0})||EP()});var lD=Symbol("InputSignalNode#UNSET"),VP=ae(x({},Bc),{transformFn:void 0,applyValueToInputSignal(t,e){Ds(t,e)}});function dD(t,e){let n=Object.create(VP);n.value=t,n.transformFn=e?.transform;function r(){if(Vc(n),n.value===lD){let i=null;throw new B(-950,i)}return n.value}return r[Nt]=n,r}function cD(t,e){return dD(t,e)}function UP(t){return dD(lD,t)}var fD=(cD.required=UP,cD);var zg=new q(""),jP=new q("");function fa(t){return!t.moduleRef}function BP(t){let e=fa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Tt);return n.run(()=>{fa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Lt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),fa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(zg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(zg);s.add(o),t.moduleRef.onDestroy(()=>{Js(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return $P(r,n,()=>{let o=e.get(Er),s=o.add(),c=e.get(Fg);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(ml,la);if(oD(u||la),!e.get(jP,!0))return fa(t)?e.get(mo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(fa(t)){let h=e.get(mo);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return HP?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>{o.remove(s)})})})}var HP;function $P(t,e,n){try{let r=n();return hi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var yl=null;function zP(t=[],e){return hn.create({name:e,providers:[{provide:Fs,useValue:"platform"},{provide:zg,useValue:new Set([()=>yl=null])},...t]})}function qP(t=[]){if(yl)return yl;let e=zP(t);return yl=e,nD(),GP(e),e}function GP(t){let e=t.get(Xu,null);it(t,()=>{e?.forEach(n=>n())})}var WP=1e4;var G5=WP-1e3;var vl=(()=>{class t{static __NG_ELEMENT_ID__=KP}return t})();function KP(t){return QP(kt(),Ie(),(t&16)===16)}function QP(t,e,n){if(yr(t)&&!n){let r=Qt(t.index,e);return new wr(r,r)}else if(t.type&175){let r=e[Pt];return new wr(r,e)}return null}function hD(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;ve(de.BootstrapApplicationStart);try{let o=i?.injector??qP(r),s=[aD(),vw,...n||[]],c=new ea({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return BP({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ve(de.BootstrapApplicationEnd)}}var pD=null;function Vn(){return pD}function qg(t){pD??=t}var ha=class{},_l=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>P(gD),providedIn:"platform"})}return t})();var gD=(()=>{class t extends _l{_location;_history;_doc=P(Fe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vn().getBaseHref(this._doc)}onPopState(n){let r=Vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function vD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function mD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Dr(t){return t&&t[0]!=="?"?`?${t}`:t}var El=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>P(JP),providedIn:"root"})}return t})(),YP=new q(""),JP=(()=>{class t extends El{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(Fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return vD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Dr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Dr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Dr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ee(_l),ee(YP,8))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yo=(()=>{class t{_subject=new rt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=eO(mD(yD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Dr(r))}normalize(n){return t.stripTrailingSlash(XP(this._basePath,yD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Dr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Dr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Dr;static joinWithSlash=vD;static stripTrailingSlash=mD;static \u0275fac=function(r){return new(r||t)(ee(El))};static \u0275prov=z({token:t,factory:()=>ZP(),providedIn:"root"})}return t})();function ZP(){return new yo(ee(El))}function XP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function yD(t){return t.replace(/\/index.html$/,"")}function eO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Kg=(()=>{class t{_viewContainer;_context=new Il;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){_D(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){_D(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(yn(go),yn(ol))};static \u0275dir=ca({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Il=class{$implicit=null;ngIf=null};function _D(t,e){if(t&&!t.createEmbeddedView)throw new B(2020,!1)}function tO(t,e){return new B(2100,!1)}var Gg=class{createSubscription(e,n,r){return Ft(()=>e.subscribe({next:n,error:r}))}dispose(e){Ft(()=>e.unsubscribe())}},Wg=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},nO=new Wg,rO=new Gg,Qg=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(Lt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(hi(n))return nO;if(ul(n))return rO;throw tO(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(yn(vl,16))};static \u0275pipe=Og({name:"async",type:t,pure:!1})}return t})();var wl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=aa({type:t});static \u0275inj=no({})}return t})();function Yg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var pa=class{};var ED="browser";var ga=class{_doc;constructor(e){this._doc=e}manager},Tl=(()=>{class t extends ga{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ee(Fe))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),Cl=new q(""),em=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Tl));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Tl);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ee(Cl),ee(Tt))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),Jg="ng-app-id";function ID(t){for(let e of t)e.remove()}function wD(t,e){let n=e.createElement("style");return n.textContent=t,n}function sO(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Jg}="${e}"],link[${Jg}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Jg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Xg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var tm=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,sO(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,wD);r?.forEach(i=>this.addUsage(i,this.external,Xg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(ID(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])ID(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,wD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Xg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ee(Fe),ee(Zu),ee(el,8),ee(na))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),Zg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},nm=/%COMP%/g;var DD="%COMP%",aO=`_nghost-${DD}`,cO=`_ngcontent-${DD}`,uO=!0,lO=new q("",{factory:()=>uO});function dO(t){return cO.replace(nm,t)}function fO(t){return aO.replace(nm,t)}function bD(t,e){return e.map(n=>n.replace(nm,t))}var rm=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,c,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.defaultRenderer=new ma(n,s,c,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof bl?i.applyToHost(n):i instanceof ya&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case Jt.Emulated:o=new bl(u,l,r,this.appId,h,s,c,p);break;case Jt.ShadowDom:return new Dl(u,n,r,s,c,this.nonce,p,l);case Jt.ExperimentalIsolatedShadowDom:return new Dl(u,n,r,s,c,this.nonce,p);default:o=new ya(u,l,r,h,s,c,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ee(em),ee(tm),ee(Zu),ee(lO),ee(Fe),ee(Tt),ee(el),ee(ia,8))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),ma=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Zg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(TD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(TD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Zg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Zg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Tr.DashCase|Tr.Important)?e.style.setProperty(n,r,i&Tr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Tr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Vn().getGlobalEventTarget(this.doc,e),!e))throw new B(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function TD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Dl=class extends ma{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,c,u){super(e,i,o,c),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=bD(r.id,l);for(let p of l){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=p,this.shadowRoot.appendChild(m)}let h=r.getExternalStyles?.();if(h)for(let p of h){let m=Xg(p,i);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ya=class extends ma{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?bD(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ho.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},bl=class extends ya{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u){let l=i+"-"+r.id;super(e,n,r,o,s,c,u,l),this.contentAttr=dO(l),this.hostAttr=fO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Sl=class t extends ha{supportsDOMEvents=!0;static makeCurrent(){qg(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=hO();return n==null?null:pO(n)}resetBaseElement(){va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yg(document.cookie,e)}},va=null;function hO(){return va=va||document.head.querySelector("base"),va?va.getAttribute("href"):null}function pO(t){return new URL(t,document.baseURI).pathname}var gO=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),CD=["alt","control","meta","shift"],mO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},SD=(()=>{class t extends ga{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vn().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),CD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=mO[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),CD.forEach(s=>{if(s!==i){let c=yO[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ee(Fe))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})();async function im(t,e,n){let r=x({rootComponent:t},vO(e,n));return hD(r)}function vO(t,e){return{platformRef:e?.platformRef,appProviders:[...TO,...t?.providers??[]],platformProviders:wO}}function _O(){Sl.makeCurrent()}function EO(){return new On}function IO(){return lg(document),document}var wO=[{provide:na,useValue:ED},{provide:Xu,useValue:_O,multi:!0},{provide:Fe,useFactory:IO}];var TO=[{provide:Fs,useValue:"root"},{provide:On,useFactory:EO},{provide:Cl,useClass:Tl,multi:!0},{provide:Cl,useClass:SD,multi:!0},rm,tm,em,{provide:li,useExisting:rm},{provide:pa,useClass:gO},[]];var AD=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ee(Fe))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var K="primary",Na=Symbol("RouteTitle"),um=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yi(t){return new um(t)}function om(t,e,n){for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(i[0]===":")n[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function VD(t,e,n){let r=n.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let u={},l=t.slice(0,r.length);return om(r,l,u)?{consumed:l,posParams:u}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>t.length||n.pathMatch==="full"&&e.hasChildren()&&n.path!=="**")return null;let c={};return!om(o,t.slice(0,o.length),c)||!om(s,t.slice(t.length-s.length),c)?null:{consumed:t,posParams:c}}function Pl(t){return new Promise((e,n)=>{t.pipe(Mn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function bO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!vn(t[n],e[n]))return!1;return!0}function vn(t,e){let n=t?lm(t):void 0,r=e?lm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!UD(t[i],e[i]))return!1;return!0}function lm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function UD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function CO(t){return t.length>0?t[t.length-1]:null}function Ei(t){return ou(t)?t:hi(t)?He(Promise.resolve(t)):ce(t)}function jD(t){return ou(t)?Pl(t):Promise.resolve(t)}var SO={exact:HD,subset:$D},BD={exact:AO,subset:RO,ignored:()=>!0};function RD(t,e,n){return SO[n.paths](t.root,e.root,n.matrixParams)&&BD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function AO(t,e){return vn(t,e)}function HD(t,e,n){if(!gi(t.segments,e.segments)||!Nl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!HD(t.children[r],e.children[r],n))return!1;return!0}function RO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>UD(t[n],e[n]))}function $D(t,e,n){return zD(t,e,e.segments,n)}function zD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!gi(i,n)||e.hasChildren()||!Nl(i,n,r))}else if(t.segments.length===n.length){if(!gi(t.segments,n)||!Nl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!$D(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!gi(t.segments,i)||!Nl(t.segments,i,r)||!t.children[K]?!1:zD(t.children[K],e,o,r)}}function Nl(t,e,n){return e.every((r,i)=>BD[n](t[i].parameters,r.parameters))}var Xt=class{root;queryParams;fragment;_queryParamMap;constructor(e=new fe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){return xO.serialize(this)}},fe=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ml(this)}},br=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=yi(this.parameters),this._parameterMap}toString(){return GD(this)}};function NO(t,e){return gi(t,e)&&t.every((n,r)=>vn(n.parameters,e[r].parameters))}function gi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function MO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===K&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==K&&(n=n.concat(e(i,r)))}),n}var Ma=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>new Cr,providedIn:"root"})}return t})(),Cr=class{parse(e){let n=new fm(e);return new Xt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${_a(e.root,!0)}`,r=kO(e.queryParams),i=typeof e.fragment=="string"?`#${PO(e.fragment)}`:"";return`${n}${r}${i}`}},xO=new Cr;function Ml(t){return t.segments.map(e=>GD(e)).join("/")}function _a(t,e){if(!t.hasChildren())return Ml(t);if(e){let n=t.children[K]?_a(t.children[K],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==K&&r.push(`${i}:${_a(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=MO(t,(r,i)=>i===K?[_a(t.children[K],!1)]:[`${i}:${_a(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[K]!=null?`${Ml(t)}/${n[0]}`:`${Ml(t)}/(${n.join("//")})`}}function qD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Al(t){return qD(t).replace(/%3B/gi,";")}function PO(t){return encodeURI(t)}function dm(t){return qD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xl(t){return decodeURIComponent(t)}function ND(t){return xl(t.replace(/\+/g,"%20"))}function GD(t){return`${dm(t.path)}${OO(t.parameters)}`}function OO(t){return Object.entries(t).map(([e,n])=>`;${dm(e)}=${dm(n)}`).join("")}function kO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Al(n)}=${Al(i)}`).join("&"):`${Al(n)}=${Al(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var LO=/^[^\/()?;#]+/;function sm(t){let e=t.match(LO);return e?e[0]:""}var FO=/^[^\/()?;=#]+/;function VO(t){let e=t.match(FO);return e?e[0]:""}var UO=/^[^=?&#]+/;function jO(t){let e=t.match(UO);return e?e[0]:""}var BO=/^[^&#]+/;function HO(t){let e=t.match(BO);return e?e[0]:""}var fm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[K]=new fe(e,n)),r}parseSegment(){let e=sm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new br(xl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=VO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=sm(this.remaining);i&&(r=i,this.capture(r))}e[xl(n)]=xl(r)}parseQueryParam(e){let n=jO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=HO(this.remaining);s&&(r=s,this.capture(r))}let i=ND(n),o=ND(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=K);let s=this.parseChildren();n[o??K]=Object.keys(s).length===1&&s[K]?s[K]:new fe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function WD(t){return t.segments.length>0?new fe([],{[K]:t}):t}function KD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=KD(i);if(r===K&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new fe(t.segments,e);return $O(n)}function $O(t){if(t.numberOfChildren===1&&t.children[K]){let e=t.children[K];return new fe(t.segments.concat(e.segments),e.children)}return t}function Io(t){return t instanceof Xt}function QD(t,e,n=null,r=null,i=new Cr){let o=YD(t);return JD(o,e,n,r,i)}function YD(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new fe(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=WD(r);return e??i}function JD(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return am(o,o,o,n,r,i);let s=zO(e);if(s.toRoot())return am(o,o,new fe([],{}),n,r,i);let c=qO(s,o,t),u=c.processChildren?Ia(c.segmentGroup,c.index,s.commands):XD(c.segmentGroup,c.index,s.commands);return am(o,c.segmentGroup,u,n,r,i)}function Ol(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Da(t){return typeof t=="object"&&t!=null&&t.outlets}function MD(t,e,n){t||="\u0275";let r=new Xt;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function am(t,e,n,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>MD(l,p,o)):MD(l,h,o);let c;t===e?c=n:c=ZD(t,e,n);let u=WD(KD(c));return new Xt(u,s,i)}function ZD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=ZD(o,e,n)}),new fe(t.segments,r)}var kl=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ol(r[0]))throw new B(4003,!1);let i=r.find(Da);if(i&&i!==CO(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function zO(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new kl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new kl(n,e,r)}var _o=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function qO(t,e,n){if(t.isAbsolute)return new _o(e,!0,0);if(!n)return new _o(e,!1,NaN);if(n.parent===null)return new _o(n,!0,0);let r=Ol(t.commands[0])?0:1,i=n.segments.length-1+r;return GO(n,i,t.numberOfDoubleDots)}function GO(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new _o(r,!1,i-o)}function WO(t){return Da(t[0])?t[0].outlets:{[K]:t}}function XD(t,e,n){if(t??=new fe([],{}),t.segments.length===0&&t.hasChildren())return Ia(t,e,n);let r=KO(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new fe(t.segments.slice(0,r.pathIndex),{});return o.children[K]=new fe(t.segments.slice(r.pathIndex),t.children),Ia(o,0,i)}else return r.match&&i.length===0?new fe(t.segments,{}):r.match&&!t.hasChildren()?hm(t,e,n):r.match?Ia(t,0,i):hm(t,e,n)}function Ia(t,e,n){if(n.length===0)return new fe(t.segments,{});{let r=WO(n),i={};if(Object.keys(r).some(o=>o!==K)&&t.children[K]&&t.numberOfChildren===1&&t.children[K].segments.length===0){let o=Ia(t.children[K],e,n);return new fe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=XD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new fe(t.segments,i)}}function KO(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(Da(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!PD(u,l,s))return o;r+=2}else{if(!PD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function hm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Da(o)){let u=QO(o.outlets);return new fe(r,u)}if(i===0&&Ol(n[0])){let u=t.segments[e];r.push(new br(u.path,xD(n[0]))),i++;continue}let s=Da(o)?o.outlets[K]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&Ol(c)?(r.push(new br(s,xD(c))),i+=2):(r.push(new br(s,{})),i++)}return new fe(r,{})}function QO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=hm(new fe([],{}),0,r))}),e}function xD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function PD(t,e,n){return t==n.path&&vn(e,n.parameters)}var wa="imperative",Ge=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ge||{}),Ct=class{id;url;constructor(e,n){this.id=e,this.url=n}},vi=class extends Ct{type=Ge.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},jn=class extends Ct{urlAfterRedirects;type=Ge.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ct=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(ct||{}),ba=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(ba||{}),Ut=class extends Ct{reason;code;type=Ge.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function eb(t){return t instanceof Ut&&(t.code===ct.Redirect||t.code===ct.SupersededByNewNavigation)}var Bn=class extends Ct{reason;code;type=Ge.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},_i=class extends Ct{error;target;type=Ge.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wo=class extends Ct{urlAfterRedirects;state;type=Ge.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ll=class extends Ct{urlAfterRedirects;state;type=Ge.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fl=class extends Ct{urlAfterRedirects;state;shouldActivate;type=Ge.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vl=class extends Ct{urlAfterRedirects;state;type=Ge.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ul=class extends Ct{urlAfterRedirects;state;type=Ge.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jl=class{route;type=Ge.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bl=class{route;type=Ge.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hl=class{snapshot;type=Ge.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$l=class{snapshot;type=Ge.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zl=class{snapshot;type=Ge.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ql=class{snapshot;type=Ge.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var To=class{},Do=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function YO(t){return!(t instanceof To)&&!(t instanceof Do)}var Gl=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new So(this.rootInjector)}},So=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Gl(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ee(Le))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Wl=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=pm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=pm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=gm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gm(e,this._root).map(n=>n.value)}};function pm(t,e){if(t===e.value)return e;for(let n of e.children){let r=pm(t,n);if(r)return r}return null}function gm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=gm(t,n);if(r.length)return r.unshift(e),r}return[]}var bt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function vo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ca=class extends Wl{snapshot;constructor(e,n){super(e),this.snapshot=n,Tm(this,e)}toString(){return this.snapshot.toString()}};function tb(t,e){let n=JO(t,e),r=new ke([new br("",{})]),i=new ke({}),o=new ke({}),s=new ke({}),c=new ke(""),u=new Sr(r,i,s,c,o,K,t,n.root);return u.snapshot=n.root,new Ca(new bt(u,[]),n)}function JO(t,e){let n={},r={},i={},s=new mi([],n,i,"",r,K,t,null,{},e);return new Sa("",new bt(s,[]))}var Sr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(be(l=>l[Na]))??ce(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(be(e=>yi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(be(e=>yi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),t.params),data:x(x({},e.data),t.data),resolve:x(x(x(x({},t.data),e.data),i?.data),t._resolvedData)}:r={params:x({},t.params),data:x({},t.data),resolve:x(x({},t.data),t._resolvedData??{})},i&&rb(i)&&(r.resolve[Na]=i.title),r}var mi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Na]}constructor(e,n,r,i,o,s,c,u,l,h){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l,this._environmentInjector=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Sa=class extends Wl{url;constructor(e,n){super(n),this.url=e,Tm(this,n)}toString(){return nb(this._root)}};function Tm(t,e){e.value._routerState=t,e.children.forEach(n=>Tm(t,n))}function nb(t){let e=t.children.length>0?` { ${t.children.map(nb).join(", ")} } `:"";return`${t.value}${e}`}function cm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,vn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),vn(e.params,n.params)||t.paramsSubject.next(n.params),bO(e.url,n.url)||t.urlSubject.next(n.url),vn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function mm(t,e){let n=vn(t.params,e.params)&&NO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||mm(t.parent,e.parent))}function rb(t){return typeof t.title=="string"||t.title===null}var ib=new q(""),xa=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=K;activateEvents=new pt;deactivateEvents=new pt;attachEvents=new pt;detachEvents=new pt;routerOutletData=fD();parentContexts=P(So);location=P(go);changeDetector=P(vl);inputBinder=P(Zl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new ym(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ca({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ku]})}return t})(),ym=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Sr?this.route:e===So?this.childContexts:e===ib?this.outletData:this.parent.get(e,n)}},Zl=new q("");var Dm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Se({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Vt(0,"router-outlet")},dependencies:[xa],encapsulation:2})}return t})();function bm(t){let e=t.children&&t.children.map(bm),n=e?ae(x({},t),{children:e}):x({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==K&&(n.component=Dm),n}function ZO(t,e,n){let r=Aa(t,e._root,n?n._root:void 0);return new Ca(r,e)}function Aa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=XO(t,e,n);return new bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Aa(t,c)),s}}let r=ek(e.value),i=e.children.map(o=>Aa(t,o));return new bt(r,i)}}function XO(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Aa(t,r,i);return Aa(t,r)})}function ek(t){return new Sr(new ke(t.url),new ke(t.params),new ke(t.queryParams),new ke(t.fragment),new ke(t.data),t.outlet,t.component,t)}var bo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},ob="ngNavigationCancelingError";function Ql(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Io(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=sb(!1,ct.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function sb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[ob]=!0,n.cancellationCode=e,n}function tk(t){return ab(t)&&Io(t.url)}function ab(t){return!!t&&t[ob]}var vm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),cm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=vo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=vo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ql(o.value.snapshot))}),e.children.length&&this.forwardEvent(new $l(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(cm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),cm(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Yl=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Eo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function nk(t,e,n){let r=t._root,i=e?e._root:null;return Ea(r,i,n,[r.value])}function rk(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ao(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!np(t)?t:e.get(t):r}function Ea(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=vo(e);return t.children.forEach(s=>{ik(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Ta(c,n.getContext(s),i)),i}function ik(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=ok(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Yl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ea(t,e,c?c.children:null,r,i):Ea(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Eo(c.outlet.component,s))}else s&&Ta(e,c,i),i.canActivateChecks.push(new Yl(r)),o.component?Ea(t,null,c?c.children:null,r,i):Ea(t,null,n,r,i);return i}function ok(t,e,n){if(typeof n=="function")return it(e._environmentInjector,()=>n(t,e));switch(n){case"pathParamsChange":return!gi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!gi(t.url,e.url)||!vn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mm(t,e)||!vn(t.queryParams,e.queryParams);default:return!mm(t,e)}}function Ta(t,e,n){let r=vo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ta(s,e.children.getContext(o),n):Ta(s,null,n):Ta(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Eo(e.outlet.component,i)):n.canDeactivateChecks.push(new Eo(null,i)):n.canDeactivateChecks.push(new Eo(null,i))}function Pa(t){return typeof t=="function"}function sk(t){return typeof t=="boolean"}function ak(t){return t&&Pa(t.canLoad)}function ck(t){return t&&Pa(t.canActivate)}function uk(t){return t&&Pa(t.canActivateChild)}function lk(t){return t&&Pa(t.canDeactivate)}function dk(t){return t&&Pa(t.canMatch)}function cb(t){return t instanceof Qr||t?.name==="EmptyError"}var Rl=Symbol("INITIAL_VALUE");function Co(){return xn(t=>Lh(t.map(e=>e.pipe(Nn(1),Vh(Rl)))).pipe(be(e=>{for(let n of e)if(n!==!0){if(n===Rl)return Rl;if(n===!1||fk(n))return n}return!0}),Rn(e=>e!==Rl),Nn(1)))}function fk(t){return Io(t)||t instanceof bo}function ub(t){return t.aborted?ce(void 0).pipe(Nn(1)):new le(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function lb(t){return Rs(ub(t))}function hk(t){return ft(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?ce(ae(x({},e),{guardsResult:!0})):pk(o,n,r).pipe(ft(s=>s&&sk(s)?gk(n,i,t):ce(s)),be(s=>ae(x({},e),{guardsResult:s})))})}function pk(t,e,n){return He(t).pipe(ft(r=>Ek(r.component,r.route,n,e)),Mn(r=>r!==!0,!0))}function gk(t,e,n){return He(e).pipe(su(r=>Ji(yk(r.route.parent,n),mk(r.route,n),_k(t,r.path),vk(t,r.route))),Mn(r=>r!==!0,!0))}function mk(t,e){return t!==null&&e&&e(new zl(t)),ce(!0)}function yk(t,e){return t!==null&&e&&e(new Hl(t)),ce(!0)}function vk(t,e){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return ce(!0);let r=n.map(i=>Ss(()=>{let o=e._environmentInjector,s=Ao(i,o),c=ck(s)?s.canActivate(e,t):it(o,()=>s(e,t));return Ei(c).pipe(Mn())}));return ce(r).pipe(Co())}function _k(t,e){let n=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>rk(o)).filter(o=>o!==null).map(o=>Ss(()=>{let s=o.guards.map(c=>{let u=o.node._environmentInjector,l=Ao(c,u),h=uk(l)?l.canActivateChild(n,t):it(u,()=>l(n,t));return Ei(h).pipe(Mn())});return ce(s).pipe(Co())}));return ce(i).pipe(Co())}function Ek(t,e,n,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return ce(!0);let o=i.map(s=>{let c=e._environmentInjector,u=Ao(s,c),l=lk(u)?u.canDeactivate(t,e,n,r):it(c,()=>u(t,e,n,r));return Ei(l).pipe(Mn())});return ce(o).pipe(Co())}function Ik(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return ce(!0);let s=o.map(c=>{let u=Ao(c,t),l=ak(u)?u.canLoad(e,n):it(t,()=>u(e,n)),h=Ei(l);return i?h.pipe(lb(i)):h});return ce(s).pipe(Co(),db(r))}function db(t){return xh(dn(e=>{if(typeof e!="boolean")throw Ql(t,e)}),be(e=>e===!0))}function wk(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return ce(!0);let s=o.map(c=>{let u=Ao(c,t),l=dk(u)?u.canMatch(e,n):it(t,()=>u(e,n));return Ei(l).pipe(lb(i))});return ce(s).pipe(Co(),db(r))}var Un=class t extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,t.prototype)}},Ra=class t extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,t.prototype)}};function Tk(t){throw new B(4e3,!1)}function Dk(t){throw sb(!1,ct.GuardRejected)}var _m=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[K])throw Tk(`${e.redirectTo}`);i=i.children[K]}}async applyRedirectCommands(e,n,r,i,o){let s=await bk(n,i,o);if(s instanceof Xt)throw new Ra(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Ra(c);return c}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Xt(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new fe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function bk(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p,paramMap:m,queryParamMap:y}=e;return Pl(Ei(it(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p,paramMap:m,queryParamMap:y}))))}function Ck(t,e){return t.providers&&!t._injector&&(t._injector=sa(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Zt(t){return t.outlet||K}function Sk(t,e){let n=t.filter(r=>Zt(r)===e);return n.push(...t.filter(r=>Zt(r)!==e)),n}var Em={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ak(t,e,n,r,i,o){let s=fb(t,e,n);return s.matched?(r=Ck(e,r),wk(r,e,n,i,o).pipe(be(c=>c===!0?s:x({},Em)))):ce(s)}function fb(t,e,n){if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?x({},Em):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||VD)(n,t,e);if(!i)return x({},Em);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function OD(t,e,n,r){return n.length>0&&Mk(t,n,r)?{segmentGroup:new fe(e,Nk(r,new fe(n,t.children))),slicedSegments:[]}:n.length===0&&xk(t,n,r)?{segmentGroup:new fe(t.segments,Rk(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new fe(t.segments,t.children),slicedSegments:n}}function Rk(t,e,n,r){let i={};for(let o of n)if(Xl(t,e,o)&&!r[Zt(o)]){let s=new fe([],{});i[Zt(o)]=s}return x(x({},r),i)}function Nk(t,e){let n={};n[K]=e;for(let r of t)if(r.path===""&&Zt(r)!==K){let i=new fe([],{});n[Zt(r)]=i}return n}function Mk(t,e,n){return n.some(r=>Xl(t,e,r)&&Zt(r)!==K)}function xk(t,e,n){return n.some(r=>Xl(t,e,r))}function Xl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Pk(t,e,n){return e.length===0&&!t.children[n]}var Im=class{};async function Ok(t,e,n,r,i,o,s="emptyOnly",c){return new wm(t,e,n,r,i,s,o,c).recognize()}var kk=31,wm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.abortSignal=u,this.applyRedirects=new _m(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}async recognize(){let e=OD(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new bt(r,n),o=new Sa("",i),s=QD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new mi([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),K,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,K,n),rootSnapshot:n}}catch(r){if(r instanceof Ra)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Un?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof bt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=Sk(n,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let c=hb(s);return Lk(c),c}async processSegment(e,n,r,i,o,s,c){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c)}catch(l){if(l instanceof Un||cb(l))continue;throw l}if(Pk(r,i,o))return new Im;throw new Un(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,c,u){if(Zt(r)!==s&&(s===K||!Xl(i,o,r)))throw new Un(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&c)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new Un(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=fb(n,i,o);if(!u)throw new Un(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kk&&(this.allowRedirects=!1));let y=new mi(o,l,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,kD(i),Zt(i),i.component??i._loadedComponent??null,i,LD(i),e),S=Kl(y,c,this.paramsInheritanceStrategy);if(y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let N=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),M=await this.applyRedirects.lineralizeSegments(i,N);return this.processSegment(e,r,n,M.concat(m),s,!1,c)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let c=await Pl(Ak(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!c?.matched)throw new Un(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=c,y=new mi(p,h,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,kD(r),Zt(r),r.component??r._loadedComponent??null,r,LD(r),e),S=Kl(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let{segmentGroup:N,slicedSegments:M}=OD(n,p,m,u);if(M.length===0&&N.hasChildren()){let me=await this.processChildren(l,u,N,y);return new bt(y,me)}if(u.length===0&&M.length===0)return new bt(y,[]);let L=Zt(r)===o,ne=await this.processSegment(l,u,N,M,L?K:o,!0,y);return new bt(y,ne instanceof bt?[ne]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0){let o=n._loadedNgModuleFactory;return o&&!n._loadedInjector&&(n._loadedInjector=o.create(e).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Pl(Ik(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,n._loadedNgModuleFactory=o.factory,o}throw Dk(n)}return{routes:[],injector:e}}};function Lk(t){t.sort((e,n)=>e.value.outlet===K?-1:n.value.outlet===K?1:e.value.outlet.localeCompare(n.value.outlet))}function Fk(t){let e=t.value.routeConfig;return e&&e.path===""}function hb(t){let e=[],n=new Set;for(let r of t){if(!Fk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=hb(r.children);e.push(new bt(r.value,i))}return e.filter(r=>!n.has(r))}function kD(t){return t.data||{}}function LD(t){return t.resolve||{}}function Vk(t,e,n,r,i,o,s){return ft(async c=>{let{state:u,tree:l}=await Ok(t,e,n,r,c.extractedUrl,i,o,s);return ae(x({},c),{targetSnapshot:u,urlAfterRedirects:l})})}function Uk(t){return ft(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return ce(e);let i=new Set(r.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let u of pb(c))o.add(u);let s=0;return He(o).pipe(su(c=>i.has(c)?jk(c,n,t):(c.data=Kl(c,c.parent,t).resolve,ce(void 0))),dn(()=>s++),au(1),ft(c=>s===o.size?ce(e):Ze))})}function pb(t){let e=t.children.map(n=>pb(n)).flat();return[t,...e]}function jk(t,e,n){let r=t.routeConfig,i=t._resolve;return r?.title!==void 0&&!rb(r)&&(i[Na]=r.title),Ss(()=>(t.data=Kl(t,t.parent,n).resolve,Bk(i,t,e).pipe(be(o=>(t._resolvedData=o,t.data=x(x({},t.data),o),null)))))}function Bk(t,e,n){let r=lm(t);if(r.length===0)return ce({});let i={};return He(r).pipe(ft(o=>Hk(t[o],e,n).pipe(Mn(),dn(s=>{if(s instanceof bo)throw Ql(new Cr,s);i[o]=s}))),au(1),be(()=>i),As(o=>cb(o)?Ze:kh(o)))}function Hk(t,e,n){let r=e._environmentInjector,i=Ao(t,r),o=i.resolve?i.resolve(e,n):it(r,()=>i(e,n));return Ei(o)}function FD(t){return xn(e=>{let n=t(e);return n?He(n).pipe(be(()=>e)):ce(e)})}var Cm=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===K);return r}getResolvedTitleForRoute(n){return n.data[Na]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>P(gb),providedIn:"root"})}return t})(),gb=(()=>{class t extends Cm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ee(AD))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Oa=new q("",{factory:()=>({})}),ka=new q(""),mb=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P($g);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await jD(it(n,()=>r.loadComponent())),s=await _b(vb(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await yb(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function yb(t,e,n,r){let i=await jD(it(n,()=>t.loadChildren())),o=await _b(vb(i)),s;o instanceof cl||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let c,u,l=!1,h;return Array.isArray(s)?(u=s,l=!0):(c=s.create(n).injector,h=s,u=c.get(ka,[],{optional:!0,self:!0}).flat()),{routes:u.map(bm),injector:c,factory:h}}function $k(t){return t&&typeof t=="object"&&"default"in t}function vb(t){return $k(t)?t.default:t}async function _b(t){return t}var ed=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>P(zk),providedIn:"root"})}return t})(),zk=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Eb=new q("");var qk=()=>{},Ib=new q(""),wb=(()=>{class t{currentNavigation=Ir(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Ir(null);events=new rt;transitionAbortWithErrorSubject=new rt;configLoader=P(mb);environmentInjector=P(Le);destroyRef=P(_r);urlSerializer=P(Ma);rootContexts=P(So);location=P(yo);inputBindingEnabled=P(Zl,{optional:!0})!==null;titleStrategy=P(Cm);options=P(Oa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(ed);createViewTransition=P(Eb,{optional:!0});navigationErrorHandler=P(Ib,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ce(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new jl(i)),r=i=>this.events.next(new Bl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Ft(()=>{this.transitions?.next(ae(x({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new ke(null),this.transitions.pipe(Rn(r=>r!==null),xn(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return ce(r).pipe(xn(c=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ct.SupersededByNewNavigation),Ze;this.currentTransition=r;let u=this.lastSuccessfulNavigation();this.currentNavigation.set({id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:u?ae(x({},u),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload")return this.events.next(new Bn(c.id,this.urlSerializer.serialize(c.rawUrl),"",ba.IgnoredSameUrlNavigation)),c.resolve(!1),Ze;if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ce(c).pipe(xn(p=>(this.events.next(new vi(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),p.id!==this.navigationId?Ze:Promise.resolve(p))),Vk(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),dn(p=>{r.targetSnapshot=p.targetSnapshot,r.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation.update(y=>(y.finalUrl=p.urlAfterRedirects,y));let m=new wo(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:S,extras:N}=c,M=new vi(p,this.urlSerializer.serialize(m),y,S);this.events.next(M);let L=tb(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=ae(x({},c),{targetSnapshot:L,urlAfterRedirects:m,extras:ae(x({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(ne=>(ne.finalUrl=m,ne)),ce(r)}else return this.events.next(new Bn(c.id,this.urlSerializer.serialize(c.extractedUrl),"",ba.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ze}),be(c=>{let u=new Ll(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);return this.events.next(u),this.currentTransition=r=ae(x({},c),{guards:nk(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),r}),hk(c=>this.events.next(c)),xn(c=>{if(r.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Ql(this.urlSerializer,c.guardsResult);let u=new Fl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);if(this.events.next(u),!s())return Ze;if(!c.guardsResult)return this.cancelNavigationTransition(c,"",ct.GuardRejected),Ze;if(c.guards.canActivateChecks.length===0)return ce(c);let l=new Vl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);if(this.events.next(l),!s())return Ze;let h=!1;return ce(c).pipe(Uk(this.paramsInheritanceStrategy),dn({next:()=>{h=!0;let p=new Ul(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)},complete:()=>{h||this.cancelNavigationTransition(c,"",ct.NoDataFromResolver)}}))}),FD(c=>{let u=h=>{let p=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let m=h._environmentInjector;p.push(this.configLoader.loadComponent(m,h.routeConfig).then(y=>{h.component=y}))}for(let m of h.children)p.push(...u(m));return p},l=u(c.targetSnapshot.root);return l.length===0?ce(c):He(Promise.all(l).then(()=>c))}),FD(()=>this.afterPreactivation()),xn(()=>{let{currentSnapshot:c,targetSnapshot:u}=r,l=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return l?He(l).pipe(be(()=>r)):ce(r)}),Nn(1),be(c=>{let u=ZO(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);this.currentTransition=r=c=ae(x({},c),{targetRouterState:u}),this.currentNavigation.update(l=>(l.targetRouterState=u,l)),this.events.next(new To),s()&&(new vm(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,l=>this.events.next(l),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(l=>(l.abort=qk,l)),this.lastSuccessfulNavigation.set(Ft(this.currentNavigation)),this.events.next(new jn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)))}),Rs(ub(o.signal).pipe(Rn(()=>!i&&!r.targetRouterState),dn(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",ct.Aborted)}))),dn({complete:()=>{i=!0}}),Rs(this.transitionAbortWithErrorSubject.pipe(dn(c=>{throw c}))),Fh(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",ct.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),As(c=>{if(i=!0,this.destroyed)return r.resolve(!1),Ze;if(ab(c))this.events.next(new Ut(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode)),tk(c)?this.events.next(new Do(c.url,c.navigationBehaviorOptions)):r.resolve(!1);else{let u=new _i(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);try{let l=it(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(l instanceof bo){let{message:h,cancellationCode:p}=Ql(this.urlSerializer,l);this.events.next(new Ut(r.id,this.urlSerializer.serialize(r.extractedUrl),h,p)),this.events.next(new Do(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Ze}))}))}cancelNavigationTransition(n,r,i){let o=new Ut(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ft(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gk(t){return t!==wa}var Tb=new q("");var Db=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>P(Wk),providedIn:"root"})}return t})(),Jl=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}shouldDestroyInjector(e){return!0}},Wk=(()=>{class t extends Jl{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Yu(t)))(i||t)}})();static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sm=(()=>{class t{urlSerializer=P(Ma);options=P(Oa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(yo);urlHandlingStrategy=P(ed);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Xt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Xt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=tb(null,P(Le));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>P(Kk),providedIn:"root"})}return t})(),Kk=(()=>{class t extends Sm{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof vi?this.updateStateMemento():n instanceof Bn?this.commitTransition(r):n instanceof wo?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof To?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ut&&!eb(n)?this.restoreHistory(r):n instanceof _i?this.restoreHistory(r,!0):n instanceof jn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=x(x({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=x(x({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Yu(t)))(i||t)}})();static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Am(t,e){t.events.pipe(Rn(n=>n instanceof jn||n instanceof Ut||n instanceof _i||n instanceof Bn),be(n=>n instanceof jn||n instanceof Bn?0:(n instanceof Ut?n.code===ct.Redirect||n.code===ct.SupersededByNewNavigation:!1)?2:1),Rn(n=>n!==2),Nn(1)).subscribe(()=>{e()})}var bb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Cb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},td=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(kg);stateManager=P(Sm);options=P(Oa,{optional:!0})||{};pendingTasks=P(Er);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(wb);urlSerializer=P(Ma);location=P(yo);urlHandlingStrategy=P(ed);injector=P(Le);_events=new rt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(Db);injectorCleanup=P(Tb,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(ka,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(Zl,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ft(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ut&&r.code!==ct.Redirect&&r.code!==ct.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof jn)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Do){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=x({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Gk(i.source)},s);this.scheduleNavigation(c,wa,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}YO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=x({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Lt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ft(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(bm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=x(x({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=YD(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return JD(p,n,h,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Io(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,wa,null,r)}navigate(n,r={skipLocationChange:!1}){return Qk(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(to(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=x({},bb):r===!1?i=x({},Cb):i=r,Io(n))return RD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return RD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return Am(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new B(4008,!1)}var Zk=new q("");function Rm(t,...e){return ro([{provide:ka,multi:!0,useValue:t},[],{provide:Sr,useFactory:Xk},{provide:ll,multi:!0,useFactory:e1},e.map(n=>n.\u0275providers)])}function Xk(){return P(td).routerState.root}function e1(){let t=P(hn);return e=>{let n=t.get(mo);if(e!==n.components[0])return;let r=t.get(td),i=t.get(t1);t.get(n1)===1&&r.initialNavigation(),t.get(r1,null,{optional:!0})?.setUpPreloading(),t.get(Zk,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var t1=new q("",{factory:()=>new rt}),n1=new q("",{factory:()=>1});var r1=new q("");var Sb=[];var Ab={providers:[Bp(),Rm(Sb)]};var Rb=()=>{};var xb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},o1=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Pb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Mm;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Mm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},s1=function(t){let e=xb(t);return Pb.encodeByteArray(e,!0)},Fa=function(t){return s1(t).replace(/\./g,"")},rd=function(t){try{return Pb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ob(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var a1=()=>Ob().__FIREBASE_DEFAULTS__,c1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},u1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&rd(t[1]);return e&&JSON.parse(e)},id=()=>{try{return Rb()||a1()||c1()||u1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Pm=t=>id()?.emulatorHosts?.[t],kb=t=>{let e=Pm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Om=()=>id()?.config,km=t=>id()?.[`_${t}`];var nd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ar(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function od(t){return(await fetch(t,{credentials:"include"})).ok}function Lb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=x({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fa(JSON.stringify(n)),Fa(JSON.stringify(s)),""].join(".")}var La={};function l1(){let t={prod:[],emulator:[]};for(let e of Object.keys(La))La[e]?t.emulator.push(e):t.prod.push(e);return t}function d1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var Nb=!1;function sd(t,e){if(typeof window>"u"||typeof document>"u"||!Ar(window.location.host)||La[t]===e||La[t]||Nb)return;La[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=l1().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Nb=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=d1(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),M=document.getElementById(N)||document.createElement("a"),L=n("preprendIcon"),ne=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let me=m.element;c(me),h(M,N);let It=l();u(ne,L),me.append(ne,S,M,It),document.body.appendChild(me)}o?(S.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function f1(){let t=id()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ub(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bb(){let t=We();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Hb(){return!f1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lm(){try{return typeof indexedDB=="object"}catch{return!1}}function $b(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var h1="FirebaseError",St=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=h1,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hn.prototype.create)}},Hn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?p1(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new St(i,c,r)}};function p1(t,e){return t.replace(g1,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var g1=/\{\$([^}]+)}/g;function zb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function en(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(Mb(o)&&Mb(s)){if(!en(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Mb(t){return t!==null&&typeof t=="object"}function Ro(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qb(t,e){let n=new xm(t,e);return n.subscribe.bind(n)}var xm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");m1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Nm),i.error===void 0&&(i.error=Nm),i.complete===void 0&&(i.complete=Nm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function m1(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nm(){}var IQ=14400*1e3;function Ve(t){return t&&t._delegate?t._delegate:t}var jt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ii="[DEFAULT]";var Fm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new nd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v1(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function y1(t){return t===Ii?void 0:t}function v1(t){return t.instantiationMode==="EAGER"}var ad=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Fm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var _1=[],ie=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ie||{}),E1={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},I1=ie.INFO,w1={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},T1=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=w1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Rr=class{constructor(e){this.name=e,this._logLevel=I1,this._logHandler=T1,this._userLogHandler=null,_1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}};var D1=(t,e)=>e.some(n=>t instanceof n),Gb,Wb;function b1(){return Gb||(Gb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C1(){return Wb||(Wb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Kb=new WeakMap,Um=new WeakMap,Qb=new WeakMap,Vm=new WeakMap,Bm=new WeakMap;function S1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(_n(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Kb.set(n,t)}).catch(()=>{}),Bm.set(e,t),e}function A1(t){if(Um.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Um.set(t,e)}var jm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Um.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yb(t){jm=t(jm)}function R1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(cd(this),e,...n);return Qb.set(r,e.sort?e.sort():[e]),_n(r)}:C1().includes(t)?function(...e){return t.apply(cd(this),e),_n(Kb.get(this))}:function(...e){return _n(t.apply(cd(this),e))}}function N1(t){return typeof t=="function"?R1(t):(t instanceof IDBTransaction&&A1(t),D1(t,b1())?new Proxy(t,jm):t)}function _n(t){if(t instanceof IDBRequest)return S1(t);if(Vm.has(t))return Vm.get(t);let e=N1(t);return e!==t&&(Vm.set(t,e),Bm.set(e,t)),e}var cd=t=>Bm.get(t);function Zb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=_n(s);return r&&s.addEventListener("upgradeneeded",u=>{r(_n(s.result),u.oldVersion,u.newVersion,_n(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var M1=["get","getKey","getAll","getAllKeys","count"],x1=["put","add","delete","clear"],Hm=new Map;function Jb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hm.get(e))return Hm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=x1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M1.includes(n)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&u.done]))[0]};return Hm.set(e,o),o}Yb(t=>ae(x({},t),{get:(e,n,r)=>Jb(e,n)||t.get(e,n,r),has:(e,n)=>!!Jb(e,n)||t.has(e,n)}));var zm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(P1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function P1(t){return t.getComponent()?.type==="VERSION"}var qm="@firebase/app",Xb="0.14.7";var $n=new Rr("@firebase/app"),O1="@firebase/app-compat",k1="@firebase/analytics-compat",L1="@firebase/analytics",F1="@firebase/app-check-compat",V1="@firebase/app-check",U1="@firebase/auth",j1="@firebase/auth-compat",B1="@firebase/database",H1="@firebase/data-connect",$1="@firebase/database-compat",z1="@firebase/functions",q1="@firebase/functions-compat",G1="@firebase/installations",W1="@firebase/installations-compat",K1="@firebase/messaging",Q1="@firebase/messaging-compat",Y1="@firebase/performance",J1="@firebase/performance-compat",Z1="@firebase/remote-config",X1="@firebase/remote-config-compat",eL="@firebase/storage",tL="@firebase/storage-compat",nL="@firebase/firestore",rL="@firebase/ai",iL="@firebase/firestore-compat",oL="firebase",sL="12.8.0";var Gm="[DEFAULT]",aL={[qm]:"fire-core",[O1]:"fire-core-compat",[L1]:"fire-analytics",[k1]:"fire-analytics-compat",[V1]:"fire-app-check",[F1]:"fire-app-check-compat",[U1]:"fire-auth",[j1]:"fire-auth-compat",[B1]:"fire-rtdb",[H1]:"fire-data-connect",[$1]:"fire-rtdb-compat",[z1]:"fire-fn",[q1]:"fire-fn-compat",[G1]:"fire-iid",[W1]:"fire-iid-compat",[K1]:"fire-fcm",[Q1]:"fire-fcm-compat",[Y1]:"fire-perf",[J1]:"fire-perf-compat",[Z1]:"fire-rc",[X1]:"fire-rc-compat",[eL]:"fire-gcs",[tL]:"fire-gcs-compat",[nL]:"fire-fst",[iL]:"fire-fst-compat",[rL]:"fire-vertex","fire-js":"fire-js",[oL]:"fire-js-all"};var ud=new Map,cL=new Map,Wm=new Map;function eC(t,e){try{t.container.addComponent(e)}catch(n){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mr(t){let e=t.name;if(Wm.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;Wm.set(e,t);for(let n of ud.values())eC(n,t);for(let n of cL.values())eC(n,t);return!0}function Ua(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function At(t){return t==null?!1:t.settings!==void 0}var uL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Hn("app","Firebase",uL);var Km=class{constructor(e,n,r){this._isDeleted=!1,this._options=x({},e),this._config=x({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}};var xr=sL;function Jm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=x({name:Gm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=Om()),!n)throw Nr.create("no-options");let o=ud.get(i);if(o){if(en(n,o.options)&&en(r,o.config))return o;throw Nr.create("duplicate-app",{appName:i})}let s=new ad(i);for(let u of Wm.values())s.addComponent(u);let c=new Km(n,r,s);return ud.set(i,c),c}function ld(t=Gm){let e=ud.get(t);if(!e&&t===Gm&&Om())return Jm();if(!e)throw Nr.create("no-app",{appName:t});return e}function tn(t,e,n){let r=aL[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(s.join(" "));return}Mr(new jt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var lL="firebase-heartbeat-database",dL=1,Va="firebase-heartbeat-store",$m=null;function iC(){return $m||($m=Zb(lL,dL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Va)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),$m}async function fL(t){try{let n=(await iC()).transaction(Va),r=await n.objectStore(Va).get(oC(t));return await n.done,r}catch(e){if(e instanceof St)$n.warn(e.message);else{let n=Nr.create("idb-get",{originalErrorMessage:e?.message});$n.warn(n.message)}}}async function tC(t,e){try{let r=(await iC()).transaction(Va,"readwrite");await r.objectStore(Va).put(e,oC(t)),await r.done}catch(n){if(n instanceof St)$n.warn(n.message);else{let r=Nr.create("idb-set",{originalErrorMessage:n?.message});$n.warn(r.message)}}}function oC(t){return`${t.name}!${t.options.appId}`}var hL=1024,pL=30,Qm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Ym(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=nC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>pL){let i=mL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$n.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=nC(),{heartbeatsToSend:n,unsentEntries:r}=gL(this._heartbeatsCache.heartbeats),i=Fa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return $n.warn(e),""}}};function nC(){return new Date().toISOString().substring(0,10)}function gL(t,e=hL){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),rC(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ym=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lm()?$b().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await fL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return tC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return tC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function rC(t){return Fa(JSON.stringify({version:2,heartbeats:t})).length}function mL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function yL(t){Mr(new jt("platform-logger",e=>new zm(e),"PRIVATE")),Mr(new jt("heartbeat",e=>new Qm(e),"PRIVATE")),tn(qm,Xb,t),tn(qm,Xb,"esm2020"),tn("fire-js","")}yL("");var sC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aC={};var zn,Zm;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(T,I,b){for(var _=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)_[gt-2]=arguments[gt];return v.prototype[I].apply(T,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let T=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)T[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)T[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let b=w.g[3],_;_=v+(b^E&(I^b))+T[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+T[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+T[2]+606105819&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+T[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+T[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+T[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+T[6]+2821735955&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+T[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+T[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+T[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+T[10]+4294925233&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+T[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+T[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+T[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+T[14]+2792965006&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+T[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^b&(E^I))+T[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+T[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+T[11]+643717713&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+T[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+T[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+T[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+T[15]+3634488961&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+T[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+T[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+T[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+T[3]+4107603335&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+T[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+T[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+T[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+T[7]+1735328473&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+T[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^b)+T[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+T[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+T[11]+1839030562&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+T[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+T[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+T[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+T[7]+4139469664&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+T[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+T[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+T[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+T[3]+3572445317&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+T[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+T[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+T[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+T[15]+530742520&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+T[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~b))+T[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+T[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+T[14]+2878612391&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+T[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+T[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+T[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+T[10]+4293915773&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+T[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+T[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+T[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+T[6]+2734768916&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+T[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+T[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+T[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+T[2]+718787259&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,T=this.C,I=this.h,b=0;for(;b<v;){if(I==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<v;)if(T[I++]=w.charCodeAt(b++),I==this.blockSize){i(this,T),I=0;break}}else for(;b<v;)if(T[I++]=w[b++],I==this.blockSize){i(this,T),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)w[v++]=this.g[E]>>>T&255;return w};function o(w,v){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],T=!0;for(let I=w.length-1;I>=0;I--){let b=w[I]|0;T&&b==v||(E[I]=b,T=!1)}this.g=E}var c={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return M(l(-w));let v=[],E=1;for(let T=0;w>=E;T++)v[T]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return M(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),T=p;for(let b=0;b<w.length;b+=8){var I=Math.min(8,w.length-b);let _=parseInt(w.substring(b,b+I),v);I<8?(I=l(Math.pow(v,I)),T=T.j(I).add(l(_))):(T=T.j(E),T=T.add(l(_)))}return T}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-M(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);w+=(T>=0?T:4294967296+T)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(N(this))return"-"+M(this).toString(w);let v=l(Math.pow(w,6));var E=this;let T="";for(;;){let I=It(E,v).g;E=L(E,I.j(v));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,S(E))return b+T;for(;b.length<6;)b="0"+b;T=b+T}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=L(this,w),N(w)?-1:S(w)?0:1};function M(w){let v=w.g.length,E=[];for(let T=0;T<v;T++)E[T]=~w.g[T];return new s(E,~w.h).add(m)}t.abs=function(){return N(this)?M(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],T=0;for(let I=0;I<=v;I++){let b=T+(this.i(I)&65535)+(w.i(I)&65535),_=(b>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);T=_>>>16,b&=65535,_&=65535,E[I]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function L(w,v){return w.add(M(v))}t.j=function(w){if(S(this)||S(w))return p;if(N(this))return N(w)?M(this).j(M(w)):M(M(this).j(w));if(N(w))return M(this.j(M(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let I=0;I<w.g.length;I++){let b=this.i(T)>>>16,_=this.i(T)&65535,gt=w.i(I)>>>16,nr=w.i(I)&65535;E[2*T+2*I]+=_*nr,ne(E,2*T+2*I),E[2*T+2*I+1]+=b*nr,ne(E,2*T+2*I+1),E[2*T+2*I+1]+=_*gt,ne(E,2*T+2*I+1),E[2*T+2*I+2]+=b*gt,ne(E,2*T+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function ne(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function me(w,v){this.g=w,this.h=v}function It(w,v){if(S(v))throw Error("division by zero");if(S(w))return new me(p,p);if(N(w))return v=It(M(w),v),new me(M(v.g),M(v.h));if(N(v))return v=It(w,M(v)),new me(M(v.g),v.h);if(w.g.length>30){if(N(w)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,T=v;T.l(w)<=0;)E=$t(E),T=$t(T);var I=Ye(E,1),b=Ye(T,1);for(T=Ye(T,2),E=Ye(E,2);!S(T);){var _=b.add(T);_.l(w)<=0&&(I=I.add(E),b=_),T=Ye(T,1),E=Ye(E,1)}return v=L(w,I.j(v)),new me(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),b=l(E),_=b.j(v);N(_)||_.l(w)>0;)E-=T,b=l(E),_=b.j(v);S(b)&&(b=m),I=I.add(b),w=L(w,_)}return new me(I,w)}t.B=function(w){return It(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)&w.i(T);return new s(E,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)|w.i(T);return new s(E,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)^w.i(T);return new s(E,this.h^w.h)};function $t(w){let v=w.g.length+1,E=[];for(let T=0;T<v;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new s(E,w.h)}function Ye(w,v){let E=v>>5;v%=32;let T=w.g.length-E,I=[];for(let b=0;b<T;b++)I[b]=v>0?w.i(b+E)>>>v|w.i(b+E+1)<<32-v:w.i(b+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zm=aC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,zn=aC.Integer=s}).apply(typeof sC<"u"?sC:typeof self<"u"?self:typeof window<"u"?window:{});var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qn={};var Xm,vL,No,ey,ja,fd,ty,ny,ry;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof dd=="object"&&dd];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in f))break e;f=f[D]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var f=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&f.push([g,d[g]]);return f}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,f){return a.call.apply(a.bind,arguments)}function l(a,d,f){return l=u,l.apply(null,arguments)}function h(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(g,D,C){for(var O=Array(arguments.length-2),X=2;X<arguments.length;X++)O[X-2]=arguments[X];return d.prototype[D].apply(g,O)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){let d=a.length;if(d>0){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function S(a,d){for(let g=1;g<arguments.length;g++){let D=arguments[g];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=a.length||0;let C=D.length||0;a.length=f+C;for(let O=0;O<C;O++)a[f+O]=D[O]}else a.push(D)}}class N{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function M(a){s.setTimeout(()=>{throw a},0)}function L(){var a=w;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ne{constructor(){this.h=this.g=null}add(d,f){let g=me.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var me=new N(()=>new It,a=>a.reset());class It{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let $t,Ye=!1,w=new ne,v=()=>{let a=Promise.resolve(void 0);$t=()=>{a.then(E)}};function E(){for(var a;a=L();){try{a.h.call(a.g)}catch(f){M(f)}var d=me;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}Ye=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function gt(a,d){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(gt,I),gt.prototype.init=function(a,d){let f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&gt.Z.h.call(this)},gt.prototype.h=function(){gt.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var nr="closure_listenable_"+(Math.random()*1e6|0),M0=0;function x0(a,d,f,g,D){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++M0,this.da=this.fa=!1}function yc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function vc(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function P0(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function O_(a){let d={};for(let f in a)d[f]=a[f];return d}let k_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L_(a,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)a[f]=g[f];for(let C=0;C<k_.length;C++)f=k_[C],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function _c(a){this.src=a,this.g={},this.h=0}_c.prototype.add=function(a,d,f,g,D){let C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);let O=Qf(a,d,g,D);return O>-1?(d=a[O],f||(d.fa=!1)):(d=new x0(d,this.src,C,!!g,D),d.fa=f,a.push(d)),d};function Kf(a,d){let f=d.type;if(f in a.g){var g=a.g[f],D=Array.prototype.indexOf.call(g,d,void 0),C;(C=D>=0)&&Array.prototype.splice.call(g,D,1),C&&(yc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Qf(a,d,f,g){for(let D=0;D<a.length;++D){let C=a[D];if(!C.da&&C.listener==d&&C.capture==!!f&&C.ha==g)return D}return-1}var Yf="closure_lm_"+(Math.random()*1e6|0),Jf={};function F_(a,d,f,g,D){if(g&&g.once)return U_(a,d,f,g,D);if(Array.isArray(d)){for(let C=0;C<d.length;C++)F_(a,d[C],f,g,D);return null}return f=th(f),a&&a[nr]?a.J(d,f,c(g)?!!g.capture:!!g,D):V_(a,d,f,!1,g,D)}function V_(a,d,f,g,D,C){if(!d)throw Error("Invalid event type");let O=c(D)?!!D.capture:!!D,X=Xf(a);if(X||(a[Yf]=X=new _c(a)),f=X.add(d,f,g,O,C),f.proxy)return f;if(g=O0(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)b||(D=O),D===void 0&&(D=!1),a.addEventListener(d.toString(),g,D);else if(a.attachEvent)a.attachEvent(B_(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function O0(){function a(f){return d.call(a.src,a.listener,f)}let d=k0;return a}function U_(a,d,f,g,D){if(Array.isArray(d)){for(let C=0;C<d.length;C++)U_(a,d[C],f,g,D);return null}return f=th(f),a&&a[nr]?a.K(d,f,c(g)?!!g.capture:!!g,D):V_(a,d,f,!0,g,D)}function j_(a,d,f,g,D){if(Array.isArray(d))for(var C=0;C<d.length;C++)j_(a,d[C],f,g,D);else g=c(g)?!!g.capture:!!g,f=th(f),a&&a[nr]?(a=a.i,C=String(d).toString(),C in a.g&&(d=a.g[C],f=Qf(d,f,g,D),f>-1&&(yc(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[C],a.h--)))):a&&(a=Xf(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Qf(d,f,g,D)),(f=a>-1?d[a]:null)&&Zf(f))}function Zf(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[nr])Kf(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(B_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Xf(d))?(Kf(f,a),f.h==0&&(f.src=null,d[Yf]=null)):yc(a)}}}function B_(a){return a in Jf?Jf[a]:Jf[a]="on"+a}function k0(a,d){if(a.da)a=!0;else{d=new gt(d,this);let f=a.listener,g=a.ha||a.src;a.fa&&Zf(a),a=f.call(g,d)}return a}function Xf(a){return a=a[Yf],a instanceof _c?a:null}var eh="__closure_events_fn_"+(Math.random()*1e9>>>0);function th(a){return typeof a=="function"?a:(a[eh]||(a[eh]=function(d){return a.handleEvent(d)}),a[eh])}function tt(){T.call(this),this.i=new _c(this),this.M=this,this.G=null}p(tt,T),tt.prototype[nr]=!0,tt.prototype.removeEventListener=function(a,d,f,g){j_(this,a,d,f,g)};function lt(a,d){var f,g=a.G;if(g)for(f=[];g;g=g.G)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new I(d,a);else if(d instanceof I)d.target=d.target||a;else{var D=d;d=new I(g,a),L_(d,D)}D=!0;let C,O;if(f)for(O=f.length-1;O>=0;O--)C=d.g=f[O],D=Ec(C,g,!0,d)&&D;if(C=d.g=a,D=Ec(C,g,!0,d)&&D,D=Ec(C,g,!1,d)&&D,f)for(O=0;O<f.length;O++)C=d.g=f[O],D=Ec(C,g,!1,d)&&D}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let f=a.g[d];for(let g=0;g<f.length;g++)yc(f[g]);delete a.g[d],a.h--}}this.G=null},tt.prototype.J=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},tt.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Ec(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let C=0;C<d.length;++C){let O=d[C];if(O&&!O.da&&O.capture==f){let X=O.listener,Oe=O.ha||O.src;O.fa&&Kf(a.i,O),D=X.call(Oe,g)!==!1&&D}}return D&&!g.defaultPrevented}function L0(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function H_(a){a.g=L0(()=>{a.g=null,a.i&&(a.i=!1,H_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class F0 extends T{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:H_(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function as(a){T.call(this),this.h=a,this.g={}}p(as,T);var $_=[];function z_(a){vc(a.g,function(d,f){this.g.hasOwnProperty(f)&&Zf(d)},a),a.g={}}as.prototype.N=function(){as.Z.N.call(this),z_(this)},as.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nh=s.JSON.stringify,V0=s.JSON.parse,U0=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function q_(){}function G_(){}var cs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rh(){I.call(this,"d")}p(rh,I);function ih(){I.call(this,"c")}p(ih,I);var Br={},W_=null;function Ic(){return W_=W_||new tt}Br.Ia="serverreachability";function K_(a){I.call(this,Br.Ia,a)}p(K_,I);function us(a){let d=Ic();lt(d,new K_(d))}Br.STAT_EVENT="statevent";function Q_(a,d){I.call(this,Br.STAT_EVENT,a),this.stat=d}p(Q_,I);function dt(a){let d=Ic();lt(d,new Q_(d,a))}Br.Ja="timingevent";function Y_(a,d){I.call(this,Br.Ja,a),this.size=d}p(Y_,I);function ls(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function ds(){this.g=!0}ds.prototype.ua=function(){this.g=!1};function j0(a,d,f,g,D,C){a.info(function(){if(a.g)if(C){var O="",X=C.split("&");for(let _e=0;_e<X.length;_e++){var Oe=X[_e].split("=");if(Oe.length>1){let je=Oe[0];Oe=Oe[1];let ln=je.split("_");O=ln.length>=2&&ln[1]=="type"?O+(je+"="+Oe+"&"):O+(je+"=redacted&")}}}else O=null;else O=C;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+O})}function B0(a,d,f,g,D,C,O){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+C+" "+O})}function Hi(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+$0(a,f)+(g?" "+g:"")})}function H0(a,d){a.info(function(){return"TIMEOUT: "+d})}ds.prototype.info=function(){};function $0(a,d){if(!a.g)return d;if(!d)return null;try{let C=JSON.parse(d);if(C){for(a=0;a<C.length;a++)if(Array.isArray(C[a])){var f=C[a];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let O=1;O<g.length;O++)g[O]=""}}}}return nh(C)}catch{return d}}var wc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},J_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Z_;function oh(){}p(oh,q_),oh.prototype.g=function(){return new XMLHttpRequest},Z_=new oh;function fs(a){return encodeURIComponent(String(a))}function z0(a){var d=1;a=a.split(":");let f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function rr(a,d,f,g){this.j=a,this.i=d,this.l=f,this.S=g||1,this.V=new as(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new X_}function X_(){this.i=null,this.g="",this.h=!1}var eE={},sh={};function ah(a,d,f){a.M=1,a.A=Dc(un(d)),a.u=f,a.R=!0,tE(a,null)}function tE(a,d){a.F=Date.now(),Tc(a),a.B=un(a.A);var f=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),pE(f.i,"t",g),a.C=0,f=a.j.L,a.h=new X_,a.g=xE(a.j,f?d:null,!a.u),a.P>0&&(a.O=new F0(l(a.Y,a,a.g),a.P)),d=a.V,f=a.g,g=a.ba;var D="readystatechange";Array.isArray(D)||(D&&($_[0]=D.toString()),D=$_);for(let C=0;C<D.length;C++){let O=F_(f,D[C],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=a.J?O_(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),us(),j0(a.i,a.v,a.B,a.l,a.S,a.u)}rr.prototype.ba=function(a){a=a.target;let d=this.O;d&&sr(a)==3?d.j():this.Y(a)},rr.prototype.Y=function(a){try{if(a==this.g)e:{let X=sr(this.g),Oe=this.g.ya(),_e=this.g.ca();if(!(X<3)&&(X!=3||this.g&&(this.h.h||this.g.la()||IE(this.g)))){this.K||X!=4||Oe==7||(Oe==8||_e<=0?us(3):us(2)),ch(this);var d=this.g.ca();this.X=d;var f=q0(this);if(this.o=d==200,B0(this.i,this.v,this.B,this.l,this.S,X,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var C=g;break t}}C=null}if(a=C)Hi(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,uh(this,a);else{this.o=!1,this.m=3,dt(12),Hr(this),hs(this);break e}}if(this.R){a=!0;let je;for(;!this.K&&this.C<f.length;)if(je=G0(this,f),je==sh){X==4&&(this.m=4,dt(14),a=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(je==eE){this.m=4,dt(15),Hi(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else Hi(this.i,this.l,je,null),uh(this,je);if(nE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),X!=4||f.length!=0||this.h.h||(this.m=1,dt(16),a=!1),this.o=this.o&&a,!a)Hi(this.i,this.l,f,"[Invalid Chunked Response]"),Hr(this),hs(this);else if(f.length>0&&!this.W){this.W=!0;var O=this.j;O.g==this&&O.aa&&!O.P&&(O.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),mh(O),O.P=!0,dt(11))}}else Hi(this.i,this.l,f,null),uh(this,f);X==4&&Hr(this),this.o&&!this.K&&(X==4?AE(this.j,this):(this.o=!1,Tc(this)))}else sR(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),Hr(this),hs(this)}}}catch{}};function q0(a){if(!nE(a))return a.g.la();let d=IE(a.g);if(d==="")return"";let f="",g=d.length,D=sr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Hr(a),hs(a),"";a.h.i=new s.TextDecoder}for(let C=0;C<g;C++)a.h.h=!0,f+=a.h.i.decode(d[C],{stream:!(D&&C==g-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function nE(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function G0(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?sh:(f=Number(d.substring(f,g)),isNaN(f)?eE:(g+=1,g+f>d.length?sh:(d=d.slice(g,g+f),a.C=g+f,d)))}rr.prototype.cancel=function(){this.K=!0,Hr(this)};function Tc(a){a.T=Date.now()+a.H,rE(a,a.H)}function rE(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ls(l(a.aa,a),d)}function ch(a){a.D&&(s.clearTimeout(a.D),a.D=null)}rr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(H0(this.i,this.B),this.M!=2&&(us(),dt(17)),Hr(this),this.m=2,hs(this)):rE(this,this.T-a)};function hs(a){a.j.I==0||a.K||AE(a.j,a)}function Hr(a){ch(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,z_(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function uh(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||lh(f.h,a))){if(!a.L&&lh(f.h,a)&&f.I==3){try{var g=f.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Nc(f),Ac(f);else break e;gh(f),dt(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ls(l(f.Va,f),6e3));sE(f.h)<=1&&f.ta&&(f.ta=void 0)}else zr(f,11)}else if((a.L||f.g==a)&&Nc(f),!_(d))for(D=f.Ba.g.parse(d),d=0;d<D.length;d++){let _e=D[d],je=_e[0];if(!(je<=f.K))if(f.K=je,_e=_e[1],f.I==2)if(_e[0]=="c"){f.M=_e[1],f.ba=_e[2];let ln=_e[3];ln!=null&&(f.ka=ln,f.j.info("VER="+f.ka));let qr=_e[4];qr!=null&&(f.za=qr,f.j.info("SVER="+f.za));let ar=_e[5];ar!=null&&typeof ar=="number"&&ar>0&&(g=1.5*ar,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let cr=a.g;if(cr){let xc=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xc){var C=g.h;C.g||xc.indexOf("spdy")==-1&&xc.indexOf("quic")==-1&&xc.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(dh(C,C.h),C.h=null))}if(g.G){let yh=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;yh&&(g.wa=yh,Ee(g.J,g.G,yh))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var O=a;if(g.na=ME(g,g.L?g.ba:null,g.W),O.L){aE(g.h,O);var X=O,Oe=g.O;Oe&&(X.H=Oe),X.D&&(ch(X),Tc(X)),g.g=O}else CE(g);f.i.length>0&&Rc(f)}else _e[0]!="stop"&&_e[0]!="close"||zr(f,7);else f.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?zr(f,7):ph(f):_e[0]!="noop"&&f.l&&f.l.qa(_e),f.A=0)}}us(4)}catch{}}var W0=class{constructor(a,d){this.g=a,this.map=d}};function iE(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function oE(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function sE(a){return a.h?1:a.g?a.g.size:0}function lh(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function dh(a,d){a.g?a.g.add(d):a.h=d}function aE(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}iE.prototype.cancel=function(){if(this.i=cE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function cE(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.G);return d}return y(a.i)}var uE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function K0(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){let g=a[f].indexOf("="),D,C=null;g>=0?(D=a[f].substring(0,g),C=a[f].substring(g+1)):D=a[f],d(D,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ir(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof ir?(this.l=a.l,ps(this,a.j),this.o=a.o,this.g=a.g,gs(this,a.u),this.h=a.h,fh(this,gE(a.i)),this.m=a.m):a&&(d=String(a).match(uE))?(this.l=!1,ps(this,d[1]||"",!0),this.o=ms(d[2]||""),this.g=ms(d[3]||"",!0),gs(this,d[4]),this.h=ms(d[5]||"",!0),fh(this,d[6]||"",!0),this.m=ms(d[7]||"")):(this.l=!1,this.i=new vs(null,this.l))}ir.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(ys(d,lE,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ys(d,lE,!0),"@"),a.push(fs(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ys(f,f.charAt(0)=="/"?J0:Y0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ys(f,X0)),a.join("")},ir.prototype.resolve=function(a){let d=un(this),f=!!a.j;f?ps(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var g=a.h;if(f)gs(d,a.u);else if(f=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=d.h.lastIndexOf("/");D!=-1&&(g=d.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");let C=[];for(let O=0;O<D.length;){let X=D[O++];X=="."?g&&O==D.length&&C.push(""):X==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),g&&O==D.length&&C.push("")):(C.push(X),g=!0)}g=C.join("/")}else g=D}return f?d.h=g:f=a.i.toString()!=="",f?fh(d,gE(a.i)):f=!!a.m,f&&(d.m=a.m),d};function un(a){return new ir(a)}function ps(a,d,f){a.j=f?ms(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function gs(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function fh(a,d,f){d instanceof vs?(a.i=d,eR(a.i,a.l)):(f||(d=ys(d,Z0)),a.i=new vs(d,a.l))}function Ee(a,d,f){a.i.set(d,f)}function Dc(a){return Ee(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ms(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ys(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Q0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Q0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var lE=/[#\/\?@]/g,Y0=/[#\?:]/g,J0=/[#\?]/g,Z0=/[#\?@]/g,X0=/#/g;function vs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function $r(a){a.g||(a.g=new Map,a.h=0,a.i&&K0(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=vs.prototype,t.add=function(a,d){$r(this),this.i=null,a=$i(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function dE(a,d){$r(a),d=$i(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function fE(a,d){return $r(a),d=$i(a,d),a.g.has(d)}t.forEach=function(a,d){$r(this),this.g.forEach(function(f,g){f.forEach(function(D){a.call(d,D,g,this)},this)},this)};function hE(a,d){$r(a);let f=[];if(typeof d=="string")fE(a,d)&&(f=f.concat(a.g.get($i(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}t.set=function(a,d){return $r(this),this.i=null,a=$i(this,a),fE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=hE(this,a),a.length>0?String(a[0]):d):d};function pE(a,d,f){dE(a,d),f.length>0&&(a.i=null,a.g.set($i(a,d),y(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var f=d[g];let D=fs(f);f=hE(this,f);for(let C=0;C<f.length;C++){let O=D;f[C]!==""&&(O+="="+fs(f[C])),a.push(O)}}return this.i=a.join("&")};function gE(a){let d=new vs;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function $i(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function eR(a,d){d&&!a.j&&($r(a),a.i=null,a.g.forEach(function(f,g){let D=g.toLowerCase();g!=D&&(dE(this,g),pE(this,D,f))},a)),a.j=d}function tR(a,d){let f=new ds;if(s.Image){let g=new Image;g.onload=h(or,f,"TestLoadImage: loaded",!0,d,g),g.onerror=h(or,f,"TestLoadImage: error",!1,d,g),g.onabort=h(or,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=h(or,f,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function nR(a,d){let f=new ds,g=new AbortController,D=setTimeout(()=>{g.abort(),or(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(C=>{clearTimeout(D),C.ok?or(f,"TestPingServer: ok",!0,d):or(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),or(f,"TestPingServer: error",!1,d)})}function or(a,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function rR(){this.g=new U0}function bc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(bc,q_),bc.prototype.g=function(){return new Cc(this.i,this.h)};function Cc(a,d){tt.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Cc,tt),t=Cc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,Es(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mE(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function mE(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?_s(this):Es(this),this.readyState==3&&mE(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,_s(this))},t.Na=function(a){this.g&&(this.response=a,_s(this))},t.ga=function(){this.g&&_s(this)};function _s(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Es(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Es(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function yE(a){let d="";return vc(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function hh(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=yE(f),typeof a=="string"?f!=null&&fs(f):Ee(a,d,f))}function De(a){tt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(De,tt);var iR=/^https?$/i,oR=["POST","PUT"];t=De.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Z_.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(C){vE(this,C);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let C of g.keys())f.set(C,g.get(C));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(C=>C.toLowerCase()=="content-type"),D=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(oR,d,void 0)>=0)||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,O]of f)this.g.setRequestHeader(C,O);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(C){vE(this,C)}};function vE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,_E(a),Sc(a)}function _E(a){a.A||(a.A=!0,lt(a,"complete"),lt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,lt(this,"complete"),lt(this,"abort"),Sc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sc(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?EE(this):this.Xa())},t.Xa=function(){EE(this)};function EE(a){if(a.h&&typeof o<"u"){if(a.v&&sr(a)==4)setTimeout(a.Ca.bind(a),0);else if(lt(a,"readystatechange"),sr(a)==4){a.h=!1;try{let C=a.ca();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=C===0){let O=String(a.D).match(uE)[1]||null;!O&&s.self&&s.self.location&&(O=s.self.location.protocol.slice(0,-1)),g=!iR.test(O?O.toLowerCase():"")}f=g}if(f)lt(a,"complete"),lt(a,"success");else{a.o=6;try{var D=sr(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",_E(a)}}finally{Sc(a)}}}}function Sc(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let f=a.g;a.g=null,d||lt(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function sr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return sr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),V0(d)}};function IE(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function sR(a){let d={};a=(a.g&&sr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var f=z0(a[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let C=d[D]||[];d[D]=C,C.push(f)}P0(d,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function wE(a){this.za=0,this.i=[],this.j=new ds,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Is("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Is("baseRetryDelayMs",5e3,a),this.Za=Is("retryDelaySeedMs",1e4,a),this.Ta=Is("forwardChannelMaxRetries",2,a),this.va=Is("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new iE(a&&a.concurrentRequestLimit),this.Ba=new rR,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=wE.prototype,t.ka=8,t.I=1,t.connect=function(a,d,f,g){dt(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=ME(this,null,this.W),Rc(this)};function ph(a){if(TE(a),a.I==3){var d=a.V++,f=un(a.J);if(Ee(f,"SID",a.M),Ee(f,"RID",d),Ee(f,"TYPE","terminate"),ws(a,f),d=new rr(a,a.j,d),d.M=2,d.A=Dc(un(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=xE(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Tc(d)}NE(a)}function Ac(a){a.g&&(mh(a),a.g.cancel(),a.g=null)}function TE(a){Ac(a),a.v&&(s.clearTimeout(a.v),a.v=null),Nc(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Rc(a){if(!oE(a.h)&&!a.m){a.m=!0;var d=a.Ea;$t||v(),Ye||($t(),Ye=!0),w.add(d,a),a.D=0}}function aR(a,d){return sE(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ls(l(a.Ea,a,d),RE(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let D=new rr(this,this.j,a),C=this.o;if(this.U&&(C?(C=O_(C),L_(C,this.U)):C=this.U),this.u!==null||this.R||(D.J=C,C=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=bE(this,D,d),f=un(this.J),Ee(f,"RID",a),Ee(f,"CVER",22),this.G&&Ee(f,"X-HTTP-Session-Id",this.G),ws(this,f),C&&(this.R?d="headers="+fs(yE(C))+"&"+d:this.u&&hh(f,this.u,C)),dh(this.h,D),this.Ra&&Ee(f,"TYPE","init"),this.S?(Ee(f,"$req",d),Ee(f,"SID","null"),D.U=!0,ah(D,f,null)):ah(D,f,d),this.I=2}}else this.I==3&&(a?DE(this,a):this.i.length==0||oE(this.h)||DE(this))};function DE(a,d){var f;d?f=d.l:f=a.V++;let g=un(a.J);Ee(g,"SID",a.M),Ee(g,"RID",f),Ee(g,"AID",a.K),ws(a,g),a.u&&a.o&&hh(g,a.u,a.o),f=new rr(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=bE(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),dh(a.h,f),ah(f,g,d)}function ws(a,d){a.H&&vc(a.H,function(f,g){Ee(d,g,f)}),a.l&&vc({},function(f,g){Ee(d,g,f)})}function bE(a,d,f){f=Math.min(a.i.length,f);let g=a.l?l(a.l.Ka,a.l,a):null;e:{var D=a.i;let X=-1;for(;;){let Oe=["count="+f];X==-1?f>0?(X=D[0].g,Oe.push("ofs="+X)):X=0:Oe.push("ofs="+X);let _e=!0;for(let je=0;je<f;je++){var C=D[je].g;let ln=D[je].map;if(C-=X,C<0)X=Math.max(0,D[je].g-100),_e=!1;else try{C="req"+C+"_"||"";try{var O=ln instanceof Map?ln:Object.entries(ln);for(let[qr,ar]of O){let cr=ar;c(ar)&&(cr=nh(ar)),Oe.push(C+qr+"="+encodeURIComponent(cr))}}catch(qr){throw Oe.push(C+"type="+encodeURIComponent("_badmap")),qr}}catch{g&&g(ln)}}if(_e){O=Oe.join("&");break e}}O=void 0}return a=a.i.splice(0,f),d.G=a,O}function CE(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;$t||v(),Ye||($t(),Ye=!0),w.add(d,a),a.A=0}}function gh(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ls(l(a.Da,a),RE(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,SE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ls(l(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),Ac(this),SE(this))};function mh(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function SE(a){a.g=new rr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=un(a.na);Ee(d,"RID","rpc"),Ee(d,"SID",a.M),Ee(d,"AID",a.K),Ee(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ee(d,"TO",a.ia),Ee(d,"TYPE","xmlhttp"),ws(a,d),a.u&&a.o&&hh(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Dc(un(d)),f.u=null,f.R=!0,tE(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Ac(this),gh(this),dt(19))};function Nc(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function AE(a,d){var f=null;if(a.g==d){Nc(a),mh(a),a.g=null;var g=2}else if(lh(a.h,d))f=d.G,aE(a.h,d),g=1;else return;if(a.I!=0){if(d.o)if(g==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var D=a.D;g=Ic(),lt(g,new Y_(g,f)),Rc(a)}else CE(a);else if(D=d.m,D==3||D==0&&d.X>0||!(g==1&&aR(a,d)||g==2&&gh(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),D){case 1:zr(a,5);break;case 4:zr(a,10);break;case 3:zr(a,6);break;default:zr(a,2)}}}function RE(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function zr(a,d){if(a.j.info("Error code "+d),d==2){var f=l(a.bb,a),g=a.Ua;let D=!g;g=new ir(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||ps(g,"https"),Dc(g),D?tR(g.toString(),f):nR(g.toString(),f)}else dt(2);a.I=0,a.l&&a.l.pa(d),NE(a),TE(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function NE(a){if(a.I=0,a.ja=[],a.l){let d=cE(a.h);(d.length!=0||a.i.length!=0)&&(S(a.ja,d),S(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function ME(a,d,f){var g=f instanceof ir?un(f):new ir(f);if(g.g!="")d&&(g.g=d+"."+g.g),gs(g,g.u);else{var D=s.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;let C=new ir(null);g&&ps(C,g),d&&(C.g=d),D&&gs(C,D),f&&(C.h=f),g=C}return f=a.G,d=a.wa,f&&d&&Ee(g,f,d),Ee(g,"VER",a.ka),ws(a,g),g}function xE(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new De(new bc({ab:f})):new De(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function PE(){}t=PE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mc(){}Mc.prototype.g=function(a,d){return new wt(a,d)};function wt(a,d){tt.call(this),this.g=new wE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!_(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new zi(this)}p(wt,tt),wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){ph(this.g)},wt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=nh(a),a=f);d.i.push(new W0(d.Ya++,a)),d.I==3&&Rc(d)},wt.prototype.N=function(){this.g.l=null,delete this.j,ph(this.g),delete this.g,wt.Z.N.call(this)};function OE(a){rh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(OE,rh);function kE(){ih.call(this),this.status=1}p(kE,ih);function zi(a){this.g=a}p(zi,PE),zi.prototype.ra=function(){lt(this.g,"a")},zi.prototype.qa=function(a){lt(this.g,new OE(a))},zi.prototype.pa=function(a){lt(this.g,new kE)},zi.prototype.oa=function(){lt(this.g,"b")},Mc.prototype.createWebChannel=Mc.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,ry=qn.createWebChannelTransport=function(){return new Mc},ny=qn.getStatEventTarget=function(){return Ic()},ty=qn.Event=Br,fd=qn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wc.NO_ERROR=0,wc.TIMEOUT=8,wc.HTTP_ERROR=6,ja=qn.ErrorCode=wc,J_.COMPLETE="complete",ey=qn.EventType=J_,G_.EventType=cs,cs.OPEN="a",cs.CLOSE="b",cs.ERROR="c",cs.MESSAGE="d",tt.prototype.listen=tt.prototype.J,No=qn.WebChannel=G_,vL=qn.FetchXmlHttpFactory=bc,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,Xm=qn.XhrIo=De}).apply(typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{});var Ke=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");var Zo="12.8.0";function WC(t){Zo=t}var Di=new Rr("@firebase/firestore");function Mo(){return Di.logLevel}function k(t,...e){if(Di.logLevel<=ie.DEBUG){let n=e.map(Pv);Di.debug(`Firestore (${Zo}): ${t}`,...n)}}function Kn(t,...e){if(Di.logLevel<=ie.ERROR){let n=e.map(Pv);Di.error(`Firestore (${Zo}): ${t}`,...n)}}function Pr(t,...e){if(Di.logLevel<=ie.WARN){let n=e.map(Pv);Di.warn(`Firestore (${Zo}): ${t}`,...n)}}function Pv(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function $(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,KC(t,r,n)}function KC(t,e,n){let r=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Kn(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||KC(e,i,r)}function Q(t,e){return t}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends St{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var _d=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ed=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ke.UNAUTHENTICATED))}shutdown(){}},uy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Id=class{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new _d(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Ke(e)}},ly=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},dy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ly(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Td=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,At(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wd(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function _L(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var bi=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=_L(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function se(t,e){return t<e?-1:t>e?1:0}function fy(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return iy(i)===iy(o)?se(i,o):iy(i)?1:-1}return se(t.length,e.length)}var EL=55296,IL=57343;function iy(t){let e=t.charCodeAt(0);return e>=EL&&e<=IL}function Vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var cC="__name__",Dd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&$(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&$(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return se(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):fy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zn.fromString(e.substring(4,e.length-2))}},Te=class t extends Dd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},wL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Et=class t extends Dd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return wL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cC}static keyField(){return new t([cC])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new F(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Te.fromString(e))}static fromName(e){return new t(Te.fromString(e).popFirst(5))}static empty(){return new t(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Te(e.slice()))}};function QC(t,e,n){if(!n)throw new F(A.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YC(t,e,n,r){if(e===!0&&r===!0)throw new F(A.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uC(t){if(!H.isDocumentKey(t))throw new F(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lC(t){if(H.isDocumentKey(t))throw new F(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function nf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$(12329,{type:typeof t})}function Rt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=nf(t);throw new F(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ae(t,e){let n={typeString:t};return e&&(n.value=e),n}function Xo(t,e){if(!JC(t))throw new F(A.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new F(A.INVALID_ARGUMENT,n);return!0}var dC=-62135596800,fC=1e6,Re=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fC);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dC)throw new F(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fC}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xo(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-dC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:Ae("string",Re._jsonSchemaVersion),seconds:Ae("number"),nanoseconds:Ae("number")};var Z=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Re(0,0))}static max(){return new t(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ga=-1,bd=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};bd.UNKNOWN_ID=-1;function TL(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new Ci(i,H.empty(),e)}function DL(t){return new Ci(t.readTime,t.key,Ga)}var Ci=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Z.min(),H.empty(),Ga)}static max(){return new t(Z.max(),H.empty(),Ga)}};function bL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}var CL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function es(t){if(t.code!==A.FAILED_PRECONDITION||t.message!==CL)throw t;k("LocalStore","Unexpectedly lost primary lease")}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function SL(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ts(t){return t.name==="IndexedDbTransactionError"}var Ov=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),kv=-1;function rf(t){return t==null}function Wa(t){return t===0&&1/t==-1/0}function AL(t){return typeof t=="number"&&Number.isInteger(t)&&!Wa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ZC="";function RL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hC(e)),e=NL(t.get(n),e);return hC(e)}function NL(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case ZC:n+="";break;default:n+=o}}return n}function hC(t){return t+ZC+""}var ML="remoteDocuments",XC="owner";var eS="mutationQueues";var tS="mutations";var nS="documentMutations",xL="remoteDocumentsV14";var rS="remoteDocumentGlobal";var iS="targets";var oS="targetDocuments";var sS="targetGlobal",aS="collectionParents";var cS="clientMetadata";var uS="bundles";var lS="namedQueries";var PL="indexConfiguration";var OL="indexState";var kL="indexEntries";var dS="documentOverlays";var LL="globals";var FL=[eS,tS,nS,ML,iS,XC,sS,oS,cS,rS,aS,uS,lS],eY=[...FL,dS],VL=[eS,tS,nS,xL,iS,XC,sS,oS,cS,rS,aS,uS,lS,dS],UL=VL,jL=[...UL,PL,OL,kL];var tY=[...jL,LL];function pC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ce=class t{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ko(this.root,e,this.comparator,!0)}},ko=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},En=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qe=class t{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cd(this.data.getIterator())}getIteratorFrom(e){return new Cd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Cd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ht=class t{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new t([])}unionWith(e){let n=new Qe(Et.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Sd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var et=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Sd("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};et.EMPTY_BYTE_STRING=new et("");var BL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qn(t){if(ge(!!t,39018),typeof t=="string"){let e=0,n=BL.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:we(t.seconds),nanos:we(t.nanos)}}function we(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yn(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}var hS="server_timestamp",pS="__type__",gS="__previous_value__",mS="__local_write_time__";function of(t){return(t?.mapValue?.fields||{})[pS]?.stringValue===hS}function sf(t){let e=t.mapValue.fields[gS];return of(e)?sf(e):e}function Ka(t){let e=Qn(t.mapValue.fields[mS].timestampValue);return new Re(e.seconds,e.nanos)}var py=class{constructor(e,n,r,i,o,s,c,u,l,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h,this.apiKey=p}},Ad="(default)",Qa=class t{constructor(e,n){this.projectId=e,this.database=n||Ad}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Ad}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function yS(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new F(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qa(t.options.projectId,e)}var Lv="__type__",vS="__max__",hd={mapValue:{fields:{__type__:{stringValue:vS}}}},Fv="__vector__",Uo="value";function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?of(t)?4:ES(t)?9007199254740991:_S(t)?10:11:$(28295,{value:t})}function bn(t,e){if(t===e)return!0;let n=Or(t);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ka(t).isEqual(Ka(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Qn(i.timestampValue),c=Qn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Yn(i.bytesValue).isEqual(Yn(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return we(i.geoPointValue.latitude)===we(o.geoPointValue.latitude)&&we(i.geoPointValue.longitude)===we(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return we(i.integerValue)===we(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=we(i.doubleValue),c=we(o.doubleValue);return s===c?Wa(s)===Wa(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Vo(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(pC(s)!==pC(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!bn(s[u],c[u])))return!1;return!0})(t,e);default:return $(52216,{left:t})}}function Ya(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function jo(t,e){if(t===e)return 0;let n=Or(t),r=Or(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=we(o.integerValue||o.doubleValue),u=we(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return gC(t.timestampValue,e.timestampValue);case 4:return gC(Ka(t),Ka(e));case 5:return fy(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=Yn(o),u=Yn(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=se(c[l],u[l]);if(h!==0)return h}return se(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=se(we(o.latitude),we(s.latitude));return c!==0?c:se(we(o.longitude),we(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return mC(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},l=c[Uo]?.arrayValue,h=u[Uo]?.arrayValue,p=se(l?.values?.length||0,h?.values?.length||0);return p!==0?p:mC(l,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===hd.mapValue&&s===hd.mapValue)return 0;if(o===hd.mapValue)return 1;if(s===hd.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=fy(u[p],h[p]);if(m!==0)return m;let y=jo(c[u[p]],l[h[p]]);if(y!==0)return y}return se(u.length,h.length)})(t.mapValue,e.mapValue);default:throw $(23264,{he:n})}}function gC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);let n=Qn(t),r=Qn(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function mC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=jo(n[i],r[i]);if(o)return o}return se(n.length,r.length)}function Bo(t){return gy(t)}function gy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Qn(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Yn(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return H.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=gy(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${gy(n.fields[s])}`;return i+"}"})(t.mapValue):$(61005,{value:t})}function md(t){switch(Or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=sf(t);return e?16+md(e):16;case 5:return 2*t.stringValue.length;case 6:return Yn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+md(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Fr(r.fields,(o,s)=>{i+=o.length+md(s)}),i})(t.mapValue);default:throw $(13486,{value:t})}}function my(t){return!!t&&"integerValue"in t}function Vv(t){return!!t&&"arrayValue"in t}function yC(t){return!!t&&"nullValue"in t}function vC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yd(t){return!!t&&"mapValue"in t}function _S(t){return(t?.mapValue?.fields||{})[Lv]?.stringValue===Fv}function $a(t){if(t.geoPointValue)return{geoPointValue:x({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:x({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Fr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$a(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$a(t.arrayValue.values[n]);return e}return x({},t)}function ES(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===vS}var rY={mapValue:{fields:{[Lv]:{stringValue:Fv},[Uo]:{arrayValue:{}}}}};var _t=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$a(n)}setAll(e){let n=Et.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=$a(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];yd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t($a(this.value))}};function IS(t){let e=[];return Fr(t.fields,(n,r)=>{let i=new Et([n]);if(yd(r)){let o=IS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ht(e)}var on=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Z.min(),Z.min(),Z.min(),_t.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Z.min(),Z.min(),_t.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Z.min(),Z.min(),_t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Si=class{constructor(e,n){this.position=e,this.inclusive=n}};function _C(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),n.key):r=jo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function EC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}var Ai=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function HL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Rd=class{},Pe=class t extends Rd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vy(e,n,r):n==="array-contains"?new Iy(e,r):n==="in"?new wy(e,r):n==="not-in"?new Ty(e,r):n==="array-contains-any"?new Dy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _y(e,r):new Ey(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jo(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sn=class t extends Rd{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return wS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function wS(t){return t.op==="and"}function TS(t){return $L(t)&&wS(t)}function $L(t){for(let e of t.filters)if(e instanceof sn)return!1;return!0}function yy(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+Bo(t.value);if(TS(t))return t.filters.map(e=>yy(e)).join(",");{let e=t.filters.map(n=>yy(n)).join(",");return`${t.op}(${e})`}}function DS(t,e){return t instanceof Pe?(function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&bn(r.value,i.value)})(t,e):t instanceof sn?(function(r,i){return i instanceof sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&DS(s,i.filters[c]),!0):!1})(t,e):void $(19439)}function bS(t){return t instanceof Pe?(function(n){return`${n.field.canonicalString()} ${n.op} ${Bo(n.value)}`})(t):t instanceof sn?(function(n){return n.op.toString()+" {"+n.getFilters().map(bS).join(" ,")+"}"})(t):"Filter"}var vy=class extends Pe{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},_y=class extends Pe{constructor(e,n){super(e,"in",n),this.keys=CS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Ey=class extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=CS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function CS(t,e){return(e.arrayValue?.values||[]).map(n=>H.fromName(n.referenceValue))}var Iy=class extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Vv(n)&&Ya(n.arrayValue,this.value)}},wy=class extends Pe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ya(this.value.arrayValue,n)}},Ty=class extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ya(this.value.arrayValue,n)}},Dy=class extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Vv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ya(this.value.arrayValue,r))}};var by=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function IC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new by(t,e,n,r,i,o,s)}function Uv(t){let e=Q(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),rf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bo(r)).join(",")),e.Te=n}return e.Te}function jv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!EC(t.startAt,e.startAt)&&EC(t.endAt,e.endAt)}function Cy(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ho=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function zL(t,e,n,r,i,o,s,c){return new Ho(t,e,n,r,i,o,s,c)}function af(t){return new Ho(t)}function wC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qL(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function SS(t){return t.collectionGroup!==null}function Lo(t){let e=Q(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Qe(Et.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ai(o,r))}),n.has(Et.keyField().canonicalString())||e.Ie.push(new Ai(Et.keyField(),r))}return e.Ie}function In(t){let e=Q(t);return e.Ee||(e.Ee=GL(e,Lo(t))),e.Ee}function GL(t,e){if(t.limitType==="F")return IC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ai(i.field,o)});let n=t.endAt?new Si(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Si(t.startAt.position,t.startAt.inclusive):null;return IC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nd(t,e,n){return new Ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cf(t,e){return jv(In(t),In(e))&&t.limitType===e.limitType}function AS(t){return`${Uv(In(t))}|lt:${t.limitType}`}function xo(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>bS(i)).join(", ")}]`),rf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Bo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Bo(i)).join(",")),`Target(${r})`})(In(t))}; limitType=${t.limitType})`}function uf(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Lo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=_C(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,Lo(r),i)||r.endAt&&!(function(s,c,u){let l=_C(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,Lo(r),i))})(t,e)}function WL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RS(t){return(e,n)=>{let r=!1;for(let i of Lo(t)){let o=KL(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function KL(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?jo(u,l):$(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:t.dir})}}var Jn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return fS(this.inner)}size(){return this.innerSize}};var QL=new Ce(H.comparator);function Zn(){return QL}var NS=new Ce(H.comparator);function Ha(...t){let e=NS;for(let n of t)e=e.insert(n.key,n);return e}function MS(t){let e=NS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wi(){return za()}function xS(){return za()}function za(){return new Jn(t=>t.toString(),(t,e)=>t.isEqual(e))}var YL=new Ce(H.comparator),JL=new Qe(H.comparator);function oe(...t){let e=JL;for(let n of t)e=e.add(n);return e}var ZL=new Qe(se);function XL(){return ZL}function Bv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wa(e)?"-0":e}}function PS(t){return{integerValue:""+t}}function eF(t,e){return AL(e)?PS(e):Bv(t,e)}var $o=class{constructor(){this._=void 0}};function tF(t,e,n){return t instanceof zo?(function(i,o){let s={fields:{[pS]:{stringValue:hS},[mS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&of(o)&&(o=sf(o)),o&&(s.fields[gS]=o),{mapValue:s}})(n,e):t instanceof Ri?kS(t,e):t instanceof Ni?LS(t,e):(function(i,o){let s=OS(i,o),c=TC(s)+TC(i.Ae);return my(s)&&my(i.Ae)?PS(c):Bv(i.serializer,c)})(t,e)}function nF(t,e,n){return t instanceof Ri?kS(t,e):t instanceof Ni?LS(t,e):n}function OS(t,e){return t instanceof qo?(function(r){return my(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var zo=class extends $o{},Ri=class extends $o{constructor(e){super(),this.elements=e}};function kS(t,e){let n=FS(e);for(let r of t.elements)n.some(i=>bn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ni=class extends $o{constructor(e){super(),this.elements=e}};function LS(t,e){let n=FS(e);for(let r of t.elements)n=n.filter(i=>!bn(i,r));return{arrayValue:{values:n}}}var qo=class extends $o{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function TC(t){return we(t.integerValue||t.doubleValue)}function FS(t){return Vv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function rF(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ri&&i instanceof Ri||r instanceof Ni&&i instanceof Ni?Vo(r.elements,i.elements,bn):r instanceof qo&&i instanceof qo?bn(r.Ae,i.Ae):r instanceof zo&&i instanceof zo})(t.transform,e.transform)}var Sy=class{constructor(e,n){this.version=e,this.transformResults=n}},rn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function vd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Go=class{};function VS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wo(t.key,rn.none()):new Mi(t.key,t.data,rn.none());{let n=t.data,r=_t.empty(),i=new Qe(Et.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Cn(t.key,r,new Ht(i.toArray()),rn.none())}}function iF(t,e,n){t instanceof Mi?(function(i,o,s){let c=i.value.clone(),u=bC(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Cn?(function(i,o,s){if(!vd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=bC(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(US(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function qa(t,e,n,r){return t instanceof Mi?(function(o,s,c,u){if(!vd(o.precondition,s))return c;let l=o.value.clone(),h=CC(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Cn?(function(o,s,c,u){if(!vd(o.precondition,s))return c;let l=CC(o.fieldTransforms,u,s),h=s.data;return h.setAll(US(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,c){return vd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function oF(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=OS(r.transform,i||null);o!=null&&(n===null&&(n=_t.empty()),n.set(r.field,o))}return n||null}function DC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vo(r,i,(o,s)=>rF(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Mi=class extends Go{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Cn=class extends Go{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function US(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function bC(t,e,n){let r=new Map;ge(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,nF(s,c,n[i]))}return r}function CC(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,tF(o,s,e))}return r}var Wo=class extends Go{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ay=class extends Go{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ry=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&iF(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=xS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=VS(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(n,r)=>DC(n,r))&&Vo(this.baseMutations,e.baseMutations,(n,r)=>DC(n,r))}},Ny=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return YL})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var My=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Me,ue;function sF(t){switch(t){case A.OK:return $(64938);case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return $(15467,{code:t})}}function jS(t){if(t===void 0)return Kn("GRPC error has no .code"),A.UNKNOWN;switch(t){case Me.OK:return A.OK;case Me.CANCELLED:return A.CANCELLED;case Me.UNKNOWN:return A.UNKNOWN;case Me.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Me.INTERNAL:return A.INTERNAL;case Me.UNAVAILABLE:return A.UNAVAILABLE;case Me.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Me.NOT_FOUND:return A.NOT_FOUND;case Me.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Me.ABORTED:return A.ABORTED;case Me.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Me.DATA_LOSS:return A.DATA_LOSS;default:return $(39323,{code:t})}}(ue=Me||(Me={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";var aF=null;function cF(){return new TextEncoder}var uF=new zn([4294967295,4294967295],0);function SC(t){let e=cF().encode(t),n=new Zm;return n.update(e),new Uint8Array(n.digest())}function AC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zn([n,r],0),new zn([i,o],0)]}var Py=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ti(`Invalid padding: ${n}`);if(r<0)throw new Ti(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ti(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ti(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(zn.fromNumber(r)));return i.compare(uF)===1&&(i=new zn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=SC(e),[r,i]=AC(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let n=SC(e),[r,i]=AC(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.be(s)}}be(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ti=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Md=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ja.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Z.min(),i,new Ce(se),Zn(),oe())}},Ja=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,oe(),oe(),oe())}};var Fo=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}},xd=class{constructor(e,n){this.targetId=e,this.Ce=n}},Pd=class{constructor(e,n,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Od=class{constructor(){this.ve=0,this.Fe=RC(),this.Me=et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),r=oe();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new Ja(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=RC()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},Oy=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zn(),this.He=pd(),this.Je=pd(),this.Ze=new Ce(se)}Xe(e){for(let n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Cy(o))if(r===0){let s=new H(o.path);this.et(n,s,on.newNoDocument(s,Z.min()))}else ge(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}aF?.lt((function(h,p,m,y,S){let N={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},M=p.unchangedNames;return M&&(N.bloomFilter={applied:S===0,hashCount:M?.hashCount??0,bitmapLength:M?.bits?.bitmap?.length??0,padding:M?.bits?.padding??0,mightContain:L=>y?.mightContain(L)??!1}),N})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=Yn(r).toUint8Array()}catch(u){if(u instanceof Sd)return Pr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Py(s,i,o)}catch(u){return Pr(u instanceof Ti?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&Cy(c.target)){let u=new H(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,on.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.Ke())}});let r=oe();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Md(e,n,this.Ze,this.je,r);return this.je=Zn(),this.He=pd(),this.Je=pd(),this.Ze=new Ce(se),i}Ye(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Od,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Qe(se),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Qe(se),this.He=this.He.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||k("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Od),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function pd(){return new Ce(H.comparator)}function RC(){return new Ce(H.comparator)}var lF={asc:"ASCENDING",desc:"DESCENDING"},dF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fF={and:"AND",or:"OR"},ky=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ly(t,e){return t.useProto3Json||rf(e)?e:{value:e}}function kd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hF(t,e){return kd(t,e.toTimestamp())}function wn(t){return ge(!!t,49232),Z.fromTimestamp((function(n){let r=Qn(n);return new Re(r.seconds,r.nanos)})(t))}function Hv(t,e){return Fy(t,e).canonicalString()}function Fy(t,e){let n=(function(i){return new Te(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function HS(t){let e=Te.fromString(t);return ge(WS(e),10190,{key:e.toString()}),e}function Vy(t,e){return Hv(t.databaseId,e.path)}function oy(t,e){let n=HS(e);if(n.get(1)!==t.databaseId.projectId)throw new F(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(zS(n))}function $S(t,e){return Hv(t.databaseId,e)}function pF(t){let e=HS(t);return e.length===4?Te.emptyPath():zS(e)}function Uy(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zS(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function NC(t,e,n){return{name:Vy(t,e),fields:n.value.mapValue.fields}}function gF(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ge(h===void 0||typeof h=="string",58123),et.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),et.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let h=l.code===void 0?A.UNKNOWN:jS(l.code);return new F(h,l.message||"")})(s);n=new Pd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=oy(t,r.document.name),o=wn(r.document.updateTime),s=r.document.createTime?wn(r.document.createTime):Z.min(),c=new _t({mapValue:{fields:r.document.fields}}),u=on.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Fo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=oy(t,r.document),o=r.readTime?wn(r.readTime):Z.min(),s=on.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Fo([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=oy(t,r.document),o=r.removedTargetIds||[];n=new Fo([],o,i,null)}else{if(!("filter"in e))return $(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new xy(i,o),c=r.targetId;n=new xd(c,s)}}return n}function mF(t,e){let n;if(e instanceof Mi)n={update:NC(t,e.key,e.value)};else if(e instanceof Wo)n={delete:Vy(t,e.key)};else if(e instanceof Cn)n={update:NC(t,e.key,e.data),updateMask:bF(e.fieldMask)};else{if(!(e instanceof Ay))return $(16599,{dt:e.type});n={verify:Vy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof zo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ri)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ni)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof qo)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw $(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:hF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)})(t,e.precondition)),n}function yF(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?wn(i.updateTime):wn(o);return s.isEqual(Z.min())&&(s=wn(o)),new Sy(s,i.transformResults||[])})(n,e))):[]}function vF(t,e){return{documents:[$S(t,e.path)]}}function _F(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$S(t,i);let o=(function(l){if(l.length!==0)return GS(sn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Po(m.field),direction:wF(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Ly(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function EF(t){let e=pF(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ge(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=qS(p);return m instanceof sn&&TS(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Ai(Oo(S.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,rf(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Si(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Si(y,m)})(n.endAt)),zL(e,i,s,o,c,"F",u,l)}function IF(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Oo(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Oo(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Oo(n.unaryFilter.field);return Pe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Oo(n.unaryFilter.field);return Pe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Pe.create(Oo(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return sn.create(n.compositeFilter.filters.map(r=>qS(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}})(n.compositeFilter.op))})(t):$(30097,{filter:t})}function wF(t){return lF[t]}function TF(t){return dF[t]}function DF(t){return fF[t]}function Po(t){return{fieldPath:t.canonicalString()}}function Oo(t){return Et.fromServerFormat(t.fieldPath)}function GS(t){return t instanceof Pe?(function(n){if(n.op==="=="){if(vC(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NAN"}};if(yC(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vC(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NAN"}};if(yC(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(n.field),op:TF(n.op),value:n.value}}})(t):t instanceof sn?(function(n){let r=n.getFilters().map(i=>GS(i));return r.length===1?r[0]:{compositeFilter:{op:DF(n.op),filters:r}}})(t):$(54877,{filter:t})}function bF(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function WS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function KS(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}var Za=class t{constructor(e,n,r,i,o=Z.min(),s=Z.min(),c=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jy=class{constructor(e){this.yt=e}};function QS(t){let e=EF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nd(e,e.limit,"L"):e}var Ld=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(we(e.integerValue));else if("doubleValue"in e){let r=we(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Wa(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Qn(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Yn(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?ES(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):_S(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):$(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=Uo,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(we(o)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),H.fromName(e).path.forEach(r=>{this.Ft(n,60),this.$t(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Ld.Wt=new Ld;var By=class{constructor(){this.Sn=new Hy}addToCollectionParentIndex(e,n){return this.Sn.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(Ci.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},Hy=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qe(Te.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(Te.comparator)).toArray()}};var iY=new Uint8Array(0);var MC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YS=41943040,Bt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(YS,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);var Xa=class t{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new t(0)}static ar(){return new t(-1)}};var xC="LruGarbageCollector",CF=1048576;function PC([t,e],[n,r]){let i=se(t,n);return i===0?se(e,r):i}var $y=class{constructor(e){this.Pr=e,this.buffer=new Qe(PC),this.Tr=0}Ir(){return++this.Tr}Er(e){let n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();PC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},zy=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){k(xC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ts(n)?k(xC,"Ignoring IndexedDB error during garbage collection: ",n):await es(n)}await this.Ar(3e5)})}},qy=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return R.resolve(Ov.ce);let r=new $y(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(MC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MC):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Mo()<=ie.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function SF(t,e){return new qy(t,e)}var Gy=class{constructor(){this.changes=new Jn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Wy=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Ky=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&qa(r.mutation,i,Ht.empty(),Re.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){let i=wi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ha();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=Zn(),s=za(),c=(function(){return za()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Cn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),qa(h.mutation,l,h.mutation.getFieldMask(),Re.now())):s.set(l.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>c.set(l,new Wy(h,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,n){let r=za(),i=new Ce((s,c)=>s-c),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Ht.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||oe()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=xS();h.forEach(m=>{if(!o.has(m)){let y=VS(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return R.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return qL(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):SS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):R.resolve(wi()),c=Ga,u=o;return s.next(l=>R.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?R.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,oe())).next(h=>({batchId:c,changes:MS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Ha();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ha();return this.indexManager.getCollectionParents(e,o).next(c=>R.forEach(c,u=>{let l=(function(p,m){return new Ho(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,on.newInvalidDocument(h)))});let c=Ha();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&qa(h.mutation,l,Ht.empty(),Re.now()),uf(n,l)&&(c=c.insert(u,l))}),c})}};var Qy=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return R.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:wn(i.createTime)}})(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:QS(i.bundledQuery),readTime:wn(i.readTime)}})(n)),R.resolve()}};var Yy=class{constructor(){this.overlays=new Ce(H.comparator),this.Lr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let r=wi();return R.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.bt(e,n,o)}),R.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){let i=wi(),o=n.length+1,s=new H(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ce((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=wi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=wi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return R.resolve(c)}bt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new My(n,r));let o=this.Lr.get(n);o===void 0&&(o=oe(),this.Lr.set(n,o)),this.Lr.set(n,o.add(r.key))}};var Jy=class{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,R.resolve()}};var ec=class{constructor(){this.kr=new Qe(xe.Kr),this.qr=new Qe(xe.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){let r=new xe(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new xe(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){let n=new H(new Te([])),r=new xe(n,e),i=new xe(n,e+1),o=[];return this.qr.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let n=new H(new Te([])),r=new xe(n,e),i=new xe(n,e+1),o=oe();return this.qr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new xe(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},xe=class{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return H.comparator(e.key,n.key)||se(e.Hr,n.Hr)}static Ur(e,n){return se(e.Hr,n.Hr)||H.comparator(e.key,n.key)}};var Zy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Qe(xe.Kr)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ry(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Jr=this.Jr.add(new xe(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,n){return R.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?kv:this.Yn-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new xe(n,0),i=new xe(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(se);return n.forEach(i=>{let o=new xe(i,0),s=new xe(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),R.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new xe(new H(o),0),c=new Qe(se);return this.Jr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),R.resolve(this.Yr(c))}Yr(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return R.forEach(n.mutations,i=>{let o=new xe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){let r=new xe(n,0),i=this.Jr.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Xy=class{constructor(e){this.ti=e,this.docs=(function(){return new Ce(H.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():on.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Zn(),s=n.path,c=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||bL(DL(h),r)<=0||(i.has(h.key)||uf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,n,r,i){$(9500)}ni(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ev(this)}getSize(e){return R.resolve(this.size)}},ev=class extends Gy{constructor(e){super(),this.Mr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}};var tv=class{constructor(e){this.persistence=e,this.ri=new Jn(n=>Uv(n),jv),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.ii=0,this.si=new ec,this.targetCount=0,this.oi=Xa._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),R.resolve()}lr(e){this.ri.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.oi=new Xa(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.lr(n),R.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ri.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let r=this.ri.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),R.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let r=this.si.jr(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this.si.containsKey(n))}};var Fd=class{constructor(e,n){this._i={},this.overlays={},this.ai=new Ov(0),this.ui=!1,this.ui=!0,this.ci=new Jy,this.referenceDelegate=e(this),this.li=new tv(this),this.indexManager=new By,this.remoteDocumentCache=(function(i){return new Xy(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new jy(n),this.Pi=new Qy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Yy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Zy(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){k("MemoryPersistence","Starting transaction:",e);let i=new nv(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return R.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}},nv=class extends hy{constructor(e){super(),this.currentSequenceNumber=e}},rv=class t{constructor(e){this.persistence=e,this.Ri=new ec,this.Ai=null}static Vi(e){return new t(e)}get di(){if(this.Ai)return this.Ai;throw $(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),R.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.di,r=>{let i=H.fromPath(r);return this.mi(e,i).next(o=>{o||n.removeEntry(i,Z.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return R.or([()=>R.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Vd=class t{constructor(e,n){this.persistence=e,this.fi=new Jn(r=>RL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=SF(this,n)}static Vi(e,n){return new t(e,n)}Ti(){}Ii(e){return R.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){let n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return R.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?R.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Z.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),R.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),R.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),R.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),R.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=md(e.data.value)),n}wr(e,n,r){return R.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.fi.get(n);return R.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var iv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=oe(),i=oe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ov=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var sv=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Hb()?8:SL(We())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.gs(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ps(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ov;return this.ys(e,n,s).next(c=>{if(o.result=c,this.As)return this.ws(e,n,s,c.size)})}).next(()=>o.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Mo()<=ie.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),R.resolve()):(Mo()<=ie.DEBUG&&k("QueryEngine","Query:",xo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Mo()<=ie.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):R.resolve())}gs(e,n){if(wC(n))return R.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Nd(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=oe(...o);return this.fs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,c);return this.Ss(n,l,s,u.readTime)?this.gs(e,Nd(n,null,"F")):this.Ds(e,l,n,u)}))})))}ps(e,n,r,i){return wC(n)||i.isEqual(Z.min())?R.resolve(null):this.fs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ss(n,s,r,i)?R.resolve(null):(Mo()<=ie.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xo(n)),this.Ds(e,s,n,TL(i,Ga)).next(c=>c))})}bs(e,n){let r=new Qe(RS(e));return n.forEach((i,o)=>{uf(e,o)&&(r=r.add(o))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,n,r){return Mo()<=ie.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",xo(n)),this.fs.getDocumentsMatchingQuery(e,n,Ci.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var $v="LocalStore",AF=3e8,av=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Ce(se),this.Fs=new Jn(o=>Uv(o),jv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ky(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}};function RF(t,e,n,r){return new av(t,e,n,r)}async function JS(t,e){let n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=oe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ns:l,removedBatchIds:s,addedBatchIds:c}))})})}function NF(t,e){let n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,h){let p=l.batch,m=p.keys(),y=R.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(N=>{let M=l.docVersions.get(S);ge(M!==null,48541),N.version.compareTo(M)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=oe();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ZS(t){let e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function MF(t,e){let n=Q(t),r=e.snapshotVersion,i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(n.li.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.li.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(et.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,M,L){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=AF?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(m,y,h)&&c.push(n.li.updateTargetData(o,y))});let u=Zn(),l=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(xF(o,s,e.documentUpdates).next(h=>{u=h.Bs,l=h.Ls})),!r.isEqual(Z.min())){let h=n.li.getLastRemoteSnapshotVersion(o).next(p=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return R.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.vs=i,o))}function xF(t,e,n){let r=oe(),i=oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Zn();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):k($v,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Bs:s,Ls:i}})}function PF(t,e){let n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=kv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OF(t,e){let n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(o=>o?(i=o,R.resolve(i)):n.li.allocateTargetId(r).next(s=>(i=new Za(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function cv(t,e,n){let r=Q(t),i=r.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ts(s))throw s;k($v,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function OC(t,e,n){let r=Q(t),i=Z.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=Q(u),m=p.Fs.get(h);return m!==void 0?R.resolve(p.vs.get(m)):p.li.getTargetData(l,h)})(r,s,In(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:Z.min(),n?o:oe())).next(c=>(kF(r,WL(e),c),{documents:c,ks:o})))}function kF(t,e,n){let r=t.Ms.get(e)||Z.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ms.set(e,r)}var Ud=class{constructor(){this.activeTargetIds=XL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var uv=class{constructor(){this.vo=new Ud,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ud,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lv=class{Mo(e){}shutdown(){}};var kC="ConnectivityMonitor",jd=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){k(kC,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){k(kC,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gd=null;function dv(){return gd===null?gd=(function(){return 268435456+Math.round(2147483648*Math.random())})():gd++,"0x"+gd.toString(16)}var sy="RestConnection",LF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},fv=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Ad?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=dv(),c=this.Qo(e,n.toUriEncodedString());k(sy,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,o);let{host:l}=new URL(c),h=Ar(l);return this.zo(e,c,u,r,h).then(p=>(k(sy,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Pr(sy,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,n){let r=LF[e],i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var hv=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var ut="WebChannelConnection",Ba=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})},Bd=class t extends fv{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!t.c_){let e=ny();Ba(e,ty.STAT_EVENT,n=>{n.stat===fd.PROXY?k(ut,"STAT_EVENT: detected buffering proxy"):n.stat===fd.NOPROXY&&k(ut,"STAT_EVENT: detected no buffering proxy")}),t.c_=!0}}zo(e,n,r,i,o){let s=dv();return new Promise((c,u)=>{let l=new Xm;l.setWithCredentials(!0),l.listenOnce(ey.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ja.NO_ERROR:let p=l.getResponseJson();k(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case ja.TIMEOUT:k(ut,`RPC '${e}' ${s} timed out`),u(new F(A.DEADLINE_EXCEEDED,"Request time out"));break;case ja.HTTP_ERROR:let m=l.getStatus();if(k(ut,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let N=(function(L){let ne=L.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(ne)>=0?ne:A.UNKNOWN})(S.status);u(new F(N,S.message))}else u(new F(A.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(A.UNAVAILABLE,"Connection failed."));break;default:$(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{k(ut,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);k(ut,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}T_(e,n,r){let i=dv(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=o.join("");k(ut,`Creating RPC '${e}' stream ${i}: ${l}`,c);let h=s.createWebChannel(l,c);this.I_(h);let p=!1,m=!1,y=new hv({Ho:S=>{m?k(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(p||(k(ut,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),k(ut,`RPC '${e}' stream ${i} sending:`,S),h.send(S))},Jo:()=>h.close()});return Ba(h,No.EventType.OPEN,()=>{m||(k(ut,`RPC '${e}' stream ${i} transport opened.`),y.i_())}),Ba(h,No.EventType.CLOSE,()=>{m||(m=!0,k(ut,`RPC '${e}' stream ${i} transport closed`),y.o_(),this.E_(h))}),Ba(h,No.EventType.ERROR,S=>{m||(m=!0,Pr(ut,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),y.o_(new F(A.UNAVAILABLE,"The operation could not be completed")))}),Ba(h,No.EventType.MESSAGE,S=>{if(!m){let N=S.data[0];ge(!!N,16349);let M=N,L=M?.error||M[0]?.error;if(L){k(ut,`RPC '${e}' stream ${i} received error:`,L);let ne=L.status,me=(function(Ye){let w=Me[Ye];if(w!==void 0)return jS(w)})(ne),It=L.message;me===void 0&&(me=A.INTERNAL,It="Unknown error status: "+ne+" with message "+L.message),m=!0,y.o_(new F(me,It)),h.close()}else k(ut,`RPC '${e}' stream ${i} received:`,N),y.__(N)}}),t.u_(),setTimeout(()=>{y.s_()},0),y}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ry()}};function FF(t){return new Bd(t)}function ay(){return typeof document<"u"?document:null}function ic(t){return new ky(t,!0)}Bd.c_=!1;var Hd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var LC="PersistentStream",$d=class{constructor(e,n,r,i,o,s,c,u){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hd(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(Kn(n.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new F(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return k(LC,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(k(LC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pv=class extends $d{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=gF(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?wn(s.readTime):Z.min()})(e);return this.listener.J_(n,r)}Z_(e){let n={};n.database=Uy(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=Cy(u)?{documents:vF(o,u)}:{query:_F(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=BS(o,s.resumeToken);let l=Ly(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){c.readTime=kd(o,s.snapshotVersion.toTimestamp());let l=Ly(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=IF(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){let n={};n.database=Uy(this.serializer),n.removeTarget=e,this.K_(n)}},gv=class extends $d{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=yF(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=Uy(this.serializer),this.K_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>mF(this.serializer,r))};this.K_(n)}};var mv=class{},yv=class extends mv{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new F(A.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Fy(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(A.UNKNOWN,o.toString())})}jo(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.jo(e,Fy(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(A.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function VF(t,e,n,r){return new yv(t,e,n,r)}var vv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kn(n),this.aa=!1):k("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var xi="RemoteStore",_v=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(s=>{r.enqueueAndForget(async()=>{ki(this)&&(k(xi,"Restarting streams for network reachability change."),await(async function(u){let l=Q(u);l.Ea.add(4),await oc(l),l.Va.set("Unknown"),l.Ea.delete(4),await lf(l)})(this))})}),this.Va=new vv(r,i)}};async function lf(t){if(ki(t))for(let e of t.Ra)await e(!0)}async function oc(t){for(let e of t.Ra)await e(!1)}function XS(t,e){let n=Q(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Wv(n)?Gv(n):ns(n).O_()&&qv(n,e))}function zv(t,e){let n=Q(t),r=ns(n);n.Ia.delete(e),r.O_()&&eA(n,e),n.Ia.size===0&&(r.O_()?r.L_():ki(n)&&n.Va.set("Unknown"))}function qv(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ns(t).Z_(e)}function eA(t,e){t.da.$e(e),ns(t).X_(e)}function Gv(t){t.da=new Oy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ns(t).start(),t.Va.ua()}function Wv(t){return ki(t)&&!ns(t).x_()&&t.Ia.size>0}function ki(t){return Q(t).Ea.size===0}function tA(t){t.da=void 0}async function UF(t){t.Va.set("Online")}async function jF(t){t.Ia.forEach((e,n)=>{qv(t,e)})}async function BF(t,e){tA(t),Wv(t)?(t.Va.ha(e),Gv(t)):t.Va.set("Unknown")}async function HF(t,e,n){if(t.Va.set("Online"),e instanceof Pd&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.da.removeTarget(c))})(t,e)}catch(r){k(xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zd(t,r)}else if(e instanceof Fo?t.da.Xe(e):e instanceof xd?t.da.st(e):t.da.tt(e),!n.isEqual(Z.min()))try{let r=await ZS(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let c=o.da.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),eA(o,u);let p=new Za(h.target,u,l,h.sequenceNumber);qv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){k(xi,"Failed to raise snapshot:",r),await zd(t,r)}}async function zd(t,e,n){if(!ts(e))throw e;t.Ea.add(1),await oc(t),t.Va.set("Offline"),n||(n=()=>ZS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{k(xi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await lf(t)})}function nA(t,e){return e().catch(n=>zd(t,n,e))}async function df(t){let e=Q(t),n=kr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kv;for(;$F(e);)try{let i=await PF(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,zF(e,i)}catch(i){await zd(e,i)}rA(e)&&iA(e)}function $F(t){return ki(t)&&t.Ta.length<10}function zF(t,e){t.Ta.push(e);let n=kr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function rA(t){return ki(t)&&!kr(t).x_()&&t.Ta.length>0}function iA(t){kr(t).start()}async function qF(t){kr(t).ra()}async function GF(t){let e=kr(t);for(let n of t.Ta)e.ea(n.mutations)}async function WF(t,e,n){let r=t.Ta.shift(),i=Ny.from(r,e,n);await nA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await df(t)}async function KF(t,e){e&&kr(t).Y_&&await(async function(r,i){if((function(s){return sF(s)&&s!==A.ABORTED})(i.code)){let o=r.Ta.shift();kr(r).B_(),await nA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await df(r)}})(t,e),rA(t)&&iA(t)}async function FC(t,e){let n=Q(t);n.asyncQueue.verifyOperationInProgress(),k(xi,"RemoteStore received new credentials");let r=ki(n);n.Ea.add(3),await oc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await lf(n)}async function QF(t,e){let n=Q(t);e?(n.Ea.delete(2),await lf(n)):e||(n.Ea.add(2),await oc(n),n.Va.set("Unknown"))}function ns(t){return t.ma||(t.ma=(function(n,r,i){let o=Q(n);return o.sa(),new pv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:UF.bind(null,t),Yo:jF.bind(null,t),t_:BF.bind(null,t),J_:HF.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Wv(t)?Gv(t):t.Va.set("Unknown")):(await t.ma.stop(),tA(t))})),t.ma}function kr(t){return t.fa||(t.fa=(function(n,r,i){let o=Q(n);return o.sa(),new gv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:qF.bind(null,t),t_:KF.bind(null,t),ta:GF.bind(null,t),na:WF.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await df(t)):(await t.fa.stop(),t.Ta.length>0&&(k(xi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var Ev=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Kv(t,e){if(Kn("AsyncQueue",`${e}: ${t}`),ts(t))return new F(A.UNAVAILABLE,`${e}: ${t}`);throw t}var tc=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Ha(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var qd=class{constructor(){this.ga=new Ce(H.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},Pi=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,tc.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Iv=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},wv=class{constructor(){this.queries=VC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=Q(n),o=i.queries;i.queries=VC(),o.forEach((s,c)=>{for(let u of c.ba)u.onError(r)})})(this,new F(A.ABORTED,"Firestore shutting down"))}};function VC(){return new Jn(t=>AS(t),cf)}async function oA(t,e){let n=Q(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new Iv,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let c=Kv(s,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Qv(n)}async function sA(t,e){let n=Q(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YF(t,e){let n=Q(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.ba)c.Fa(i)&&(r=!0);s.wa=i}}r&&Qv(n)}function JF(t,e,n){let r=Q(t),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(n);r.queries.delete(e)}function Qv(t){t.Ca.forEach(e=>{e.next()})}var Tv,UC;(UC=Tv||(Tv={})).Ma="default",UC.Cache="cache";var Gd=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Pi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Pi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tv.Cache}};var Wd=class{constructor(e){this.key=e}},Kd=class{constructor(e){this.key=e}},Dv=class{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oe(),this.mutatedKeys=oe(),this.eu=RS(e),this.tu=new tc(this.eu)}get nu(){return this.Za}ru(e,n){let r=n?n.iu:new qd,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=uf(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?S!==N&&(r.track({type:3,doc:y}),M=!0):this.su(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(c=!0)),M&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Ss:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,S){let N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{Vt:M})}};return N(y)-N(S)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let c=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Xa;return this.Xa=u,s.length!==0||l?{snapshot:new Pi(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qd,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Kd(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Wd(r))}),n}cu(e){this.Za=e.ks,this.Ya=oe();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Pi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},Yv="SyncEngine",bv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Cv=class{constructor(e){this.key=e,this.hu=!1}},Sv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Jn(c=>AS(c),cf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ce(H.comparator),this.Au=new Map,this.Vu=new ec,this.du={},this.mu=new Map,this.fu=Xa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function ZF(t,e,n=!0){let r=fA(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await aA(r,e,n,!0),i}async function XF(t,e){let n=fA(t);await aA(n,e,!0,!1)}async function aA(t,e,n,r){let i=await OF(t.localStore,In(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=await eV(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&XS(t.remoteStore,i),c}async function eV(t,e,n,r,i){t.pu=(p,m,y)=>(async function(N,M,L,ne){let me=M.view.ru(L);me.Ss&&(me=await OC(N.localStore,M.query,!1).then(({documents:w})=>M.view.ru(w,me)));let It=ne&&ne.targetChanges.get(M.targetId),$t=ne&&ne.targetMismatches.get(M.targetId)!=null,Ye=M.view.applyChanges(me,N.isPrimaryClient,It,$t);return BC(N,M.targetId,Ye.au),Ye.snapshot})(t,p,m,y);let o=await OC(t.localStore,e,!0),s=new Dv(e,o.ks),c=s.ru(o.documents),u=Ja.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);BC(t,n,l.au);let h=new bv(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function tV(t,e,n){let r=Q(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!cf(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&zv(r.remoteStore,i.targetId),Av(r,i.targetId)}).catch(es)):(Av(r,i.targetId),await cv(r.localStore,i.targetId,!0))}async function nV(t,e){let n=Q(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zv(n.remoteStore,r.targetId))}async function rV(t,e,n){let r=lV(t);try{let i=await(function(s,c){let u=Q(s),l=Re.now(),h=c.reduce((y,S)=>y.add(S.key),oe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Zn(),N=oe();return u.xs.getEntries(y,h).next(M=>{S=M,S.forEach((L,ne)=>{ne.isValidDocument()||(N=N.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(M=>{p=M;let L=[];for(let ne of c){let me=oF(ne,p.get(ne.key).overlayedDocument);me!=null&&L.push(new Cn(ne.key,me,IS(me.value.mapValue),rn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,c)}).next(M=>{m=M;let L=M.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,M.batchId,L)})}).then(()=>({batchId:m.batchId,changes:MS(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.du[s.currentUser.toKey()];l||(l=new Ce(se)),l=l.insert(c,u),s.du[s.currentUser.toKey()]=l})(r,i.batchId,n),await sc(r,i.changes),await df(r.remoteStore)}catch(i){let o=Kv(i,"Failed to persist write");n.reject(o)}}async function cA(t,e){let n=Q(t);try{let r=await MF(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ge(s.hu,14607):i.removedDocuments.size>0&&(ge(s.hu,42227),s.hu=!1))}),await sc(n,r,e)}catch(r){await es(r)}}function jC(t,e,n){let r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=Q(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.ba)m.va(c)&&(l=!0)}),l&&Qv(u)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iV(t,e,n){let r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ce(H.comparator);s=s.insert(o,on.newNoDocument(o,Z.min()));let c=oe().add(o),u=new Md(Z.min(),new Map,new Ce(se),s,c);await cA(r,u),r.Ru=r.Ru.remove(o),r.Au.delete(e),Jv(r)}else await cv(r.localStore,e,!1).then(()=>Av(r,e,n)).catch(es)}async function oV(t,e){let n=Q(t),r=e.batch.batchId;try{let i=await NF(n.localStore,e);lA(n,r,null),uA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sc(n,i)}catch(i){await es(i)}}async function sV(t,e,n){let r=Q(t);try{let i=await(function(s,c){let u=Q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(ge(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);lA(r,e,n),uA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sc(r,i)}catch(i){await es(i)}}function uA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function lA(t,e,n){let r=Q(t),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Av(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||dA(t,r)})}function dA(t,e){t.Eu.delete(e.path.canonicalString());let n=t.Ru.get(e);n!==null&&(zv(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Jv(t))}function BC(t,e,n){for(let r of n)r instanceof Wd?(t.Vu.addReference(r.key,e),aV(t,r)):r instanceof Kd?(k(Yv,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||dA(t,r.key)):$(19791,{wu:r})}function aV(t,e){let n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(k(Yv,"New document in limbo: "+n),t.Eu.add(r),Jv(t))}function Jv(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new H(Te.fromString(e)),r=t.fu.next();t.Au.set(r,new Cv(n)),t.Ru=t.Ru.insert(n,r),XS(t.remoteStore,new Za(In(af(n.path)),r,"TargetPurposeLimboResolution",Ov.ce))}}async function sc(t,e,n){let r=Q(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=iv.Es(u.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Pu.J_(i),await(async function(u,l){let h=Q(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>R.forEach(l,m=>R.forEach(m.Ts,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>R.forEach(m.Is,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ts(p))throw p;k($v,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.vs.get(m),S=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(S);h.vs=h.vs.insert(m,N)}}})(r.localStore,o))}async function cV(t,e){let n=Q(t);if(!n.currentUser.isEqual(e)){k(Yv,"User change. New user:",e.toKey());let r=await JS(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new F(A.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sc(n,r.Ns)}}function uV(t,e){let n=Q(t),r=n.Au.get(e);if(r&&r.hu)return oe().add(r.key);{let i=oe(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let c=n.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function fA(t){let e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iV.bind(null,e),e.Pu.J_=YF.bind(null,e.eventManager),e.Pu.yu=JF.bind(null,e.eventManager),e}function lV(t){let e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sV.bind(null,e),e}var Zv=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=ic(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return RF(this.persistence,new sv,n.initialUser,this.serializer)}Cu(n){return new Fd(rv.Vi,this.serializer)}Du(n){return new uv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),Qd=class extends Zv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof Vd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new zy(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new Fd(r=>Vd.Vi(r,n),this.serializer)}};var hA=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cV.bind(null,this.syncEngine),await QF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new wv})()}createDatastore(n){let r=ic(n.databaseInfo.databaseId),i=FF(n.databaseInfo);return VF(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new _v(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>jC(this.syncEngine,r,0),(function(){return jd.v()?new jd:new lv})())}createSyncEngine(n,r){return(function(o,s,c,u,l,h,p){let m=new Sv(o,s,c,u,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Q(r);k(xi,"RemoteStore shutting down."),i.Ea.add(5),await oc(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var Yd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Lr="FirestoreClient",Rv=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=Ke.UNAUTHENTICATED,this.clientId=bi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{k(Lr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(k(Lr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Kv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function cy(t,e){t.asyncQueue.verifyOperationInProgress(),k(Lr,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await JS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function HC(t,e){t.asyncQueue.verifyOperationInProgress();let n=await dV(t);k(Lr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>FC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>FC(e.remoteStore,i)),t._onlineComponents=e}async function dV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){k(Lr,"Using user provided OfflineComponentProvider");try{await cy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===A.FAILED_PRECONDITION||i.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Pr("Error using user provided cache. Falling back to memory cache: "+n),await cy(t,new Zv)}}else k(Lr,"Using default OfflineComponentProvider"),await cy(t,new Qd(void 0));return t._offlineComponents}async function pA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(k(Lr,"Using user provided OnlineComponentProvider"),await HC(t,t._uninitializedComponentsProvider._online)):(k(Lr,"Using default OnlineComponentProvider"),await HC(t,new hA))),t._onlineComponents}function fV(t){return pA(t).then(e=>e.syncEngine)}async function gA(t){let e=await pA(t),n=e.eventManager;return n.onListen=ZF.bind(null,e.syncEngine),n.onUnlisten=tV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nV.bind(null,e.syncEngine),n}function mA(t,e,n={}){let r=new nn;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,l){let h=new Yd({next:m=>{h.Nu(),s.enqueueAndForget(()=>sA(o,p));let y=m.docs.has(c);!y&&m.fromCache?l.reject(new F(A.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new F(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Gd(af(c.path),h,{includeMetadataChanges:!0,Ka:!0});return oA(o,p)})(await gA(t),t.asyncQueue,e,n,r)),r.promise}function yA(t,e,n={}){let r=new nn;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,l){let h=new Yd({next:m=>{h.Nu(),s.enqueueAndForget(()=>sA(o,p)),m.fromCache&&u.source==="server"?l.reject(new F(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Gd(c,h,{includeMetadataChanges:!0,Ka:!0});return oA(o,p)})(await gA(t),t.asyncQueue,e,n,r)),r.promise}function vA(t,e){let n=new nn;return t.asyncQueue.enqueueAndForget(async()=>rV(await fV(t),e,n)),n.promise}function _A(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var hV="ComponentProvider",$C=new Map;function pV(t,e,n,r,i){return new py(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,_A(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var EA="firestore.googleapis.com",zC=!0,Jd=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EA,this.ssl=zC}else this.host=e.host,this.ssl=e.ssl??zC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CF)throw new F(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_A(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new F(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new F(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new F(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ko=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ed;switch(r.type){case"firstParty":return new dy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=$C.get(n);r&&(k(hV,"Removing Datastore"),$C.delete(n),r.terminate())})(this),Promise.resolve()}};function IA(t,e,n,r={}){t=Rt(t,Ko);let i=Ar(e),o=t._getSettings(),s=ae(x({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(od(`https://${c}`),sd("Firestore",!0)),o.host!==EA&&o.host!==c&&Pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=ae(x({},o),{host:c,ssl:i,emulatorOptions:r});if(!en(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Ke.MOCK_USER;else{l=Lb(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new F(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ke(p)}t._authCredentials=new uy(new _d(l,h))}}var Qo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ue=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xo(n,t._jsonSchema))return new t(e,r||null,new H(Te.fromString(n.referencePath)))}};Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:Ae("string",Ue._jsonSchemaVersion),referencePath:Ae("string")};var Gn=class t extends Qo{constructor(e,n,r){super(e,n,af(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function ff(t,e,...n){if(t=Ve(t),QC("collection","path",e),t instanceof Ko){let r=Te.fromString(e,...n);return lC(r),new Gn(t,null,r)}{if(!(t instanceof Ue||t instanceof Gn))throw new F(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Te.fromString(e,...n));return lC(r),new Gn(t.firestore,null,r)}}function Vr(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=bi.newId()),QC("doc","path",e),t instanceof Ko){let r=Te.fromString(e,...n);return uC(r),new Ue(t,null,new H(r))}{if(!(t instanceof Ue||t instanceof Gn))throw new F(A.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Te.fromString(e,...n));return uC(r),new Ue(t.firestore,t instanceof Gn?t.converter:null,new H(r))}}var qC="AsyncQueue",Zd=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hd(this,"async_queue_retry"),this._c=()=>{let r=ay();r&&k(qC,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=ay();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=ay();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new nn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ts(e))throw e;k(qC,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Kn("INTERNAL UNHANDLED ERROR: ",GC(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=Ev.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&$(47125,{Pc:GC(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function GC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var an=class extends Ko{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Zd,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Zd(e),this._firestoreClient=void 0,await e}}};function Xv(t,e){let n=typeof t=="object"?t:ld(),r=typeof t=="string"?t:e||Ad,i=Ua(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=kb("firestore");o&&IA(i,...o)}return i}function ac(t){if(t._terminated)throw new F(A.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gV(t),t._firestoreClient}function gV(t){let e=t._freezeSettings(),n=pV(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Rv(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var Tn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(et.fromBase64String(e))}catch(n){throw new F(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xo(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Tn._jsonSchemaVersion="firestore/bytes/1.0",Tn._jsonSchema={type:Ae("string",Tn._jsonSchemaVersion),bytes:Ae("string")};var Oi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Yo=class{constructor(e){this._methodName=e}};var Wn=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Xo(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Wn._jsonSchemaVersion="firestore/geoPoint/1.0",Wn._jsonSchema={type:Ae("string",Wn._jsonSchemaVersion),latitude:Ae("number"),longitude:Ae("number")};var Dn=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xo(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new F(A.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Dn._jsonSchemaVersion="firestore/vectorValue/1.0",Dn._jsonSchema={type:Ae("string",Dn._jsonSchemaVersion),vectorValues:Ae("object")};var mV=/^__.*__$/,Nv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mi(e,this.data,n,this.fieldTransforms)}},Xd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Cn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function wA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{dataSource:t})}}var Mv=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new t(x(x({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return tf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(wA(this.dataSource)&&mV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},xv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ic(e)}createContext(e,n,r,i=!1){return new Mv({dataSource:e,methodName:n,targetDoc:r,path:Et.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hf(t){let e=t._freezeSettings(),n=ic(t._databaseId);return new xv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function e_(t,e,n,r,i,o={}){let s=t.createContext(o.merge||o.mergeFields?2:0,e,n,i);t_("Data must be an object, but it was:",s,r);let c=bA(r,s),u,l;if(o.merge)u=new Ht(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Jo(e,p,n);if(!s.contains(m))throw new F(A.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);SA(h,m)||h.push(m)}u=new Ht(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Nv(new _t(c),u,l)}var ef=class t extends Yo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function TA(t,e,n,r){let i=t.createContext(1,e,n);t_("Data must be an object, but it was:",i,r);let o=[],s=_t.empty();Fr(r,(u,l)=>{let h=n_(e,u,n);l=Ve(l);let p=i.childContextForFieldPath(h);if(l instanceof ef)o.push(h);else{let m=pf(l,p);m!=null&&(o.push(h),s.set(h,m))}});let c=new Ht(o);return new Xd(s,c,i.fieldTransforms)}function DA(t,e,n,r,i,o){let s=t.createContext(1,e,n),c=[Jo(e,r,n)],u=[i];if(o.length%2!=0)throw new F(A.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(Jo(e,o[m])),u.push(o[m+1]);let l=[],h=_t.empty();for(let m=c.length-1;m>=0;--m)if(!SA(l,c[m])){let y=c[m],S=u[m];S=Ve(S);let N=s.childContextForFieldPath(y);if(S instanceof ef)l.push(y);else{let M=pf(S,N);M!=null&&(l.push(y),h.set(y,M))}}let p=new Ht(l);return new Xd(h,p,s.fieldTransforms)}function pf(t,e){if(CA(t=Ve(t)))return t_("Unsupported field value:",e,t),bA(t,e);if(t instanceof Yo)return(function(r,i){if(!wA(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=pf(c,i.childContextForArray(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Re.fromDate(r);return{timestampValue:kd(i.serializer,o)}}if(r instanceof Re){let o=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kd(i.serializer,o)}}if(r instanceof Wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tn)return{bytesValue:BS(i.serializer,r._byteString)};if(r instanceof Ue){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Dn)return(function(s,c){let u=s instanceof Dn?s.toArray():s;return{mapValue:{fields:{[Lv]:{stringValue:Fv},[Uo]:{arrayValue:{values:u.map(h=>{if(typeof h!="number")throw c.createError("VectorValues must only contain numeric values.");return Bv(c.serializer,h)})}}}}}})(r,i);if(KS(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${nf(r)}`)})(t,e)}function bA(t,e){let n={};return fS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(t,(r,i)=>{let o=pf(i,e.childContextForField(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function CA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof Wn||t instanceof Tn||t instanceof Ue||t instanceof Yo||t instanceof Dn||KS(t))}function t_(t,e,n){if(!CA(n)||!JC(n)){let r=nf(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Jo(t,e,n){if((e=Ve(e))instanceof Oi)return e._internalPath;if(typeof e=="string")return n_(t,e);throw tf("Field path arguments must be of type string or ",t,!1,void 0,n)}var yV=new RegExp("[~\\*/\\[\\]]");function n_(t,e,n){if(e.search(yV)>=0)throw tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Oi(...e.split("."))._internalPath}catch{throw tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(A.INVALID_ARGUMENT,c+t+u)}function SA(t,e){return t.some(n=>n.isEqual(e))}var nc=class{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return we(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Fr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[Uo].arrayValue?.values?.map(r=>we(r.doubleValue));return new Dn(n)}convertGeoPoint(e){return new Wn(we(e.latitude),we(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=sf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ka(e));default:return null}}convertTimestamp(e){let n=Qn(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Te.fromString(e);ge(WS(r),9688,{name:e});let i=new Qa(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(n)||Kn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};var rc=class extends nc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}};var AA="@firebase/firestore",RA="4.10.0";var gf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new r_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let n=this._document.data.field(Jo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},r_=class extends gf{data(){return super.data()}};function IV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function NA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Li=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Fi=class t extends gf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new rs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Jo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(A.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fi._jsonSchema={type:Ae("string",Fi._jsonSchemaVersion),bundleSource:Ae("string","DocumentSnapshot"),bundleName:Ae("string"),bundle:Ae("string")};var rs=class extends Fi{data(e={}){return super.data(e)}},is=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Li(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rs(this._firestore,this._userDataWriter,r.key,r,new Li(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new rs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Li(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new rs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Li(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:wV(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(A.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bi.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function wV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:t})}}is._jsonSchemaVersion="firestore/querySnapshot/1.0",is._jsonSchema={type:Ae("string",is._jsonSchemaVersion),bundleSource:Ae("string","QuerySnapshot"),bundleName:Ae("string"),bundle:Ae("string")};function MA(t){t=Rt(t,Ue);let e=Rt(t.firestore,an),n=ac(e);return mA(n,t._key).then(r=>TV(e,t,r))}function xA(t){t=Rt(t,Qo);let e=Rt(t.firestore,an),n=ac(e),r=new rc(e);return IV(t._query),yA(n,t._query).then(i=>new is(e,r,t,i))}function PA(t,e,n){t=Rt(t,Ue);let r=Rt(t.firestore,an),i=NA(t.converter,e,n),o=hf(r);return mf(r,[e_(o,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,rn.none())])}function OA(t,e,n,...r){t=Rt(t,Ue);let i=Rt(t.firestore,an),o=hf(i),s;return s=typeof(e=Ve(e))=="string"||e instanceof Oi?DA(o,"updateDoc",t._key,e,n,r):TA(o,"updateDoc",t._key,e),mf(i,[s.toMutation(t._key,rn.exists(!0))])}function kA(t){return mf(Rt(t.firestore,an),[new Wo(t._key,rn.none())])}function LA(t,e){let n=Rt(t.firestore,an),r=Vr(t),i=NA(t.converter,e),o=hf(t.firestore);return mf(n,[e_(o,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function mf(t,e){let n=ac(t);return vA(n,e)}function TV(t,e,n){let r=n.docs.get(e._key),i=new rc(t);return new Fi(t,i,e._key,r,new Li(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){WC(xr),Mr(new jt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new an(new Id(r.getProvider("auth-internal")),new Td(s,r.getProvider("app-check-internal")),yS(s,i),s);return o=x({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),tn(AA,RA,e),tn(AA,RA,"esm2020")})();var DV="firebase",bV="12.8.0";tn(DV,bV,"app");function JA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ZA=JA,XA=new Hn("auth","Firebase",JA());var wf=new Rr("@firebase/auth");function CV(t,...e){wf.logLevel<=ie.WARN&&wf.warn(`Auth (${xr}): ${t}`,...e)}function vf(t,...e){wf.logLevel<=ie.ERROR&&wf.error(`Auth (${xr}): ${t}`,...e)}function An(t,...e){throw I_(t,...e)}function cn(t,...e){return I_(t,...e)}function E_(t,e,n){let r=ae(x({},ZA()),{[e]:n});return new Hn("auth","Firebase",r).create(e,{appName:t.name})}function Vi(t){return E_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SV(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(t,"argument-error"),E_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function I_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XA.create(t,...e)}function G(t,e,...n){if(!t)throw I_(e,...n)}function Xn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw vf(e),new Error(e)}function tr(t,e){t||Xn(e)}function s_(){return typeof self<"u"&&self.location?.href||""}function AV(){return FA()==="http:"||FA()==="https:"}function FA(){return typeof self<"u"&&self.location?.protocol||null}function RV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AV()||Ub()||"connection"in navigator)?navigator.onLine:!0}function NV(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ui=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,tr(n>e,"Short delay should be less than long delay!"),this.isMobile=Fb()||jb()}get(){return RV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function w_(t,e){tr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Tf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var MV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var xV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PV=new Ui(3e4,6e4);function T_(t,e){return t.tenantId&&!e.tenantId?ae(x({},e),{tenantId:t.tenantId}):e}async function ss(t,e,n,r,i={}){return e0(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let c=Ro(x({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=x({method:e,headers:u},o);return Vb()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Ar(t.emulatorConfig.host)&&(l.credentials="include"),Tf.fetch()(await t0(t,t.config.apiHost,n,c),l)})}async function e0(t,e,n){t._canInitEmulator=!1;let r=x(x({},MV),e);try{let i=new a_(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw yf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw yf(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw yf(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw yf(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw E_(t,h,l);An(t,h)}}catch(i){if(i instanceof St)throw i;An(t,"network-request-failed",{message:String(i)})}}async function OV(t,e,n,r,i={}){let o=await ss(t,e,n,r,i);return"mfaPendingCredential"in o&&An(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function t0(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?w_(t.config,i):`${t.config.apiScheme}://${i}`;return xV.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var a_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),PV.get())})}};function yf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=cn(t,e,r);return i.customData._tokenResponse=n,i}async function kV(t,e){return ss(t,"POST","/v1/accounts:delete",e)}async function Df(t,e){return ss(t,"POST","/v1/accounts:lookup",e)}function cc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n0(t,e=!1){let n=Ve(t),r=await n.getIdToken(e),i=D_(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:cc(i_(i.auth_time)),issuedAtTime:cc(i_(i.iat)),expirationTime:cc(i_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function i_(t){return Number(t)*1e3}function D_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vf("JWT malformed, contained fewer than 3 sections"),null;try{let i=rd(n);return i?JSON.parse(i):(vf("Failed to decode base64 JWT payload"),null)}catch(i){return vf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function VA(t){let e=D_(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof St&&LV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function LV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var c_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var dc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function bf(t){let e=t.auth,n=await t.getIdToken(),r=await lc(t,Df(e,{idToken:n}));G(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?i0(i.providerUserInfo):[],s=FV(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new dc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,h)}async function r0(t){let e=Ve(t);await bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function i0(t){return t.map(r=>{var i=r,{providerId:e}=i,n=Oc(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function VV(t,e){let n=await e0(t,{},async()=>{let r=Ro({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await t0(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Ar(t.emulatorConfig.host)&&(u.credentials="include"),Tf.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UV(t,e){return ss(t,"POST","/v2/accounts:revokeToken",T_(t,e))}var uc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");let n=VA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await VV(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(G(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(G(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Xn("not implemented")}};function Ur(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var jr=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=Oc(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new c_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await lc(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return n0(this,e)}reload(){return r0(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>x({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(ae(x({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(At(this.auth.app))return Promise.reject(Vi(this.auth));let e=await this.getIdToken();return await lc(this,kV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ae(x({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>x({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:S,stsTokenManager:N}=n;G(p&&N,e,"internal-error");let M=uc.fromJSON(this.name,N);G(typeof p=="string",e,"internal-error"),Ur(r,e.name),Ur(i,e.name),G(typeof m=="boolean",e,"internal-error"),G(typeof y=="boolean",e,"internal-error"),Ur(o,e.name),Ur(s,e.name),Ur(c,e.name),Ur(u,e.name),Ur(l,e.name),Ur(h,e.name);let L=new t({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:c,stsTokenManager:M,createdAt:l,lastLoginAt:h});return S&&Array.isArray(S)&&(L.providerData=S.map(ne=>x({},ne))),u&&(L._redirectEventId=u),L}static async _fromIdTokenResponse(e,n,r=!1){let i=new uc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bf(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];G(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?i0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new uc;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var UA=new Map;function er(t){tr(t instanceof Function,"Expected a class definition");let e=UA.get(t);return e?(tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UA.set(t,e),e)}var jV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),u_=jV;function _f(t,e,n){return`firebase:${t}:${e}:${n}`}var Cf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=_f(this.userKey,i.apiKey,o),this.fullPersistenceKey=_f("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Df(this.auth,{idToken:e}).catch(()=>{});return n?jr._fromGetAccountInfoResponse(this.auth,n,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(er(u_),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||er(u_),s=_f(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await Df(e,{idToken:h}).catch(()=>{});if(!m)break;p=await jr._fromGetAccountInfoResponse(e,m,h)}else p=jr._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&await o._set(s,c.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function jA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(l0(e))return"Blackberry";if(d0(e))return"Webos";if(s0(e))return"Safari";if((e.includes("chrome/")||a0(e))&&!e.includes("edge/"))return"Chrome";if(u0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function o0(t=We()){return/firefox\//i.test(t)}function s0(t=We()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a0(t=We()){return/crios\//i.test(t)}function c0(t=We()){return/iemobile/i.test(t)}function u0(t=We()){return/android/i.test(t)}function l0(t=We()){return/blackberry/i.test(t)}function d0(t=We()){return/webos/i.test(t)}function b_(t=We()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BV(t=We()){return b_(t)&&!!window.navigator?.standalone}function HV(){return Bb()&&document.documentMode===10}function f0(t=We()){return b_(t)||u0(t)||d0(t)||l0(t)||/windows phone/i.test(t)||c0(t)}function h0(t,e=[]){let n;switch(t){case"Browser":n=jA(We());break;case"Worker":n=`${jA(We())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xr}/${r}`}var l_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function $V(t,e={}){return ss(t,"GET","/v2/passwordPolicy",T_(t,e))}var zV=6,d_=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var f_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sf(this),this.idTokenSubscription=new Sf(this),this.beforeStateQueue=new l_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=er(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Cf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Df(this,{idToken:e}),r=await jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(At(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(At(this.app))return Promise.reject(Vi(this));let n=e?Ve(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return At(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return At(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await $V(this),n=new d_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await UV(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&er(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await Cf.create(this,[er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(At(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&CV(`Error while retrieving App Check token: ${e.error}`),e?.token}};function kf(t){return Ve(t)}var Sf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qb(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var C_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qV(t){C_=t}function GV(t){return C_.loadJS(t)}function WV(){return C_.gapiScript}function p0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function g0(t,e){let n=Ua(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(en(o,e??{}))return i;An(i,"already-initialized")}return n.initialize({options:e})}function KV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(er);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function m0(t,e,n){let r=kf(t);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=y0(e),{host:s,port:c}=QV(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(en(l,r.config.emulator)&&en(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ar(s)?(od(`${o}//${s}${u}`),sd("Auth",!0)):i||YV()}function y0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QV(t){let e=y0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:BA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:BA(s)}}}function BA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function YV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var fc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}};async function os(t,e){return OV(t,"POST","/v1/accounts:signInWithIdp",T_(t,e))}var JV="http://localhost",Af=class t extends fc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let c=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=c,o=Oc(c,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return os(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,os(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,os(e,n)}buildRequest(){let e={requestUri:JV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ro(n)}return e}};var hc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Rf=class extends hc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var S_=(()=>{class t extends Rf{constructor(){super("github.com")}static credential(n){return Af._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:n})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch{return null}}}t.GITHUB_SIGN_IN_METHOD="github.com",t.PROVIDER_ID="github.com";return t})();var pc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await jr._fromIdTokenResponse(e,r,i),s=HA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=HA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function HA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var h_=class t extends St{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function v0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?h_._fromErrorAndOperation(t,o,e,r):o})}async function ZV(t,e,n=!1){let r=await lc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pc._forOperation(t,"link",r)}async function XV(t,e,n=!1){let{auth:r}=t;if(At(r.app))return Promise.reject(Vi(r));let i="reauthenticate";try{let o=await lc(t,v0(r,i,e,t),n);G(o.idToken,r,"internal-error");let s=D_(o.idToken);G(s,r,"internal-error");let{sub:c}=s;return G(t.uid===c,r,"user-mismatch"),pc._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&An(r,"user-mismatch"),o}}async function e2(t,e,n=!1){if(At(t.app))return Promise.reject(Vi(t));let r="signIn",i=await v0(t,r,e),o=await pc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function _0(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function E0(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function A_(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}function R_(t){return Ve(t).signOut()}var Nf="__sak";var Mf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nf,"1"),this.storage.removeItem(Nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var t2=1e3,n2=10,r2=(()=>{class t extends Mf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);HV()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,n2):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},t2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),I0=r2;var i2=(()=>{class t extends Mf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),N_=i2;function o2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var s2=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(async h=>h(r.origin,s)),l=await o2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function M_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var p_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=M_("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Sn(){return window}function a2(t){Sn().location.href=t}function w0(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function c2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u2(){return navigator?.serviceWorker?.controller||null}function l2(){return w0()?self:null}var T0="firebaseLocalStorageDb",d2=1,xf="firebaseLocalStorage",D0="fbase_key",ji=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Lf(t,e){return t.transaction([xf],e?"readwrite":"readonly").objectStore(xf)}function f2(){let t=indexedDB.deleteDatabase(T0);return new ji(t).toPromise()}function g_(){let t=indexedDB.open(T0,d2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(xf,{keyPath:D0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(xf)?e(r):(r.close(),await f2(),e(await g_()))})})}async function $A(t,e,n){let r=Lf(t,!0).put({[D0]:e,value:n});return new ji(r).toPromise()}async function h2(t,e){let n=Lf(t,!1).get(e),r=await new ji(n).toPromise();return r===void 0?null:r.value}function zA(t,e){let n=Lf(t,!0).delete(e);return new ji(n).toPromise()}var p2=800,g2=3,m2=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await g_(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>g2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return w0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=s2._getInstance(l2()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await c2(),!this.activeServiceWorker)return;this.sender=new p_(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||u2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await g_();return await $A(n,Nf,"1"),await zA(n,Nf),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>$A(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>h2(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>zA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Lf(o,!1).getAll();return new ji(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),b0=m2;var bJ=p0("rcb"),CJ=new Ui(3e4,6e4);function C0(t,e){return e?er(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var gc=class extends fc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return os(e,this._buildIdpRequest())}_linkToIdToken(e,n){return os(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return os(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function y2(t){return e2(t.auth,new gc(t),t.bypassAuthState)}function v2(t){let{auth:e,user:n}=t;return G(n,e,"internal-error"),XV(n,new gc(t),t.bypassAuthState)}async function _2(t){let{auth:e,user:n}=t;return G(n,e,"internal-error"),ZV(n,new gc(t),t.bypassAuthState)}var Pf=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return y2;case"linkViaPopup":case"linkViaRedirect":return _2;case"reauthViaPopup":case"reauthViaRedirect":return v2;default:An(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var E2=new Ui(2e3,1e4);async function x_(t,e,n){if(At(t.app))return Promise.reject(cn(t,"operation-not-supported-in-this-environment"));let r=kf(t);SV(t,e,hc);let i=C0(r,n);return new I2(r,"signInViaPopup",e,i).executeNotNull()}var I2=(()=>{class t extends Pf{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}async executeNotNull(){let n=await this.execute();return G(n,this.auth,"internal-error"),n}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");let n=M_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,E2.get())};n()}}t.currentPopupAction=null;return t})(),w2="pendingRedirect",Ef=new Map,m_=class extends Pf{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{let r=await T2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function T2(t,e){let n=C2(e),r=b2(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function D2(t,e){Ef.set(t._key(),e)}function b2(t){return er(t._redirectPersistence)}function C2(t){return _f(w2,t.config.apiKey,t.name)}async function S2(t,e,n=!1){if(At(t.app))return Promise.reject(Vi(t));let r=kf(t),i=C0(r,e),s=await new m_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var A2=600*1e3,y_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!S0(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(cn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A2&&this.cachedEventUids.clear(),this.cachedEventUids.has(qA(e))}saveEventToCache(e){this.cachedEventUids.add(qA(e)),this.lastProcessedEventTime=Date.now()}};function qA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function S0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function R2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S0(t);default:return!1}}async function N2(t,e={}){return ss(t,"GET","/v1/projects",e)}var M2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,x2=/^https?/;async function P2(t){if(t.config.emulator)return;let{authorizedDomains:e}=await N2(t);for(let n of e)try{if(O2(n))return}catch{}An(t,"unauthorized-domain")}function O2(t){let e=s_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!x2.test(n))return!1;if(M2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var k2=new Ui(3e4,6e4);function GA(){let t=Sn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function L2(t){return new Promise((e,n)=>{function r(){GA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GA(),n(cn(t,"network-request-failed"))},timeout:k2.get()})}if(Sn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Sn().gapi?.load)r();else{let i=p0("iframefcb");return Sn()[i]=()=>{gapi.load?r():n(cn(t,"network-request-failed"))},GV(`${WV()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw If=null,e})}var If=null;function F2(t){return If=If||L2(t),If}var V2=new Ui(5e3,15e3),U2="__/auth/iframe",j2="emulator/auth/iframe",B2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $2(t){let e=t.config;G(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?w_(e,j2):`https://${t.config.authDomain}/${U2}`,r={apiKey:e.apiKey,appName:t.name,v:xr},i=H2.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ro(r).slice(1)}`}async function z2(t){let e=await F2(t),n=Sn().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:$2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B2,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=cn(t,"network-request-failed"),c=Sn().setTimeout(()=>{o(s)},V2.get());function u(){Sn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var q2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G2=500,W2=600,K2="_blank",Q2="http://localhost",Of=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Y2(t,e,n,r=G2,i=W2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=ae(x({},q2),{width:r.toString(),height:i.toString(),top:o,left:s}),l=We().toLowerCase();n&&(c=a0(l)?K2:n),o0(l)&&(e=e||Q2,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(BV(l)&&c!=="_self")return J2(e||"",c),new Of(null);let p=window.open(e||"",c,h);G(p,t,"popup-blocked");try{p.focus()}catch{}return new Of(p)}function J2(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Z2="__/auth/handler",X2="emulator/auth/handler",eU=encodeURIComponent("fac");async function WA(t,e,n,r,i,o){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xr,eventId:i};if(e instanceof hc){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",zb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Rf){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=await t._getAppCheckToken(),l=u?`#${eU}=${encodeURIComponent(u)}`:"";return`${tU(t)}?${Ro(c).slice(1)}${l}`}function tU({config:t}){return t.emulator?w_(t,X2):`https://${t.authDomain}/${Z2}`}var o_="webStorageSupport",v_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N_,this._completeRedirectFn=S2,this._overrideRedirectResult=D2}async _openPopup(e,n,r,i){tr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await WA(e,n,r,s_(),i);return Y2(e,o,M_())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await WA(e,n,r,s_(),i);return a2(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(tr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await z2(e),r=new y_(e);return n.register("authEvent",i=>(G(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(o_,{type:o_},i=>{let o=i?.[0]?.[o_];o!==void 0&&n(!!o),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=P2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return f0()||s0()||b_()}},A0=v_;var KA="@firebase/auth",QA="1.12.0";var __=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function nU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rU(t){Mr(new jt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;G(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h0(t)},l=new f_(r,i,o,u);return KV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mr(new jt("auth-internal",e=>{let n=kf(e.getProvider("auth").getImmediate());return(r=>new __(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tn(KA,QA,nU(t)),tn(KA,QA,"esm2020")}var iU=300,oU=km("authIdTokenMaxAge")||iU,YA=null,sU=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oU)return;let i=n?.token;YA!==i&&(YA=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function P_(t=ld()){let e=Ua(t,"auth");if(e.isInitialized())return e.getImmediate();let n=g0(t,{popupRedirectResolver:A0,persistence:[b0,I0,N_]}),r=km("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=sU(o.toString());E0(n,s,()=>s(n.currentUser)),_0(n,c=>s(c))}}let i=Pm("auth");return i&&m0(n,`http://${i}`),n}function aU(){return document.getElementsByTagName("head")?.[0]??document}qV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=cn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",aU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rU("Browser");var cU={apiKey:"AIzaSyBFhfLWU4yYpKEU6PHPT_1wzFoJ2rJRpxM",authDomain:"css3d-2641c.firebaseapp.com",projectId:"css3d-2641c",storageBucket:"css3d-2641c.firebasestorage.app",messagingSenderId:"289767703040",appId:"1:289767703040:web:de99135897d46a0ab84ee5",measurementId:"G-DQNFLT5MX3"},R0=Jm(cU),Bi=Xv(R0),mc=P_(R0),N0=new S_;var Ff=class t{async getCollection(e){let n=ff(Bi,e);return(await xA(n)).docs.map(i=>x({id:i.id},i.data()))}async getDoc(e,n){let r=Vr(Bi,e,n),i=await MA(r);return i.exists()?x({id:i.id},i.data()):null}async addDocument(e,n){let r=ff(Bi,e);return LA(r,n)}async setDocument(e,n,r){let i=Vr(Bi,e,n);return PA(i,r)}async updateDocument(e,n,r){let i=Vr(Bi,e,n);return OA(i,r)}async deleteDocument(e,n){let r=Vr(Bi,e,n);return kA(r)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Vf=class t{userSubject=new ke(null);user$=this.userSubject.asObservable();constructor(){A_(mc,e=>{this.userSubject.next(e??null)})}async signInWithGithub(){let e=await x_(mc,N0);try{let n=await mc.currentUser?.getIdToken(!0);n&&await fetch("https://api-twypgdks3a-uc.a.run.app/users-signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:n})})}catch(n){console.error("Failed to send idToken to server",n)}return e}async signOut(){await R_(mc)}get currentUser(){return this.userSubject.getValue()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};function dU(t,e){if(t&1){let n=hl();dl(0),Ne(1,"div",17),Vt(2,"img",18),Ne(3,"span",19),U(4),st()(),Ne(5,"button",20),da("click",function(){Gs(n);let i=pl();return Ws(i.signOut())}),U(6," Sign out "),st(),fl()}if(t&2){let n=e.ngIf;ra(2),pi("src",n.photoURL,pg),ra(2),gl(n.displayName||n.email)}}function fU(t,e){if(t&1){let n=hl();Ne(0,"button",21),da("click",function(){Gs(n);let i=pl();return Ws(i.signIn())}),U(1," Login "),st()}}var Uf=class t{constructor(e,n){this.firestore=e;this.auth=n}title="";async ngOnInit(){if(!this.title){let e=await this.firestore.getDoc("siteMeta","header");e&&typeof e.title=="string"&&(this.title=e.title)}}async signIn(){try{await this.auth.signInWithGithub()}catch(e){console.error("GitHub sign-in failed",e)}}async signOut(){try{await this.auth.signOut()}catch(e){console.error("Sign-out failed",e)}}static \u0275fac=function(n){return new(n||t)(yn(Ff),yn(Vf))};static \u0275cmp=Se({type:t,selectors:[["app-header"]],inputs:{title:"title"},decls:25,vars:4,consts:[["loggedOut",""],[1,"sticky","top-0","z-50","border-b","border-white/10","bg-[#0b0f16]/80","backdrop-blur"],[1,"mx-auto","flex","max-w-6xl","items-center","justify-between","px-4","py-3","sm:px-6","lg:px-8"],["href","#",1,"flex","items-center","gap-2"],[1,"h-7","w-7","rounded-md","bg-gradient-to-br","from-rose-400","via-emerald-300","to-sky-400"],[1,"text-sm","font-semibold","tracking-wide","text-white"],[1,"hidden","items-center","gap-6","md:flex"],["href","#explore",1,"text-sm","text-slate-300","hover:text-white"],["href","#tutorials",1,"text-sm","text-slate-300","hover:text-white"],["href","#community",1,"text-sm","text-slate-300","hover:text-white"],["href","#pricing",1,"text-sm","text-slate-300","hover:text-white"],[1,"flex","items-center","gap-3"],[4,"ngIf","ngIfElse"],["href","#start",1,"inline-flex","items-center","justify-center","rounded-full","bg-gradient-to-r","from-violet-500","to-sky-500","px-4","py-2","text-sm","font-medium","text-white","shadow-sm","ring-1","ring-white/10","hover:opacity-95","focus:outline-none","focus:ring-2","focus:ring-sky-400/60"],["type","button","aria-label","Open menu",1,"inline-flex","h-10","w-10","items-center","justify-center","rounded-full","border","border-white/10","bg-white/5","text-white","hover:bg-white/10","md:hidden"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"h-5","w-5"],["stroke-linecap","round","d","M4 7h16M4 12h16M4 17h16"],[1,"hidden","items-center","gap-2","sm:flex"],["alt","avatar",1,"h-7","w-7","rounded-full",3,"src"],[1,"text-sm","text-slate-300"],[1,"inline-flex","items-center","justify-center","rounded-full","bg-white/5","px-3","py-1","text-sm","font-medium","text-white","hover:bg-white/10",3,"click"],[1,"hidden","text-sm","text-slate-300","hover:text-white","sm:inline-flex",3,"click"]],template:function(n,r){if(n&1&&(Ne(0,"header",1)(1,"div",2)(2,"a",3),Vt(3,"span",4),Ne(4,"span",5),U(5,"3D CSS Builder"),st()(),Ne(6,"nav",6)(7,"a",7),U(8,"Explore"),st(),Ne(9,"a",8),U(10,"Tutorials"),st(),Ne(11,"a",9),U(12,"Community"),st(),Ne(13,"a",10),U(14,"Pricing"),st()(),Ne(15,"div",11),ua(16,dU,7,2,"ng-container",12),jg(17,"async"),ua(18,fU,2,0,"ng-template",null,0,Hg),Ne(20,"a",13),U(21," Start Creating "),st(),Ne(22,"button",14),Mu(),Ne(23,"svg",15),Vt(24,"path",16),st()()()()()),n&2){let i=Vg(19);ra(16),pi("ngIf",Bg(17,2,r.auth.user$))("ngIfElse",i)}},dependencies:[wl,Kg,Qg],styles:[".site-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:20;background:#0a0c12e6;-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);border-bottom:1px solid var(--border-subtle)}.header-inner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 7vw}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.brand__logo[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:6px;background:conic-gradient(from 140deg,var(--axis-x),var(--axis-y),var(--axis-z))}.brand__name[_ngcontent-%COMP%]{font-weight:600}.nav[_ngcontent-%COMP%]{display:flex;gap:20px;font-size:14px}.nav__link[_ngcontent-%COMP%]{color:var(--text-muted)}.nav__link[_ngcontent-%COMP%]:hover{color:var(--text-main)}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}@media(max-width:720px){.header-inner[_ngcontent-%COMP%]{gap:10px}.nav[_ngcontent-%COMP%]{display:none}.site-header[_ngcontent-%COMP%]{padding-inline:20px}}"]})};var jf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-hero"]],decls:20,vars:0,consts:[["id","start",1,"hero"],[1,"hero__inner"],[1,"hero__preview"],[1,"app-frame"],[1,"app-frame__sidebar"],[1,"app-frame__canvas"],[1,"axis","axis--x"],[1,"axis","axis--y"],[1,"axis","axis--z"],[1,"app-frame__controls"],[1,"hero__content"],[1,"hero__actions"],["href","#builder",1,"btn","btn--primary"],["href","#how-it-works",1,"btn","btn--ghost"]],template:function(n,r){n&1&&(V(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),at(4,"div",4),V(5,"div",5),at(6,"div",6)(7,"div",7)(8,"div",8),j(),at(9,"div",9),j()(),V(10,"div",10)(11,"h1"),U(12,"Create, share & rate 3D web layouts"),j(),V(13,"p"),U(14," Build interactive 3D scenes in the browser, publish them to the gallery, and get instant feedback from other creators. "),j(),V(15,"div",11)(16,"a",12),U(17,"Try the Builder"),j(),V(18,"a",13),U(19,"Watch Tutorial"),j()()()()())},styles:[".hero[_ngcontent-%COMP%]{padding:70px 7vw 80px}.hero__inner[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1.2fr) minmax(0,1fr);gap:50px;align-items:center}.hero__content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:34px;margin:0 0 16px}.hero__content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-muted);max-width:420px;margin-bottom:24px}.hero__actions[_ngcontent-%COMP%]{display:flex;gap:14px}.app-frame[_ngcontent-%COMP%]{background:#14171f;border-radius:14px;border:1px solid var(--border-subtle);display:grid;grid-template-columns:190px minmax(0,1fr) 260px;height:360px;overflow:hidden;box-shadow:0 24px 60px #000000bf}.app-frame__sidebar[_ngcontent-%COMP%], .app-frame__controls[_ngcontent-%COMP%]{background:#111319}.app-frame__canvas[_ngcontent-%COMP%]{position:relative;background:#22252d}.axis[_ngcontent-%COMP%]{position:absolute}.axis--x[_ngcontent-%COMP%]{top:50%;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--axis-z),transparent)}.axis--y[_ngcontent-%COMP%]{left:50%;top:0;bottom:0;width:2px;background:linear-gradient(180deg,transparent,var(--axis-y),transparent)}.axis--z[_ngcontent-%COMP%]{top:50%;left:0;right:0;height:2px;transform:rotate(15deg);transform-origin:center;background:linear-gradient(90deg,transparent,var(--axis-x),transparent)}@media(max-width:960px){.hero__inner[_ngcontent-%COMP%]{grid-template-columns:minmax(0,1fr)}.hero__preview[_ngcontent-%COMP%]{order:2}.hero__content[_ngcontent-%COMP%]{order:1}}@media(max-width:720px){.hero[_ngcontent-%COMP%]{padding-inline:20px}}"]})};var Bf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-community-slider"]],decls:30,vars:0,consts:[["id","explore",1,"section","section--slider"],[1,"section__header"],[1,"works-slider"],["aria-label","Previous",1,"slider__arrow","slider__arrow--left"],[1,"slider__track"],[1,"work-card","work-card--featured"],[1,"work-card__thumb"],[1,"work-card__meta"],[1,"work-card__user"],[1,"avatar"],[1,"username"],[1,"work-card__rating"],[1,"rating-count"],[1,"work-card__tag"],["aria-label","Next",1,"slider__arrow","slider__arrow--right"],[1,"slider__pagination"],[1,"dot","dot--active"],[1,"dot"],[1,"section__footer"],["href","#community",1,"link-accent"]],template:function(n,r){n&1&&(V(0,"section",0)(1,"div",1)(2,"h2"),U(3,"Top community creations"),j(),V(4,"p"),U(5,"See the most rated scenes from our creators this week."),j()(),V(6,"div",2),at(7,"button",3),V(8,"div",4)(9,"article",5),at(10,"div",6),V(11,"div",7)(12,"div",8),at(13,"div",9),V(14,"span",10),U(15,"@creator_name"),j()(),V(16,"div",11),U(17," \u2605 4.8 "),V(18,"span",12),U(19,"(132)"),j()(),V(20,"span",13),U(21,"Editor\u2019s pick"),j()()()(),at(22,"button",14),j(),V(23,"div",15),at(24,"button",16)(25,"button",17)(26,"button",17),j(),V(27,"div",18)(28,"a",19),U(29,"View all community projects"),j()()())},styles:[".section--slider[_ngcontent-%COMP%]{padding-top:40px}.works-slider[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto minmax(0,1fr) auto;align-items:center;gap:16px}.slider__track[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:minmax(260px,1fr);gap:20px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:10px}.slider__track[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.slider__track[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-subtle);border-radius:999px}.slider__arrow[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:999px;border:1px solid var(--border-subtle);background:#0f1118e6;cursor:pointer}.slider__pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px;margin-top:16px}.dot[_ngcontent-%COMP%]{width:7px;height:7px;border-radius:999px;border:none;background:var(--border-subtle)}.dot--active[_ngcontent-%COMP%]{background:var(--accent)}.section__footer[_ngcontent-%COMP%]{text-align:center}"]})};var Hf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-tutorial"]],decls:25,vars:0,consts:[["id","how-it-works",1,"section","section--tutorial"],[1,"section__header"],[1,"tutorial-layout"],[1,"tutorial-layout__video"],[1,"video-frame"],["aria-label","Play tutorial",1,"video-frame__play"],[1,"tutorial-layout__steps"],[1,"steps"],[1,"steps__item"]],template:function(n,r){n&1&&(V(0,"section",0)(1,"div",1)(2,"h2"),U(3,"How it works"),j()(),V(4,"div",2)(5,"div",3)(6,"div",4),at(7,"button",5),j()(),V(8,"div",6)(9,"ol",7)(10,"li",8)(11,"h3"),U(12,"1. Build in the browser"),j(),V(13,"p"),U(14,"Use the 3D viewport, side panels, and controls to compose your layout."),j()(),V(15,"li",8)(16,"h3"),U(17,"2. Publish your scene"),j(),V(18,"p"),U(19,"Save and publish your work to the community gallery with one click."),j()(),V(20,"li",8)(21,"h3"),U(22,"3. Rate and get rated"),j(),V(23,"p"),U(24,"Other users can rate your scenes, leave feedback, and follow your profile."),j()()()()()())},styles:['.section--tutorial[_ngcontent-%COMP%]   .tutorial-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1.1fr) minmax(0,1fr);gap:40px;align-items:center}.video-frame[_ngcontent-%COMP%]{position:relative;border-radius:var(--radius);border:1px solid var(--border-subtle);background:radial-gradient(circle at center,#272b36 0,#11131a 65%);height:260px;display:flex;align-items:center;justify-content:center}.video-frame__play[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:999px;border:none;background:linear-gradient(135deg,var(--accent),var(--axis-z));position:relative;cursor:pointer}.video-frame__play[_ngcontent-%COMP%]:before{content:"";position:absolute;left:24px;top:21px;border-style:solid;border-width:11px 0 11px 18px;border-color:transparent transparent transparent #fff}.steps[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.steps__item[_ngcontent-%COMP%] + .steps__item[_ngcontent-%COMP%]{margin-top:18px}.steps__item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:18px}.steps__item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-muted)}@media(max-width:960px){.section--tutorial[_ngcontent-%COMP%]   .tutorial-layout[_ngcontent-%COMP%]{grid-template-columns:minmax(0,1fr)}}']})};var $f=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-features"]],decls:20,vars:0,consts:[["id","builder",1,"section","section--features"],[1,"section__header"],[1,"features"],[1,"feature"]],template:function(n,r){n&1&&(V(0,"section",0)(1,"div",1)(2,"h2"),U(3,"Create, share & rate"),j()(),V(4,"div",2)(5,"article",3)(6,"h3"),U(7,"Build in 3D"),j(),V(8,"p"),U(9,"Design scenes on a familiar dark 3D canvas using axis lines and layered panels."),j()(),V(10,"article",3)(11,"h3"),U(12,"Share instantly"),j(),V(13,"p"),U(14,"Publish your scene to the gallery and embed it anywhere with a single link."),j()(),V(15,"article",3)(16,"h3"),U(17,"Rate the best work"),j(),V(18,"p"),U(19,"Rate other creators, leave comments, and climb weekly leaderboards."),j()()()())},styles:[".features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:24px}.feature[_ngcontent-%COMP%]{padding:18px 20px;border-radius:var(--radius);border:1px solid var(--border-subtle);background:#11131be6}.feature[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px}@media(max-width:960px){.features[_ngcontent-%COMP%]{grid-template-columns:minmax(0,1fr)}}"]})};var zf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-community-grid"]],decls:34,vars:0,consts:[["id","community",1,"section","section--community"],[1,"section__header"],[1,"filters"],[1,"filter-tags"],[1,"tag","tag--active"],[1,"tag"],[1,"works-grid"],[1,"work-card"],[1,"work-card__thumb"],[1,"work-card__body"],[1,"work-card__title"],[1,"work-card__footer"],[1,"username"],[1,"work-card__rating"]],template:function(n,r){n&1&&(V(0,"section",0)(1,"div",1)(2,"h2"),U(3,"Community gallery"),j(),V(4,"div",2)(5,"label"),U(6," Sort by "),V(7,"select")(8,"option"),U(9,"Top rated"),j(),V(10,"option"),U(11,"Newest"),j(),V(12,"option"),U(13,"Trending"),j()()(),V(14,"div",3)(15,"button",4),U(16,"All"),j(),V(17,"button",5),U(18,"Dashboards"),j(),V(19,"button",5),U(20,"Layouts"),j(),V(21,"button",5),U(22,"Experimental"),j()()()(),V(23,"div",6)(24,"article",7),at(25,"div",8),V(26,"div",9)(27,"h3",10),U(28,"Dark UI dashboard"),j(),V(29,"div",11)(30,"span",12),U(31,"@designer"),j(),V(32,"span",13),U(33,"\u2605 4.6"),j()()()()()())},styles:[".section--community[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap;margin-top:10px}.filter-tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.works-grid[_ngcontent-%COMP%]{margin-top:28px;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px}"]})};var qf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-cta"]],decls:8,vars:0,consts:[[1,"section","section--cta"],[1,"section__header","section__header--center"],["href","#start",1,"btn","btn--primary","btn--large"]],template:function(n,r){n&1&&(V(0,"section",0)(1,"div",1)(2,"h2"),U(3,"Ready to build your first scene?"),j(),V(4,"p"),U(5,"Join designers experimenting with 3D interfaces directly in the browser."),j(),V(6,"a",2),U(7,"Start Creating for Free"),j()()())},styles:[".section--cta[_ngcontent-%COMP%]{padding-bottom:90px;text-align:center}.section__header--center[_ngcontent-%COMP%]{text-align:center}"]})};var Gf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"site-footer"]],template:function(n,r){n&1&&(V(0,"footer",0)(1,"p"),U(2,"\xA9 2026 3D CSS Builder"),j()())},styles:[".site-footer[_ngcontent-%COMP%]{border-top:1px solid var(--border-subtle);padding:18px 7vw 26px;font-size:13px;color:var(--text-muted)}"]})};var Wf=class t{title=Ir("css3dLanding");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-root"]],decls:10,vars:1,consts:[[3,"title"]],template:function(n,r){n&1&&(Vt(0,"app-header",0),Ne(1,"main"),Vt(2,"app-hero")(3,"app-community-slider")(4,"app-tutorial")(5,"app-features")(6,"app-community-grid")(7,"app-cta")(8,"router-outlet"),st(),Vt(9,"app-footer")),n&2&&pi("title",r.title())},dependencies:[xa,Uf,jf,Bf,Hf,$f,zf,qf,Gf],encapsulation:2})};im(Wf,Ab).catch(t=>console.error(t));
